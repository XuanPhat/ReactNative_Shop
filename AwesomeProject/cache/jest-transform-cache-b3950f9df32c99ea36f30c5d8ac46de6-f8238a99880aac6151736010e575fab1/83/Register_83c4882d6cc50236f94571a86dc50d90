d2741e4327e864782ba340a29cc36ef5
var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));

var Animatable = _interopRequireWildcard(require("react-native-animatable"));

var Yup = _interopRequireWildcard(require("yup"));

var _react = _interopRequireDefault(require("react"));

var _reactNativePaper = require("react-native-paper");

var _reactNative = require("react-native");

var _reactRedux = require("react-redux");

var _native = require("@react-navigation/native");

var _formik = require("formik");

var _MaterialCommunityIcons = _interopRequireDefault(require("react-native-vector-icons/MaterialCommunityIcons"));

var _firestore = _interopRequireDefault(require("@react-native-firebase/firestore"));

var _auth = _interopRequireWildcard(require("@react-native-firebase/auth"));

var _Texbox = _interopRequireDefault(require("../../../components/Texbox"));

var _color = _interopRequireDefault(require("../../../constants/color"));

var _actions = require("../actions/");

var _reactNativeExpoFancyAlerts = require("react-native-expo-fancy-alerts");

var RegisterSchema = Yup.object().shape({
  email: Yup.string().required('Địa chỉ email không được trống'),
  password: Yup.string().required('Mật khẩu không được trống').min(6, 'mật khẩu phải lớn hơn 5 kí tự'),
  name: Yup.string().required('Tên không được trống'),
  confirmPassword: Yup.string().required('Mật khẩu không được để trống').when('password', {
    is: function is(val) {
      return val && val.length > 0 ? true : false;
    },
    then: Yup.string().oneOf([Yup.ref('password')], 'Mật khẩu bạn nhập không khớp')
  })
});

var SignIn = function SignIn() {
  var _React$useState = _react.default.useState(false),
      _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 2),
      visible = _React$useState2[0],
      setVisible = _React$useState2[1];

  var Touch = _reactNative.Platform.OS === 'ios' ? _reactNative.TouchableOpacity : _reactNative.TouchableWithoutFeedback;

  var _React$useState3 = _react.default.useState(false),
      _React$useState4 = (0, _slicedToArray2.default)(_React$useState3, 2),
      loading = _React$useState4[0],
      setLoading = _React$useState4[1];

  var dispatch = (0, _reactRedux.useDispatch)();
  var paperColor = (0, _reactNativePaper.useTheme)().colors;
  var navigation = (0, _native.useNavigation)();
  return _react.default.createElement(_reactNative.View, {
    style: {
      flex: 1
    }
  }, _react.default.createElement(_reactNative.TouchableOpacity, {
    activeOpacity: 1,
    style: {
      flex: 1,
      backgroundColor: _color.default.WHITE
    },
    onPress: _reactNative.Keyboard.dismiss
  }, _react.default.createElement(_reactNative.KeyboardAvoidingView, {
    behavior: _reactNative.Platform.OS === 'ios' ? 'padding' : undefined,
    style: {
      flex: 1
    }
  }, _react.default.createElement(_formik.Formik, {
    initialValues: {
      email: '',
      password: '',
      role: 'User',
      name: '',
      confirmPassword: ''
    },
    validationSchema: RegisterSchema,
    onSubmit: function onSubmit(values) {
      setLoading(true);
      (0, _auth.default)().createUserWithEmailAndPassword(values.email, values.password).then(function () {
        var uid = (0, _auth.default)().currentUser.uid;
        (0, _auth.default)().currentUser.updateProfile({
          displayName: values.name
        });
        (0, _firestore.default)().collection('Profiles').doc(uid).set({
          role: 'User',
          name: values.name
        });
        setVisible(true);
      }).catch(function (error) {
        if (error.code === 'auth/email-already-in-use') {
          setLoading(false);

          _reactNative.Alert.alert('Email này đã tồn tại!');
        }

        if (error.code === 'auth/invalid-email') {
          setLoading(false);

          _reactNative.Alert.alert('Địa chỉ email không hợp lệ!');
        }
      });
    }
  }, function (formik) {
    return _react.default.createElement(_react.default.Fragment, null, _react.default.createElement(_reactNative.View, {
      style: {
        alignItems: 'center',
        padding: 16,
        paddingTop: 36
      }
    }, _react.default.createElement(_reactNativePaper.Headline, {
      style: {
        color: paperColor.primary,
        fontWeight: '400'
      }
    }, "\u0110\u0102NG K\xDD")), _react.default.createElement(_reactNative.View, {
      style: {
        flex: 0,
        justifyContent: 'flex-start',
        padding: 16
      }
    }, _react.default.createElement(_Texbox.default, {
      name: "name",
      disabled: loading,
      iconName: "account",
      placeholder: "H\u1ECD T\xEAn ",
      containerStyle: {
        borderWidth: 0,
        backgroundColor: 'white'
      },
      inputContainerStyle: {
        borderBottomWidth: 1.5
      },
      leftIconContainerStyle: {
        marginLeft: 12
      },
      onBlur: function onBlur() {
        return formik.handleBlur('name');
      },
      onChangeText: formik.handleChange('name'),
      value: formik.values.name
    }), _react.default.createElement(_Texbox.default, {
      name: "email",
      autoCapitalize: "none",
      iconName: "email",
      disabled: loading,
      placeholder: "T\xE0i kho\u1EA3n gmail",
      containerStyle: {
        borderWidth: 0,
        backgroundColor: 'white'
      },
      inputContainerStyle: {
        borderBottomWidth: 1.5
      },
      leftIconContainerStyle: {
        marginLeft: 12
      },
      onBlur: function onBlur() {
        return formik.handleBlur('email');
      },
      onChangeText: formik.handleChange('email'),
      value: formik.values.email
    }), _react.default.createElement(_reactNative.View, {
      height: 16
    }), _react.default.createElement(_Texbox.default, {
      name: "password",
      iconName: "lock",
      secureTextEntry: true,
      disabled: loading,
      placeholder: "M\u1EADt kh\u1EA9u",
      containerStyle: {
        borderWidth: 0,
        backgroundColor: 'white'
      },
      inputContainerStyle: {
        borderBottomWidth: 1.5
      },
      leftIconContainerStyle: {
        marginLeft: 12
      },
      onBlur: function onBlur() {
        return formik.handleBlur('password');
      },
      onChangeText: formik.handleChange('password'),
      value: formik.values.password
    }), _react.default.createElement(_Texbox.default, {
      name: "confirmPassword",
      iconName: "shield-lock",
      secureTextEntry: true,
      disabled: loading,
      placeholder: "Nh\u1EADp l\u1EA1i m\u1EADt kh\u1EA9u",
      containerStyle: {
        borderWidth: 0,
        backgroundColor: 'white'
      },
      inputContainerStyle: {
        borderBottomWidth: 1.5
      },
      leftIconContainerStyle: {
        marginLeft: 12
      },
      onBlur: function onBlur() {
        return formik.handleBlur('confirmPassword');
      },
      onChangeText: formik.handleChange('confirmPassword'),
      value: formik.values.confirmPassword
    }), _react.default.createElement(_reactNative.TouchableOpacity, {
      onPress: function onPress() {
        navigation.navigate('SignInScreen');
      }
    }, _react.default.createElement(_reactNative.View, {
      style: {
        alignItems: 'flex-end',
        padding: 12
      }
    }, _react.default.createElement(_reactNative.Text, null, "\u0110\xE3 c\xF3 t\xE0i kho\u1EA3n")))), _react.default.createElement(Animatable.View, {
      animation: "slideInUp",
      duration: 1000,
      style: {
        flex: 1,
        padding: 16,
        justifyContent: 'flex-end'
      }
    }, !visible && _react.default.createElement(_reactNativePaper.Button, {
      disabled: loading,
      loading: loading,
      labelStyle: {
        fontSize: 18
      },
      contentStyle: {
        height: 48,
        alignItems: 'center',
        justifyContent: 'center'
      },
      style: {
        elevation: 0
      },
      uppercase: false,
      icon: "key",
      mode: "contained",
      onPress: formik.handleSubmit,
      dark: true
    }, loading ? 'Đang đăng ký ...' : 'Đăng ký'), visible && _react.default.createElement(_reactNative.View, null, _react.default.createElement(_reactNativeExpoFancyAlerts.FancyAlert, {
      visible: visible,
      icon: _react.default.createElement(_reactNative.View, {
        style: {
          flex: 1,
          display: 'flex',
          justifyContent: 'center',
          alignItems: 'center',
          backgroundColor: '#4CB748',
          borderRadius: 50,
          width: '100%'
        }
      }, _react.default.createElement(_reactNative.Text, null, _react.default.createElement(_MaterialCommunityIcons.default, {
        name: "check",
        size: 30,
        color: "white"
      }))),
      style: {
        backgroundColor: 'white'
      }
    }, _react.default.createElement(_reactNative.View, {
      style: styles.content
    }, _react.default.createElement(_reactNative.Text, {
      style: {}
    }, "\u0110\u0103ng k\xFD th\xE0nh c\xF4ng ..!"), _react.default.createElement(_reactNative.TouchableOpacity, {
      style: styles.btn,
      onPress: function onPress() {
        setVisible(false);
        navigation.navigate('SignInScreen');
      }
    }, _react.default.createElement(_reactNative.Text, {
      style: styles.btnText
    }, "OK"))))), _react.default.createElement(Touch, {
      onPress: function onPress() {
        navigation.navigate('SignInScreen');
      }
    }, _react.default.createElement(_reactNative.View, {
      style: {
        alignItems: 'center',
        padding: 12
      }
    }))));
  }))));
};

var styles = _reactNative.StyleSheet.create({
  alert: {
    backgroundColor: '#EEEEEE'
  },
  icon: {
    flex: 1,
    display: 'flex',
    justifyContent: 'center',
    alignItems: 'center',
    backgroundColor: '#C3272B',
    width: '100%'
  },
  content: {
    display: 'flex',
    flexDirection: 'column',
    justifyContent: 'center',
    alignItems: 'center',
    marginTop: -16,
    marginBottom: 16
  },
  contentText: {
    textAlign: 'center'
  },
  btn: {
    borderRadius: 32,
    display: 'flex',
    flexDirection: 'row',
    justifyContent: 'center',
    alignItems: 'center',
    paddingHorizontal: 8,
    paddingVertical: 8,
    alignSelf: 'stretch',
    backgroundColor: '#4CB748',
    marginTop: 16,
    minWidth: '50%',
    paddingHorizontal: 16
  },
  btnText: {
    color: '#FFFFFF'
  }
});

var _default = SignIn;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlJlZ2lzdGVyLmpzIl0sIm5hbWVzIjpbIlJlZ2lzdGVyU2NoZW1hIiwiWXVwIiwib2JqZWN0Iiwic2hhcGUiLCJlbWFpbCIsInN0cmluZyIsInJlcXVpcmVkIiwicGFzc3dvcmQiLCJtaW4iLCJuYW1lIiwiY29uZmlybVBhc3N3b3JkIiwid2hlbiIsImlzIiwidmFsIiwibGVuZ3RoIiwidGhlbiIsIm9uZU9mIiwicmVmIiwiU2lnbkluIiwiUmVhY3QiLCJ1c2VTdGF0ZSIsInZpc2libGUiLCJzZXRWaXNpYmxlIiwiVG91Y2giLCJQbGF0Zm9ybSIsIk9TIiwiVG91Y2hhYmxlT3BhY2l0eSIsIlRvdWNoYWJsZVdpdGhvdXRGZWVkYmFjayIsImxvYWRpbmciLCJzZXRMb2FkaW5nIiwiZGlzcGF0Y2giLCJwYXBlckNvbG9yIiwiY29sb3JzIiwibmF2aWdhdGlvbiIsImZsZXgiLCJiYWNrZ3JvdW5kQ29sb3IiLCJXSElURSIsIktleWJvYXJkIiwiZGlzbWlzcyIsInVuZGVmaW5lZCIsInJvbGUiLCJ2YWx1ZXMiLCJjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQiLCJ1aWQiLCJjdXJyZW50VXNlciIsInVwZGF0ZVByb2ZpbGUiLCJkaXNwbGF5TmFtZSIsImNvbGxlY3Rpb24iLCJkb2MiLCJzZXQiLCJjYXRjaCIsImVycm9yIiwiY29kZSIsIkFsZXJ0IiwiYWxlcnQiLCJmb3JtaWsiLCJhbGlnbkl0ZW1zIiwicGFkZGluZyIsInBhZGRpbmdUb3AiLCJjb2xvciIsInByaW1hcnkiLCJmb250V2VpZ2h0IiwianVzdGlmeUNvbnRlbnQiLCJib3JkZXJXaWR0aCIsImJvcmRlckJvdHRvbVdpZHRoIiwibWFyZ2luTGVmdCIsImhhbmRsZUJsdXIiLCJoYW5kbGVDaGFuZ2UiLCJuYXZpZ2F0ZSIsImZvbnRTaXplIiwiaGVpZ2h0IiwiZWxldmF0aW9uIiwiaGFuZGxlU3VibWl0IiwiZGlzcGxheSIsImJvcmRlclJhZGl1cyIsIndpZHRoIiwic3R5bGVzIiwiY29udGVudCIsImJ0biIsImJ0blRleHQiLCJTdHlsZVNoZWV0IiwiY3JlYXRlIiwiaWNvbiIsImZsZXhEaXJlY3Rpb24iLCJtYXJnaW5Ub3AiLCJtYXJnaW5Cb3R0b20iLCJjb250ZW50VGV4dCIsInRleHRBbGlnbiIsInBhZGRpbmdIb3Jpem9udGFsIiwicGFkZGluZ1ZlcnRpY2FsIiwiYWxpZ25TZWxmIiwibWluV2lkdGgiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBR0E7O0FBQ0E7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBV0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUE7O0FBR0EsSUFBTUEsY0FBYyxHQUFHQyxHQUFHLENBQUNDLE1BQUosR0FBYUMsS0FBYixDQUFtQjtBQUN4Q0MsRUFBQUEsS0FBSyxFQUFFSCxHQUFHLENBQUNJLE1BQUosR0FBYUMsUUFBYixDQUFzQixnQ0FBdEIsQ0FEaUM7QUFFeENDLEVBQUFBLFFBQVEsRUFBRU4sR0FBRyxDQUFDSSxNQUFKLEdBQ1BDLFFBRE8sQ0FDRSwyQkFERixFQUVQRSxHQUZPLENBRUgsQ0FGRyxFQUVBLCtCQUZBLENBRjhCO0FBS3hDQyxFQUFBQSxJQUFJLEVBQUVSLEdBQUcsQ0FBQ0ksTUFBSixHQUFhQyxRQUFiLENBQXNCLHNCQUF0QixDQUxrQztBQU14Q0ksRUFBQUEsZUFBZSxFQUFFVCxHQUFHLENBQUNJLE1BQUosR0FDZEMsUUFEYyxDQUNMLDhCQURLLEVBRWRLLElBRmMsQ0FFVCxVQUZTLEVBRUc7QUFDaEJDLElBQUFBLEVBQUUsRUFBRSxZQUFDQyxHQUFEO0FBQUEsYUFBVUEsR0FBRyxJQUFJQSxHQUFHLENBQUNDLE1BQUosR0FBYSxDQUFwQixHQUF3QixJQUF4QixHQUErQixLQUF6QztBQUFBLEtBRFk7QUFFaEJDLElBQUFBLElBQUksRUFBRWQsR0FBRyxDQUFDSSxNQUFKLEdBQWFXLEtBQWIsQ0FDSixDQUFDZixHQUFHLENBQUNnQixHQUFKLENBQVEsVUFBUixDQUFELENBREksRUFFSiw4QkFG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QUFBLGlCQUFpQixFQUFFO0FBWmhCLEdBdkIwQjtBQXFDL0JULEVBQUFBLE9BQU8sRUFBRTtBQUNQcEIsSUFBQUEsS0FBSyxFQUFFO0FBREE7QUFyQ3NCLENBQWxCLENBQWY7O2VBeUNlekMsTSIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIHJlYWN0LW5hdGl2ZS9uby1pbmxpbmUtc3R5bGVzICovXHJcbi8qIGVzbGludC1kaXNhYmxlIHJlYWN0L3Byb3AtdHlwZXMgKi9cclxuXHJcbmltcG9ydCAqIGFzIEFuaW1hdGFibGUgZnJvbSAncmVhY3QtbmF0aXZlLWFuaW1hdGFibGUnO1xyXG5pbXBvcnQgKiBhcyBZdXAgZnJvbSAneXVwJztcclxuXHJcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7QnV0dG9uLCBIZWFkbGluZSwgdXNlVGhlbWV9IGZyb20gJ3JlYWN0LW5hdGl2ZS1wYXBlcic7XHJcbmltcG9ydCB7XHJcbiAgQWxlcnQsXHJcbiAgS2V5Ym9hcmQsXHJcbiAgS2V5Ym9hcmRBdm9pZGluZ1ZpZXcsXHJcbiAgUGxhdGZvcm0sXHJcbiAgVGV4dCxcclxuICBUb3VjaGFibGVPcGFjaXR5LFxyXG4gIFRvdWNoYWJsZVdpdGhvdXRGZWVkYmFjayxcclxuICBWaWV3LFxyXG4gIFN0eWxlU2hlZXQsXHJcbn0gZnJvbSAncmVhY3QtbmF0aXZlJztcclxuaW1wb3J0IHt1c2VEaXNwYXRjaCwgdXNlU2VsZWN0b3J9IGZyb20gJ3JlYWN0LXJlZHV4JztcclxuaW1wb3J0IHt1c2VOYXZpZ2F0aW9ufSBmcm9tICdAcmVhY3QtbmF2aWdhdGlvbi9uYXRpdmUnO1xyXG5pbXBvcnQge0Zvcm1pa30gZnJvbSAnZm9ybWlrJztcclxuaW1wb3J0IEljb24gZnJvbSAncmVhY3QtbmF0aXZlLXZlY3Rvci1pY29ucy9NYXRlcmlhbENvbW11bml0eUljb25zJztcclxuaW1wb3J0IGZpcmVzdG9yZSBmcm9tICdAcmVhY3QtbmF0aXZlLWZpcmViYXNlL2ZpcmVzdG9yZSc7XHJcblxyXG5pbXBvcnQgYXV0aCwge2ZpcmViYXNlfSBmcm9tICdAcmVhY3QtbmF0aXZlLWZpcmViYXNlL2F1dGgnO1xyXG5pbXBvcnQgVGV4dEJveCBmcm9tICcuLi8uLi8uLi9jb21wb25lbnRzL1RleGJveCc7XHJcbmltcG9ydCBjb2xvcnMgZnJvbSAnLi4vLi4vLi4vY29uc3RhbnRzL2NvbG9yJztcclxuaW1wb3J0IHtyZWdpc3RlckFjdGlvbn0gZnJvbSAnLi4vYWN0aW9ucy8nO1xyXG4vL0FsZXJ0XHJcbmltcG9ydCB7RmFuY3lBbGVydH0gZnJvbSAncmVhY3QtbmF0aXZlLWV4cG8tZmFuY3ktYWxlcnRzJztcclxuXHJcbi8vIFlVUFxyXG5jb25zdCBSZWdpc3RlclNjaGVtYSA9IFl1cC5vYmplY3QoKS5zaGFwZSh7XHJcbiAgZW1haWw6IFl1cC5zdHJpbmcoKS5yZXF1aXJlZCgnxJDhu4thIGNo4buJIGVtYWlsIGtow7RuZyDEkcaw4bujYyB0cuG7kW5nJyksXHJcbiAgcGFzc3dvcmQ6IFl1cC5zdHJpbmcoKVxyXG4gICAgLnJlcXVpcmVkKCdN4bqtdCBraOG6qXUga2jDtG5nIMSRxrDhu6NjIHRy4buRbmcnKVxyXG4gICAgLm1pbig2LCAnbeG6rXQga2jhuql1IHBo4bqjaSBs4bubbiBoxqFuIDUga8OtIHThu7EnKSxcclxuICBuYW1lOiBZdXAuc3RyaW5nKCkucmVxdWlyZWQoJ1TDqm4ga2jDtG5nIMSRxrDhu6NjIHRy4buRbmcnKSxcclxuICBjb25maXJtUGFzc3dvcmQ6IFl1cC5zdHJpbmcoKVxyXG4gICAgLnJlcXVpcmVkKCdN4bqtdCBraOG6qXUga2jDtG5nIMSRxrDhu6NjIMSR4buDIHRy4buRbmcnKVxyXG4gICAgLndoZW4oJ3Bhc3N3b3JkJywge1xyXG4gICAgICBpczogKHZhbCkgPT4gKHZhbCAmJiB2YWwubGVuZ3RoID4gMCA/IHRydWUgOiBmYWxzZSksXHJcbiAgICAgIHRoZW46IFl1cC5zdHJpbmcoKS5vbmVPZihcclxuICAgICAgICBbWXVwLnJlZigncGFzc3dvcmQnKV0sXHJcbiAgICAgICAgJ03huq10IGto4bqpdSBi4bqhbiBuaOG6rXAga2jDtG5nIGto4bubcCcsXHJcbiAgICAgICksXHJcbiAgICB9KSxcclxufSk7XHJcblxyXG5jb25zdCBTaWduSW4gPSAoKSA9PiB7XHJcbiAgY29uc3QgW3Zpc2libGUsIHNldFZpc2libGVdID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpO1xyXG4gIGNvbnN0IFRvdWNoID1cclxuICAgIFBsYXRmb3JtLk9TID09PSAnaW9zJyA/IFRvdWNoYWJsZU9wYWNpdHkgOiBUb3VjaGFibGVXaXRob3V0RmVlZGJhY2s7XHJcbiAgLy8gUkVEVVhcclxuICAvLyBjb25zdCBsb2FkaW5nID0gdXNlU2VsZWN0b3IoKHN0YXRlKSA9PiBzdGF0ZS5hdXRoLmxvYWRpbmcpO1xyXG4gIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKTtcclxuICBjb25zdCBkaXNwYXRjaCA9IHVzZURpc3BhdGNoKCk7XHJcbiAgLy8gVEhFTU5FXHJcbiAgY29uc3QgcGFwZXJDb2xvciA9IHVzZVRoZW1lKCkuY29sb3JzO1xyXG5cclxuICAvLyBOQVZJR0FUSU9OXHJcbiAgY29uc3QgbmF2aWdhdGlvbiA9IHVzZU5hdmlnYXRpb24oKTtcclxuXHJcbiAgLy8gUkVOREVSXHJcbiAgcmV0dXJuIChcclxuICAgIDxWaWV3IHN0eWxlPXt7ZmxleDogMX19PlxyXG4gICAgICA8VG91Y2hhYmxlT3BhY2l0eVxyXG4gICAgICAgIGFjdGl2ZU9wYWNpdHk9ezF9XHJcbiAgICAgICAgc3R5bGU9e3tmbGV4OiAxLCBiYWNrZ3JvdW5kQ29sb3I6IGNvbG9ycy5XSElURX19XHJcbiAgICAgICAgb25QcmVzcz17S2V5Ym9hcmQuZGlzbWlzc30+XHJcbiAgICAgICAgPEtleWJvYXJkQXZvaWRpbmdWaWV3XHJcbiAgICAgICAgICBiZWhhdmlvcj17UGxhdGZvcm0uT1MgPT09ICdpb3MnID8gJ3BhZGRpbmcnIDogdW5kZWZpbmVkfVxyXG4gICAgICAgICAgc3R5bGU9e3tmbGV4OiAxfX0+XHJcbiAgICAgICAgICA8Rm9ybWlrXHJcbiAgICAgICAgICAgIGluaXRpYWxWYWx1ZXM9e3tcclxuICAgICAgICAgICAgICBlbWFpbDogJycsXHJcbiAgICAgICAgICAgICAgcGFzc3dvcmQ6ICcnLFxyXG4gICAgICAgICAgICAgIHJvbGU6ICdVc2VyJyxcclxuICAgICAgICAgICAgICBuYW1lOiAnJyxcclxuICAgICAgICAgICAgICBjb25maXJtUGFzc3dvcmQ6ICcnLFxyXG4gICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICB2YWxpZGF0aW9uU2NoZW1hPXtSZWdpc3RlclNjaGVtYX1cclxuICAgICAgICAgICAgb25TdWJtaXQ9eyh2YWx1ZXMpID0+IHtcclxuICAgICAgICAgICAgICBzZXRMb2FkaW5nKHRydWUpO1xyXG4gICAgICAgICAgICAgIGF1dGgoKVxyXG4gICAgICAgICAgICAgICAgLmNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZCh2YWx1ZXMuZW1haWwsIHZhbHVlcy5wYXNzd29yZClcclxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgbGV0IHVpZCA9IGF1dGgoKS5jdXJyZW50VXNlci51aWQ7XHJcbiAgICAgICAgICAgICAgICAgIGF1dGgoKS5jdXJyZW50VXNlci51cGRhdGVQcm9maWxlKHtkaXNwbGF5TmFtZTogdmFsdWVzLm5hbWV9KTtcclxuICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIHJvbGVcclxuICAgICAgICAgICAgICAgICAgZmlyZXN0b3JlKCkuY29sbGVjdGlvbignUHJvZmlsZXMnKS5kb2ModWlkKS5zZXQoe1xyXG4gICAgICAgICAgICAgICAgICAgIHJvbGU6ICdVc2VyJyxcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiB2YWx1ZXMubmFtZSxcclxuICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgIHNldFZpc2libGUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICBpZiAoZXJyb3IuY29kZSA9PT0gJ2F1dGgvZW1haWwtYWxyZWFkeS1pbi11c2UnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIEFsZXJ0LmFsZXJ0KCdFbWFpbCBuw6B5IMSRw6MgdOG7k24gdOG6oWkhJyk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5jb2RlID09PSAnYXV0aC9pbnZhbGlkLWVtYWlsJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBBbGVydC5hbGVydCgnxJDhu4thIGNo4buJIGVtYWlsIGtow7RuZyBo4bujcCBs4buHIScpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9fT5cclxuICAgICAgICAgICAgeyhmb3JtaWspID0+IChcclxuICAgICAgICAgICAgICA8UmVhY3QuRnJhZ21lbnQ+XHJcbiAgICAgICAgICAgICAgICA8Vmlld1xyXG4gICAgICAgICAgICAgICAgICBzdHlsZT17e2FsaWduSXRlbXM6ICdjZW50ZXInLCBwYWRkaW5nOiAxNiwgcGFkZGluZ1RvcDogMzZ9fT5cclxuICAgICAgICAgICAgICAgICAgPEhlYWRsaW5lXHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tjb2xvcjogcGFwZXJDb2xvci5wcmltYXJ5LCBmb250V2VpZ2h0OiAnNDAwJ319PlxyXG4gICAgICAgICAgICAgICAgICAgIMSQxIJORyBLw51cclxuICAgICAgICAgICAgICAgICAgPC9IZWFkbGluZT5cclxuICAgICAgICAgICAgICAgIDwvVmlldz5cclxuICAgICAgICAgICAgICAgIDxWaWV3XHJcbiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7ZmxleDogMCwganVzdGlmeUNvbnRlbnQ6ICdmbGV4LXN0YXJ0JywgcGFkZGluZzogMTZ9fT5cclxuICAgICAgICAgICAgICAgICAgPFRleHRCb3hcclxuICAgICAgICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2xvYWRpbmd9XHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbk5hbWU9XCJhY2NvdW50XCJcclxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkjhu40gVMOqbiBcIlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lclN0eWxlPXt7Ym9yZGVyV2lkdGg6IDAsIGJhY2tncm91bmRDb2xvcjogJ3doaXRlJ319XHJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRDb250YWluZXJTdHlsZT17e2JvcmRlckJvdHRvbVdpZHRoOiAxLjV9fVxyXG4gICAgICAgICAgICAgICAgICAgIGxlZnRJY29uQ29udGFpbmVyU3R5bGU9e3ttYXJnaW5MZWZ0OiAxMn19XHJcbiAgICAgICAgICAgICAgICAgICAgb25CbHVyPXsoKSA9PiBmb3JtaWsuaGFuZGxlQmx1cignbmFtZScpfVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlVGV4dD17Zm9ybWlrLmhhbmRsZUNoYW5nZSgnbmFtZScpfVxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlPXtmb3JtaWsudmFsdWVzLm5hbWV9XHJcbiAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgIDxUZXh0Qm94XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZT1cImVtYWlsXCJcclxuICAgICAgICAgICAgICAgICAgICBhdXRvQ2FwaXRhbGl6ZT1cIm5vbmVcIlxyXG4gICAgICAgICAgICAgICAgICAgIGljb25OYW1lPVwiZW1haWxcIlxyXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtsb2FkaW5nfVxyXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiVMOgaSBraG/huqNuIGdtYWlsXCJcclxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXJTdHlsZT17e2JvcmRlcldpZHRoOiAwLCBiYWNrZ3JvdW5kQ29sb3I6ICd3aGl0ZSd9fVxyXG4gICAgICAgICAgICAgICAgICAgIGlucHV0Q29udGFpbmVyU3R5bGU9e3tib3JkZXJCb3R0b21XaWR0aDogMS41fX1cclxuICAgICAgICAgICAgICAgICAgICBsZWZ0SWNvbkNvbnRhaW5lclN0eWxlPXt7bWFyZ2luTGVmdDogMTJ9fVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQmx1cj17KCkgPT4gZm9ybWlrLmhhbmRsZUJsdXIoJ2VtYWlsJyl9XHJcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2VUZXh0PXtmb3JtaWsuaGFuZGxlQ2hhbmdlKCdlbWFpbCcpfVxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlPXtmb3JtaWsudmFsdWVzLmVtYWlsfVxyXG4gICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICA8VmlldyBoZWlnaHQ9ezE2fSAvPlxyXG4gICAgICAgICAgICAgICAgICA8VGV4dEJveFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU9XCJwYXNzd29yZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbk5hbWU9XCJsb2NrXCJcclxuICAgICAgICAgICAgICAgICAgICBzZWN1cmVUZXh0RW50cnlcclxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17bG9hZGluZ31cclxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIk3huq10IGto4bqpdVwiXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyU3R5bGU9e3tib3JkZXJXaWR0aDogMCwgYmFja2dyb3VuZENvbG9yOiAnd2hpdGUnfX1cclxuICAgICAgICAgICAgICAgICAgICBpbnB1dENvbnRhaW5lclN0eWxlPXt7Ym9yZGVyQm90dG9tV2lkdGg6IDEuNX19XHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdEljb25Db250YWluZXJTdHlsZT17e21hcmdpbkxlZnQ6IDEyfX1cclxuICAgICAgICAgICAgICAgICAgICBvbkJsdXI9eygpID0+IGZvcm1pay5oYW5kbGVCbHVyKCdwYXNzd29yZCcpfVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlVGV4dD17Zm9ybWlrLmhhbmRsZUNoYW5nZSgncGFzc3dvcmQnKX1cclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZT17Zm9ybWlrLnZhbHVlcy5wYXNzd29yZH1cclxuICAgICAgICAgICAgICAgICAgLz5cclxuXHJcbiAgICAgICAgICAgICAgICAgIDxUZXh0Qm94XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZT1cImNvbmZpcm1QYXNzd29yZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbk5hbWU9XCJzaGllbGQtbG9ja1wiXHJcbiAgICAgICAgICAgICAgICAgICAgc2VjdXJlVGV4dEVudHJ5XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2xvYWRpbmd9XHJcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJOaOG6rXAgbOG6oWkgbeG6rXQga2jhuql1XCJcclxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXJTdHlsZT17e2JvcmRlcldpZHRoOiAwLCBiYWNrZ3JvdW5kQ29sb3I6ICd3aGl0ZSd9fVxyXG4gICAgICAgICAgICAgICAgICAgIGlucHV0Q29udGFpbmVyU3R5bGU9e3tib3JkZXJCb3R0b21XaWR0aDogMS41fX1cclxuICAgICAgICAgICAgICAgICAgICBsZWZ0SWNvbkNvbnRhaW5lclN0eWxlPXt7bWFyZ2luTGVmdDogMTJ9fVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQmx1cj17KCkgPT4gZm9ybWlrLmhhbmRsZUJsdXIoJ2NvbmZpcm1QYXNzd29yZCcpfVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlVGV4dD17Zm9ybWlrLmhhbmRsZUNoYW5nZSgnY29uZmlybVBhc3N3b3JkJyl9XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2Zvcm1pay52YWx1ZXMuY29uZmlybVBhc3N3b3JkfVxyXG4gICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICA8VG91Y2hhYmxlT3BhY2l0eVxyXG4gICAgICAgICAgICAgICAgICAgIG9uUHJlc3M9eygpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgIG5hdmlnYXRpb24ubmF2aWdhdGUoJ1NpZ25JblNjcmVlbicpO1xyXG4gICAgICAgICAgICAgICAgICAgIH19PlxyXG4gICAgICAgICAgICAgICAgICAgIDxWaWV3IHN0eWxlPXt7YWxpZ25JdGVtczogJ2ZsZXgtZW5kJywgcGFkZGluZzogMTJ9fT5cclxuICAgICAgICAgICAgICAgICAgICAgIDxUZXh0PsSQw6MgY8OzIHTDoGkga2hv4bqjbjwvVGV4dD5cclxuICAgICAgICAgICAgICAgICAgICA8L1ZpZXc+XHJcbiAgICAgICAgICAgICAgICAgIDwvVG91Y2hhYmxlT3BhY2l0eT5cclxuICAgICAgICAgICAgICAgIDwvVmlldz5cclxuICAgICAgICAgICAgICAgIDxBbmltYXRhYmxlLlZpZXdcclxuICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uPVwic2xpZGVJblVwXCJcclxuICAgICAgICAgICAgICAgICAgZHVyYXRpb249ezEwMDB9XHJcbiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxleDogMSxcclxuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAxNixcclxuICAgICAgICAgICAgICAgICAgICBqdXN0aWZ5Q29udGVudDogJ2ZsZXgtZW5kJyxcclxuICAgICAgICAgICAgICAgICAgfX0+XHJcbiAgICAgICAgICAgICAgICAgIHshdmlzaWJsZSAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2xvYWRpbmd9XHJcbiAgICAgICAgICAgICAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5nfVxyXG4gICAgICAgICAgICAgICAgICAgICAgbGFiZWxTdHlsZT17e2ZvbnRTaXplOiAxOH19XHJcbiAgICAgICAgICAgICAgICAgICAgICBjb250ZW50U3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiA0OCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcclxuICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e2VsZXZhdGlvbjogMH19XHJcbiAgICAgICAgICAgICAgICAgICAgICB1cHBlcmNhc2U9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgaWNvbj1cImtleVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICBtb2RlPVwiY29udGFpbmVkXCJcclxuICAgICAgICAgICAgICAgICAgICAgIG9uUHJlc3M9e2Zvcm1pay5oYW5kbGVTdWJtaXR9XHJcbiAgICAgICAgICAgICAgICAgICAgICBkYXJrPlxyXG4gICAgICAgICAgICAgICAgICAgICAge2xvYWRpbmcgPyAnxJBhbmcgxJHEg25nIGvDvSAuLi4nIDogJ8SQxINuZyBrw70nfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICB7dmlzaWJsZSAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgPFZpZXc+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8RmFuY3lBbGVydFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlPXt2aXNpYmxlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8Vmlld1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxleDogMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjNENCNzQ4JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiA1MCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICcxMDAlJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRleHQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uIG5hbWU9XCJjaGVja1wiIHNpemU9ezMwfSBjb2xvcj1cIndoaXRlXCI+PC9JY29uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9UZXh0PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvVmlldz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e2JhY2tncm91bmRDb2xvcjogJ3doaXRlJ319PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VmlldyBzdHlsZT17c3R5bGVzLmNvbnRlbnR9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxUZXh0IHN0eWxlPXt7fX0+xJDEg25nIGvDvSB0aMOgbmggY8O0bmcgLi4hPC9UZXh0PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxUb3VjaGFibGVPcGFjaXR5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17c3R5bGVzLmJ0bn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUHJlc3M9eygpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdmlnYXRpb24ubmF2aWdhdGUoJ1NpZ25JblNjcmVlbicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGV4dCBzdHlsZT17c3R5bGVzLmJ0blRleHR9Pk9LPC9UZXh0PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvVG91Y2hhYmxlT3BhY2l0eT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9WaWV3PlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC9GYW5jeUFsZXJ0PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvVmlldz5cclxuICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgPFRvdWNoXHJcbiAgICAgICAgICAgICAgICAgICAgb25QcmVzcz17KCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgbmF2aWdhdGlvbi5uYXZpZ2F0ZSgnU2lnbkluU2NyZWVuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfX0+XHJcbiAgICAgICAgICAgICAgICAgICAgPFZpZXcgc3R5bGU9e3thbGlnbkl0ZW1zOiAnY2VudGVyJywgcGFkZGluZzogMTJ9fT48L1ZpZXc+XHJcbiAgICAgICAgICAgICAgICAgIDwvVG91Y2g+XHJcbiAgICAgICAgICAgICAgICA8L0FuaW1hdGFibGUuVmlldz5cclxuICAgICAgICAgICAgICA8L1JlYWN0LkZyYWdtZW50PlxyXG4gICAgICAgICAgICApfVxyXG4gICAgICAgICAgPC9Gb3JtaWs+XHJcbiAgICAgICAgPC9LZXlib2FyZEF2b2lkaW5nVmlldz5cclxuICAgICAgPC9Ub3VjaGFibGVPcGFjaXR5PlxyXG4gICAgPC9WaWV3PlxyXG4gICk7XHJcbn07XHJcbmNvbnN0IHN0eWxlcyA9IFN0eWxlU2hlZXQuY3JlYXRlKHtcclxuICBhbGVydDoge1xyXG4gICAgYmFja2dyb3VuZENvbG9yOiAnI0VFRUVFRScsXHJcbiAgfSxcclxuICBpY29uOiB7XHJcbiAgICBmbGV4OiAxLFxyXG4gICAgZGlzcGxheTogJ2ZsZXgnLFxyXG4gICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxyXG4gICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXHJcbiAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjQzMyNzJCJyxcclxuICAgIHdpZHRoOiAnMTAwJScsXHJcbiAgfSxcclxuICBjb250ZW50OiB7XHJcbiAgICBkaXNwbGF5OiAnZmxleCcsXHJcbiAgICBmbGV4RGlyZWN0aW9uOiAnY29sdW1uJyxcclxuICAgIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcclxuICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxyXG4gICAgbWFyZ2luVG9wOiAtMTYsXHJcbiAgICBtYXJnaW5Cb3R0b206IDE2LFxyXG4gIH0sXHJcbiAgY29udGVudFRleHQ6IHtcclxuICAgIHRleHRBbGlnbjogJ2NlbnRlcicsXHJcbiAgfSxcclxuICBidG46IHtcclxuICAgIGJvcmRlclJhZGl1czogMzIsXHJcbiAgICBkaXNwbGF5OiAnZmxleCcsXHJcbiAgICBmbGV4RGlyZWN0aW9uOiAncm93JyxcclxuICAgIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcclxuICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxyXG4gICAgcGFkZGluZ0hvcml6b250YWw6IDgsXHJcbiAgICBwYWRkaW5nVmVydGljYWw6IDgsXHJcbiAgICBhbGlnblNlbGY6ICdzdHJldGNoJyxcclxuICAgIGJhY2tncm91bmRDb2xvcjogJyM0Q0I3NDgnLFxyXG4gICAgbWFyZ2luVG9wOiAxNixcclxuICAgIG1pbldpZHRoOiAnNTAlJyxcclxuICAgIHBhZGRpbmdIb3Jpem9udGFsOiAxNixcclxuICB9LFxyXG4gIGJ0blRleHQ6IHtcclxuICAgIGNvbG9yOiAnI0ZGRkZGRicsXHJcbiAgfSxcclxufSk7XHJcbmV4cG9ydCBkZWZhdWx0IFNpZ25JbjtcclxuIl19