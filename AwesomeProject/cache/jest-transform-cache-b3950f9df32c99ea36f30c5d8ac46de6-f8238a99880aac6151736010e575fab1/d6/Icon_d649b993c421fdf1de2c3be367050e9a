b4901ff7c7e88c9dea33754bf802c04e
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.Icon = void 0;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _react = _interopRequireDefault(require("react"));

var _reactNative = require("react-native");

var _color = _interopRequireDefault(require("color"));

var _getIconType = _interopRequireDefault(require("../helpers/getIconType"));

var _getIconStyle = _interopRequireDefault(require("../helpers/getIconStyle"));

var _config = require("../config");

var __rest = this && this.__rest || function (s, e) {
  var t = {};

  for (var p in s) {
    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];
  }

  if (s != null && typeof Object.getOwnPropertySymbols === "function") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];
  }
  return t;
};

var Icon = function Icon(props) {
  var _props$type = props.type,
      type = _props$type === void 0 ? 'material' : _props$type,
      name = props.name,
      _props$size = props.size,
      size = _props$size === void 0 ? 24 : _props$size,
      colorProp = props.color,
      iconStyle = props.iconStyle,
      iconProps = props.iconProps,
      _props$underlayColor = props.underlayColor,
      underlayColor = _props$underlayColor === void 0 ? 'transparent' : _props$underlayColor,
      _props$reverse = props.reverse,
      reverse = _props$reverse === void 0 ? false : _props$reverse,
      _props$raised = props.raised,
      raised = _props$raised === void 0 ? false : _props$raised,
      containerStyle = props.containerStyle,
      reverseColorProp = props.reverseColor,
      _props$disabled = props.disabled,
      disabled = _props$disabled === void 0 ? false : _props$disabled,
      disabledStyle = props.disabledStyle,
      onPress = props.onPress,
      _props$Component = props.Component,
      Component = _props$Component === void 0 ? onPress ? _reactNative.Platform.select({
    android: _reactNative.TouchableNativeFeedback,
    default: _reactNative.TouchableHighlight
  }) : _reactNative.View : _props$Component,
      _props$solid = props.solid,
      solid = _props$solid === void 0 ? false : _props$solid,
      _props$brand = props.brand,
      brand = _props$brand === void 0 ? false : _props$brand,
      theme = props.theme,
      attributes = __rest(props, ["type", "name", "size", "color", "iconStyle", "iconProps", "underlayColor", "reverse", "raised", "containerStyle", "reverseColor", "disabled", "disabledStyle", "onPress", "Component", "solid", "brand", "theme"]);

  var color = colorProp || theme.colors.black;
  var reverseColor = reverseColorProp || theme.colors.white;
  var IconComponent = (0, _getIconType.default)(type);
  var iconSpecificStyle = (0, _getIconStyle.default)(type, {
    solid: solid,
    brand: brand
  });

  var getBackgroundColor = function getBackgroundColor() {
    if (reverse) {
      return color;
    }

    return raised ? theme.colors.white : 'transparent';
  };

  var buttonStyles = {
    borderRadius: size + 4,
    height: size * 2 + 4,
    width: size * 2 + 4
  };

  if (_reactNative.Platform.OS === 'android' && !attributes.background) {
    if (_reactNative.Platform.Version >= 21) {
      attributes.background = _reactNative.TouchableNativeFeedback.Ripple((0, _color.default)(color).alpha(0.2).rgb().string(), true);
    }
  }

  return _react.default.createElement(_reactNative.View, {
    style: _reactNative.StyleSheet.flatten([styles.container, (reverse || raised) && styles.button, (reverse || raised) && buttonStyles, raised && styles.raised, iconStyle && iconStyle.borderRadius ? {
      borderRadius: iconStyle.borderRadius
    } : {}, containerStyle && containerStyle])
  }, _react.default.createElement(Component, (0, _extends2.default)({}, attributes, onPress && {
    onPress: onPress,
    disabled: disabled,
    underlayColor: reverse ? color : underlayColor,
    activeOpacity: 0.3
  }), _react.default.createElement(_reactNative.View, {
    style: _reactNative.StyleSheet.flatten([(reverse || raised) && buttonStyles, {
      backgroundColor: getBackgroundColor(),
      alignItems: 'center',
      justifyContent: 'center'
    }, disabled && styles.disabled, disabled && disabledStyle])
  }, _react.default.createElement(IconComponent, (0, _extends2.default)({
    testID: "iconIcon",
    style: _reactNative.StyleSheet.flatten([{
      backgroundColor: 'transparent'
    }, iconStyle && iconStyle]),
    size: size,
    name: name,
    color: reverse ? reverseColor : color
  }, iconSpecificStyle, iconProps)))));
};

exports.Icon = Icon;

var styles = _reactNative.StyleSheet.create({
  container: {
    overflow: 'hidden'
  },
  button: {
    margin: 7
  },
  raised: Object.assign({}, _reactNative.Platform.select({
    android: {
      elevation: 2
    },
    default: {
      shadowColor: 'rgba(0,0,0, .4)',
      shadowOffset: {
        height: 1,
        width: 1
      },
      shadowOpacity: 1,
      shadowRadius: 1
    }
  })),
  disabled: {
    backgroundColor: '#D1D5D8'
  }
});

var _default = (0, _config.withTheme)(Icon, 'Icon');

exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkljb24uanMiXSwibmFtZXMiOlsiX19yZXN0IiwicyIsImUiLCJ0IiwicCIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImluZGV4T2YiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJpIiwibGVuZ3RoIiwicHJvcGVydHlJc0VudW1lcmFibGUiLCJJY29uIiwicHJvcHMiLCJ0eXBlIiwibmFtZSIsInNpemUiLCJjb2xvclByb3AiLCJjb2xvciIsImljb25TdHlsZSIsImljb25Qcm9wcyIsInVuZGVybGF5Q29sb3IiLCJyZXZlcnNlIiwicmFpc2VkIiwiY29udGFpbmVyU3R5bGUiLCJyZXZlcnNlQ29sb3JQcm9wIiwicmV2ZXJzZUNvbG9yIiwiZGlzYWJsZWQiLCJkaXNhYmxlZFN0eWxlIiwib25QcmVzcyIsIkNvbXBvbmVudCIsIlBsYXRmb3JtIiwic2VsZWN0IiwiYW5kcm9pZCIsIlRvdWNoYWJsZU5hdGl2ZUZlZWRiYWNrIiwiZGVmYXVsdCIsIlRvdWNoYWJsZUhpZ2hsaWdodCIsIlZpZXciLCJzb2xpZCIsImJyYW5kIiwidGhlbWUiLCJhdHRyaWJ1dGVzIiwiY29sb3JzIiwiYmxhY2siLCJ3aGl0ZSIsIkljb25Db21wb25lbnQiLCJpY29uU3BlY2lmaWNTdHlsZSIsImdldEJhY2tncm91bmRDb2xvciIsImJ1dHRvblN0eWxlcyIsImJvcmRlclJhZGl1cyIsImhlaWdodCIsIndpZHRoIiwiT1MiLCJiYWNrZ3JvdW5kIiwiVmVyc2lvbiIsIlJpcHBsZSIsImFscGhhIiwicmdiIiwic3RyaW5nIiwiU3R5bGVTaGVldCIsImZsYXR0ZW4iLCJzdHlsZXMiLCJjb250YWluZXIiLCJidXR0b24iLCJhY3RpdmVPcGFjaXR5IiwiYmFja2dyb3VuZENvbG9yIiwiYWxpZ25JdGVtcyIsImp1c3RpZnlDb250ZW50IiwiY3JlYXRlIiwib3ZlcmZsb3ciLCJtYXJnaW4iLCJhc3NpZ24iLCJlbGV2YXRpb24iLCJzaGFkb3dDb2xvciIs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QixNQUFNLENBQUNvRSxNQUFQLENBQWMsRUFBZCxFQUFrQnhDLHNCQUFTQyxNQUFULENBQWdCO0FBQ3RDQyxJQUFBQSxPQUFPLEVBQUU7QUFDTHVDLE1BQUFBLFNBQVMsRUFBRTtBQUROLEtBRDZCO0FBSXRDckMsSUFBQUEsT0FBTyxFQUFFO0FBQ0xzQyxNQUFBQSxXQUFXLEVBQUUsaUJBRFI7QUFFTEMsTUFBQUEsWUFBWSxFQUFFO0FBQUV4QixRQUFBQSxNQUFNLEVBQUUsQ0FBVjtBQUFhQyxRQUFBQSxLQUFLLEVBQUU7QUFBcEIsT0FGVDtBQUdMd0IsTUFBQUEsYUFBYSxFQUFFLENBSFY7QUFJTEMsTUFBQUEsWUFBWSxFQUFFO0FBSlQ7QUFKNkIsR0FBaEIsQ0FBbEIsQ0FQcUI7QUFrQjdCakQsRUFBQUEsUUFBUSxFQUFFO0FBQ05zQyxJQUFBQSxlQUFlLEVBQUU7QUFEWDtBQWxCbUIsQ0FBbEIsQ0FBZjs7ZUF1QmUsdUJBQVVyRCxJQUFWLEVBQWdCLE1BQWhCLEMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX19yZXN0ID0gKHRoaXMgJiYgdGhpcy5fX3Jlc3QpIHx8IGZ1bmN0aW9uIChzLCBlKSB7XG4gICAgdmFyIHQgPSB7fTtcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcbiAgICAgICAgdFtwXSA9IHNbcF07XG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXG4gICAgICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XG4gICAgICAgIH1cbiAgICByZXR1cm4gdDtcbn07XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgUGxhdGZvcm0sIFRvdWNoYWJsZUhpZ2hsaWdodCwgVmlldywgU3R5bGVTaGVldCwgVG91Y2hhYmxlTmF0aXZlRmVlZGJhY2ssIH0gZnJvbSAncmVhY3QtbmF0aXZlJztcbmltcG9ydCBDb2xvciBmcm9tICdjb2xvcic7XG5pbXBvcnQgZ2V0SWNvblR5cGUgZnJvbSAnLi4vaGVscGVycy9nZXRJY29uVHlwZSc7XG5pbXBvcnQgZ2V0SWNvblN0eWxlIGZyb20gJy4uL2hlbHBlcnMvZ2V0SWNvblN0eWxlJztcbmltcG9ydCB7IHdpdGhUaGVtZSB9IGZyb20gJy4uL2NvbmZpZyc7XG5jb25zdCBJY29uID0gKHByb3BzKSA9PiB7XG4gICAgY29uc3QgeyB0eXBlID0gJ21hdGVyaWFsJywgbmFtZSwgc2l6ZSA9IDI0LCBjb2xvcjogY29sb3JQcm9wLCBpY29uU3R5bGUsIGljb25Qcm9wcywgdW5kZXJsYXlDb2xvciA9ICd0cmFuc3BhcmVudCcsIHJldmVyc2UgPSBmYWxzZSwgcmFpc2VkID0gZmFsc2UsIGNvbnRhaW5lclN0eWxlLCByZXZlcnNlQ29sb3I6IHJldmVyc2VDb2xvclByb3AsIGRpc2FibGVkID0gZmFsc2UsIGRpc2FibGVkU3R5bGUsIG9uUHJlc3MsIENvbXBvbmVudCA9IG9uUHJlc3NcbiAgICAgICAgPyBQbGF0Zm9ybS5zZWxlY3Qoe1xuICAgICAgICAgICAgYW5kcm9pZDogVG91Y2hhYmxlTmF0aXZlRmVlZGJhY2ssXG4gICAgICAgICAgICBkZWZhdWx0OiBUb3VjaGFibGVIaWdobGlnaHQsXG4gICAgICAgIH0pXG4gICAgICAgIDogVmlldywgc29saWQgPSBmYWxzZSwgYnJhbmQgPSBmYWxzZSwgdGhlbWUgfSA9IHByb3BzLCBhdHRyaWJ1dGVzID0gX19yZXN0KHByb3BzLCBbXCJ0eXBlXCIsIFwibmFtZVwiLCBcInNpemVcIiwgXCJjb2xvclwiLCBcImljb25TdHlsZVwiLCBcImljb25Qcm9wc1wiLCBcInVuZGVybGF5Q29sb3JcIiwgXCJyZXZlcnNlXCIsIFwicmFpc2VkXCIsIFwiY29udGFpbmVyU3R5bGVcIiwgXCJyZXZlcnNlQ29sb3JcIiwgXCJkaXNhYmxlZFwiLCBcImRpc2FibGVkU3R5bGVcIiwgXCJvblByZXNzXCIsIFwiQ29tcG9uZW50XCIsIFwic29saWRcIiwgXCJicmFuZFwiLCBcInRoZW1lXCJdKTtcbiAgICBjb25zdCBjb2xvciA9IGNvbG9yUHJvcCB8fCB0aGVtZS5jb2xvcnMuYmxhY2s7XG4gICAgY29uc3QgcmV2ZXJzZUNvbG9yID0gcmV2ZXJzZUNvbG9yUHJvcCB8fCB0aGVtZS5jb2xvcnMud2hpdGU7XG4gICAgY29uc3QgSWNvbkNvbXBvbmVudCA9IGdldEljb25UeXBlKHR5cGUpO1xuICAgIGNvbnN0IGljb25TcGVjaWZpY1N0eWxlID0gZ2V0SWNvblN0eWxlKHR5cGUsIHsgc29saWQsIGJyYW5kIH0pO1xuICAgIGNvbnN0IGdldEJhY2tncm91bmRDb2xvciA9ICgpID0+IHtcbiAgICAgICAgaWYgKHJldmVyc2UpIHtcbiAgICAgICAgICAgIHJldHVybiBjb2xvcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmFpc2VkID8gdGhlbWUuY29sb3JzLndoaXRlIDogJ3RyYW5zcGFyZW50JztcbiAgICB9O1xuICAgIGNvbnN0IGJ1dHRvblN0eWxlcyA9IHtcbiAgICAgICAgYm9yZGVyUmFkaXVzOiBzaXplICsgNCxcbiAgICAgICAgaGVpZ2h0OiBzaXplICogMiArIDQsXG4gICAgICAgIHdpZHRoOiBzaXplICogMiArIDQsXG4gICAgfTtcbiAgICBpZiAoUGxhdGZvcm0uT1MgPT09ICdhbmRyb2lkJyAmJiAhYXR0cmlidXRlcy5iYWNrZ3JvdW5kKSB7XG4gICAgICAgIGlmIChQbGF0Zm9ybS5WZXJzaW9uID49IDIxKSB7XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICBhdHRyaWJ1dGVzLmJhY2tncm91bmQgPSBUb3VjaGFibGVOYXRpdmVGZWVkYmFjay5SaXBwbGUoQ29sb3IoY29sb3IpLmFscGhhKDAuMikucmdiKCkuc3RyaW5nKCksIHRydWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiAoPFZpZXcgc3R5bGU9e1N0eWxlU2hlZXQuZmxhdHRlbihbXG4gICAgICAgIHN0eWxlcy5jb250YWluZXIsXG4gICAgICAgIChyZXZlcnNlIHx8IHJhaXNlZCkgJiYgc3R5bGVzLmJ1dHRvbixcbiAgICAgICAgKHJldmVyc2UgfHwgcmFpc2VkKSAmJiBidXR0b25TdHlsZXMsXG4gICAgICAgIHJhaXNlZCAmJiBzdHlsZXMucmFpc2VkLFxuICAgICAgICBpY29uU3R5bGUgJiYgaWNvblN0eWxlLmJvcmRlclJhZGl1c1xuICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiBpY29uU3R5bGUuYm9yZGVyUmFkaXVzLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB7fSxcbiAgICAgICAgY29udGFpbmVyU3R5bGUgJiYgY29udGFpbmVyU3R5bGUsXG4gICAgXSl9PlxuICAgICAgPENvbXBvbmVudCB7Li4uYXR0cmlidXRlc30gey4uLihvblByZXNzICYmIHtcbiAgICAgICAgb25QcmVzcyxcbiAgICAgICAgZGlzYWJsZWQsXG4gICAgICAgIHVuZGVybGF5Q29sb3I6IHJldmVyc2UgPyBjb2xvciA6IHVuZGVybGF5Q29sb3IsXG4gICAgICAgIGFjdGl2ZU9wYWNpdHk6IDAuMyxcbiAgICB9KX0+XG4gICAgICAgIDxWaWV3IHN0eWxlPXtTdHlsZVNoZWV0LmZsYXR0ZW4oW1xuICAgICAgICAocmV2ZXJzZSB8fCByYWlzZWQpICYmIGJ1dHRvblN0eWxlcyxcbiAgICAgICAge1xuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBnZXRCYWNrZ3JvdW5kQ29sb3IoKSxcbiAgICAgICAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgICAgICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxuICAgICAgICB9LFxuICAgICAgICBkaXNhYmxlZCAmJiBzdHlsZXMuZGlzYWJsZWQsXG4gICAgICAgIGRpc2FibGVkICYmIGRpc2FibGVkU3R5bGUsXG4gICAgXSl9PlxuICAgICAgICAgIDxJY29uQ29tcG9uZW50IHRlc3RJRD1cImljb25JY29uXCIgc3R5bGU9e1N0eWxlU2hlZXQuZmxhdHRlbihbXG4gICAgICAgIHsgYmFja2dyb3VuZENvbG9yOiAndHJhbnNwYXJlbnQnIH0sXG4gICAgICAgIGljb25TdHlsZSAmJiBpY29uU3R5bGUsXG4gICAgXSl9IHNpemU9e3NpemV9IG5hbWU9e25hbWV9IGNvbG9yPXtyZXZlcnNlID8gcmV2ZXJzZUNvbG9yIDogY29sb3J9IHsuLi5pY29uU3BlY2lmaWNTdHlsZX0gey4uLmljb25Qcm9wc30vPlxuICAgICAgICA8L1ZpZXc+XG4gICAgICA8L0NvbXBvbmVudD5cbiAgICA8L1ZpZXc+KTtcbn07XG5jb25zdCBzdHlsZXMgPSBTdHlsZVNoZWV0LmNyZWF0ZSh7XG4gICAgY29udGFpbmVyOiB7XG4gICAgICAgIG92ZXJmbG93OiAnaGlkZGVuJyxcbiAgICB9LFxuICAgIGJ1dHRvbjoge1xuICAgICAgICBtYXJnaW46IDcsXG4gICAgfSxcbiAgICByYWlzZWQ6IE9iamVjdC5hc3NpZ24oe30sIFBsYXRmb3JtLnNlbGVjdCh7XG4gICAgICAgIGFuZHJvaWQ6IHtcbiAgICAgICAgICAgIGVsZXZhdGlvbjogMixcbiAgICAgICAgfSxcbiAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgc2hhZG93Q29sb3I6ICdyZ2JhKDAsMCwwLCAuNCknLFxuICAgICAgICAgICAgc2hhZG93T2Zmc2V0OiB7IGhlaWdodDogMSwgd2lkdGg6IDEgfSxcbiAgICAgICAgICAgIHNoYWRvd09wYWNpdHk6IDEsXG4gICAgICAgICAgICBzaGFkb3dSYWRpdXM6IDEsXG4gICAgICAgIH0sXG4gICAgfSkpLFxuICAgIGRpc2FibGVkOiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNEMUQ1RDgnLFxuICAgIH0sXG59KTtcbmV4cG9ydCB7IEljb24gfTtcbmV4cG9ydCBkZWZhdWx0IHdpdGhUaGVtZShJY29uLCAnSWNvbicpO1xuIl19