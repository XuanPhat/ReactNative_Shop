f6bdc355cf5710a493ddfa7b2799d1f3
"use strict";

var _interopRequireDefault2 = require("@babel/runtime/helpers/interopRequireDefault");

var _toConsumableArray2 = _interopRequireDefault2(require("@babel/runtime/helpers/toConsumableArray"));

var _slicedToArray2 = _interopRequireDefault2(require("@babel/runtime/helpers/slicedToArray"));

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.FABGroup = exports.default = void 0;

var React = _interopRequireWildcard(require("react"));

var _reactNative = require("react-native");

var _color = _interopRequireDefault(require("color"));

var _FABElements = require("./FABElements");

var _Text = _interopRequireDefault(require("../Typography/Text"));

var _Card = _interopRequireDefault(require("../Card/Card"));

var _theming = require("../../core/theming");

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}

function _getRequireWildcardCache() {
  if (typeof WeakMap !== "function") return null;
  var cache = new WeakMap();

  _getRequireWildcardCache = function _getRequireWildcardCache() {
    return cache;
  };

  return cache;
}

function _interopRequireWildcard(obj) {
  if (obj && obj.__esModule) {
    return obj;
  }

  if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
    return {
      default: obj
    };
  }

  var cache = _getRequireWildcardCache();

  if (cache && cache.has(obj)) {
    return cache.get(obj);
  }

  var newObj = {};
  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;

  for (var key in obj) {
    if (Object.prototype.hasOwnProperty.call(obj, key)) {
      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;

      if (desc && (desc.get || desc.set)) {
        Object.defineProperty(newObj, key, desc);
      } else {
        newObj[key] = obj[key];
      }
    }
  }

  newObj.default = obj;

  if (cache) {
    cache.set(obj, newObj);
  }

  return newObj;
}

function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);

  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) symbols = symbols.filter(function (sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    });
    keys.push.apply(keys, symbols);
  }

  return keys;
}

function _objectSpread(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i] != null ? arguments[i] : {};

    if (i % 2) {
      ownKeys(Object(source), true).forEach(function (key) {
        _defineProperty(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys(Object(source)).forEach(function (key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }

  return target;
}

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}

var FABGroup = function FABGroup(_ref) {
  var actions = _ref.actions,
      icon = _ref.icon,
      open = _ref.open,
      _onPress = _ref.onPress,
      accessibilityLabel = _ref.accessibilityLabel,
      theme = _ref.theme,
      style = _ref.style,
      fabStyle = _ref.fabStyle,
      visible = _ref.visible,
      testID = _ref.testID,
      onStateChange = _ref.onStateChange,
      colorProp = _ref.color;

  var _React$useRef = React.useRef(new _reactNative.Animated.Value(0)),
      backdrop = _React$useRef.current;

  var animations = React.useRef(actions.map(function () {
    return new _reactNative.Animated.Value(open ? 1 : 0);
  }));

  var _React$useState = React.useState(null),
      _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 2),
      prevActions = _React$useState2[0],
      setPrevActions = _React$useState2[1];

  var scale = theme.animation.scale;
  React.useEffect(function () {
    if (open) {
      _reactNative.Animated.parallel([_reactNative.Animated.timing(backdrop, {
        toValue: 1,
        duration: 250 * scale,
        useNativeDriver: true
      }), _reactNative.Animated.stagger(50 * scale, animations.current.map(function (animation) {
        return _reactNative.Animated.timing(animation, {
          toValue: 1,
          duration: 150 * scale,
          useNativeDriver: true
        });
      }).reverse())]).start();
    } else {
      _reactNative.Animated.parallel([_reactNative.Animated.timing(backdrop, {
        toValue: 0,
        duration: 200 * scale,
        useNativeDriver: true
      })].concat((0, _toConsumableArray2.default)(animations.current.map(function (animation) {
        return _reactNative.Animated.timing(animation, {
          toValue: 0,
          duration: 150 * scale,
          useNativeDriver: true
        });
      })))).start();
    }
  }, [open, actions, backdrop, scale]);

  var close = function close() {
    return onStateChange({
      open: false
    });
  };

  var toggle = function toggle() {
    return onStateChange({
      open: !open
    });
  };

  var colors = theme.colors;
  var labelColor = theme.dark ? colors.text : (0, _color.default)(colors.text).fade(0.54).rgb().string();
  var backdropOpacity = open ? backdrop.interpolate({
    inputRange: [0, 0.5, 1],
    outputRange: [0, 1, 1]
  }) : backdrop;
  var opacities = animations.current;
  var scales = opacities.map(function (opacity) {
    return open ? opacity.interpolate({
      inputRange: [0, 1],
      outputRange: [0.8, 1]
    }) : 1;
  });

  if (actions.length !== (prevActions === null || prevActions === void 0 ? void 0 : prevActions.length)) {
    animations.current = actions.map(function (_, i) {
      return animations.current[i] || new _reactNative.Animated.Value(open ? 1 : 0);
    });
    setPrevActions(actions);
  }

  return React.createElement(_reactNative.View, {
    pointerEvents: "box-none",
    style: [styles.container, style]
  }, React.createElement(_reactNative.TouchableWithoutFeedback, {
    onPress: close
  }, React.createElement(_reactNative.Animated.View, {
    pointerEvents: open ? 'auto' : 'none',
    style: [styles.backdrop, {
      opacity: backdropOpacity,
      backgroundColor: colors.backdrop
    }]
  })), React.createElement(_reactNative.SafeAreaView, {
    pointerEvents: "box-none",
    style: styles.safeArea
  }, React.createElement(_reactNative.View, {
    pointerEvents: open ? 'box-none' : 'none'
  }, actions.map(function (it, i) {
    return React.createElement(_reactNative.View, {
      key: i,
      style: styles.item,
      pointerEvents: open ? 'box-none' : 'none'
    }, it.label && React.createElement(_Card.default, {
      style: [styles.label, {
        transform: [{
          scale: scales[i]
        }],
        opacity: opacities[i]
      }],
      onPress: function onPress() {
        it.onPress();
        close();
      },
      accessibilityLabel: it.accessibilityLabel !== 'undefined' ? it.accessibilityLabel : it.label,
      accessibilityTraits: "button",
      accessibilityComponentType: "button",
      accessibilityRole: "button"
    }, React.createElement(_Text.default, {
      style: {
        color: labelColor
      }
    }, it.label)), React.createElement(_FABElements.FAB, {
      small: true,
      icon: it.icon,
      color: it.color,
      style: [{
        transform: [{
          scale: scales[i]
        }],
        opacity: opacities[i],
        backgroundColor: theme.colors.surface
      }, it.style],
      onPress: function onPress() {
        it.onPress();
        close();
      },
      accessibilityLabel: typeof it.accessibilityLabel !== 'undefined' ? it.accessibilityLabel : it.label,
      accessibilityTraits: "button",
      accessibilityComponentType: "button",
      accessibilityRole: "button",
      testID: it.testID,
      visible: open
    }));
  })), React.createElement(_FABElements.FAB, {
    onPress: function onPress() {
      _onPress === null || _onPress === void 0 ? void 0 : _onPress();
      toggle();
    },
    icon: icon,
    color: colorProp,
    accessibilityLabel: accessibilityLabel,
    accessibilityTraits: "button",
    accessibilityComponentType: "button",
    accessibilityRole: "button",
    accessibilityState: {
      expanded: open
    },
    style: [styles.fab, fabStyle],
    visible: visible,
    testID: testID
  })));
};

FABGroup.displayName = 'FAB.Group';

var _default = (0, _theming.withTheme)(FABGroup);

exports.default = _default;
var FABGroupWithTheme = (0, _theming.withTheme)(FABGroup);
exports.FABGroup = FABGroupWithTheme;

var styles = _reactNative.StyleSheet.create({
  safeArea: {
    alignItems: 'flex-end'
  },
  container: _objectSpread(_objectSpread({}, _reactNative.StyleSheet.absoluteFillObject), {}, {
    justifyContent: 'flex-end'
  }),
  fab: {
    marginHorizontal: 16,
    marginBottom: 16,
    marginTop: 0
  },
  backdrop: _objectSpread({}, _reactNative.StyleSheet.absoluteFillObject),
  label: {
    borderRadius: 5,
    paddingHorizontal: 12,
    paddingVertical: 6,
    marginVertical: 8,
    marginHorizontal: 16,
    elevation: 2
  },
  item: {
    marginHorizontal: 24,
    marginBottom: 16,
    flexDirection: 'row',
    justifyContent: 'flex-end',
    alignItems: 'center'
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkZBQkdyb3VwLnRzeCJdLCJuYW1lcyI6WyJGQUJHcm91cCIsIm9uUHJlc3MiLCJjb2xvciIsImNvbG9yUHJvcCIsImN1cnJlbnQiLCJiYWNrZHJvcCIsIlJlYWN0IiwiQW5pbWF0ZWQiLCJhbmltYXRpb25zIiwiYWN0aW9ucyIsIm9wZW4iLCJzY2FsZSIsInRoZW1lIiwidG9WYWx1ZSIsImR1cmF0aW9uIiwidXNlTmF0aXZlRHJpdmVyIiwiYW5pbWF0aW9uIiwiY2xvc2UiLCJvblN0YXRlQ2hhbmdlIiwidG9nZ2xlIiwiY29sb3JzIiwibGFiZWxDb2xvciIsImJhY2tkcm9wT3BhY2l0eSIsImlucHV0UmFuZ2UiLCJvdXRwdXRSYW5nZSIsIm9wYWNpdGllcyIsInNjYWxlcyIsIm9wYWNpdHkiLCJwcmV2QWN0aW9ucyIsInNldFByZXZBY3Rpb25zIiwic3R5bGVzIiwiYmFja2dyb3VuZENvbG9yIiwic2FmZUFyZWEiLCJpdCIsInRyYW5zZm9ybSIsInN1cmZhY2UiLCJleHBhbmRlZCIsInRlc3RJRCIsIkZBQkdyb3VwV2l0aFRoZW1lIiwiYWxpZ25JdGVtcyIsImNvbnRhaW5lciIsIlN0eWxlU2hlZXQiLCJqdXN0aWZ5Q29udGVudCIsImZhYiIsIm1hcmdpbkhvcml6b250YWwiLCJtYXJnaW5Cb3R0b20iLCJtYXJnaW5Ub3AiLCJsYWJlbCIsImJvcmRlclJhZGl1cyIsInBhZGRpbmdIb3Jpem9udGFsIiwicGFkZGluZ1ZlcnRpY2FsIiwibWFyZ2luVmVydGljYWwiLCJlbGV2YXRpb24iLCJpdGVtIiwiZmxleERpcmVjdGlvbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFBLElBQUEsS0FBQSxHQUFBLHVCQUFBLENBQUEsT0FBQSxDQUFBLE9BQUEsQ0FBQSxDQUFBOztBQUNBLElBQUEsWUFBQSxHQUFBLE9BQUEsQ0FBQSxjQUFBLENBQUE7O0FBU0EsSUFBQSxNQUFBLEdBQUEsc0JBQUEsQ0FBQSxPQUFBLENBQUEsT0FBQSxDQUFBLENBQUE7O0FBQ0Es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QUEsYUFBYSxFQUhULEtBQUE7QUFJSlosSUFBQUEsY0FBYyxFQUpWLFVBQUE7QUFLSkgsSUFBQUEsVUFBVSxFQUFFO0FBTFI7QUF4QnlCLENBQWxCLENBQWYiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQge1xuICBTdHlsZVByb3AsXG4gIFN0eWxlU2hlZXQsXG4gIEFuaW1hdGVkLFxuICBTYWZlQXJlYVZpZXcsXG4gIFRvdWNoYWJsZVdpdGhvdXRGZWVkYmFjayxcbiAgVmlldyxcbiAgVmlld1N0eWxlLFxufSBmcm9tICdyZWFjdC1uYXRpdmUnO1xuaW1wb3J0IGNvbG9yIGZyb20gJ2NvbG9yJztcbmltcG9ydCB7IEZBQiB9IGZyb20gJy4vRkFCRWxlbWVudHMnO1xuaW1wb3J0IFRleHQgZnJvbSAnLi4vVHlwb2dyYXBoeS9UZXh0JztcbmltcG9ydCBDYXJkIGZyb20gJy4uL0NhcmQvQ2FyZCc7XG5pbXBvcnQgeyB3aXRoVGhlbWUgfSBmcm9tICcuLi8uLi9jb3JlL3RoZW1pbmcnO1xuaW1wb3J0IHR5cGUgeyBJY29uU291cmNlIH0gZnJvbSAnLi4vSWNvbic7XG5cbnR5cGUgUHJvcHMgPSB7XG4gIC8qKlxuICAgKiBBY3Rpb24gaXRlbXMgdG8gZGlzcGxheSBpbiB0aGUgZm9ybSBvZiBhIHNwZWVkIGRpYWwuXG4gICAqIEFuIGFjdGlvbiBpdGVtIHNob3VsZCBjb250YWluIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAgICogLSBgaWNvbmA6IGljb24gdG8gZGlzcGxheSAocmVxdWlyZWQpXG4gICAqIC0gYGxhYmVsYDogb3B0aW9uYWwgbGFiZWwgdGV4dFxuICAgKiAtIGBhY2Nlc3NpYmlsaXR5TGFiZWxgOiBhY2Nlc3NpYmlsaXR5IGxhYmVsIGZvciB0aGUgYWN0aW9uLCB1c2VzIGxhYmVsIGJ5IGRlZmF1bHQgaWYgc3BlY2lmaWVkXG4gICAqIC0gYGNvbG9yYDogY3VzdG9tIGljb24gY29sb3Igb2YgdGhlIGFjdGlvbiBpdGVtXG4gICAqIC0gYHN0eWxlYDogcGFzcyBhZGRpdGlvbmFsIHN0eWxlcyBmb3IgdGhlIGZhYiBpdGVtLCBmb3IgZXhhbXBsZSwgYGJhY2tncm91bmRDb2xvcmBcbiAgICogLSBgb25QcmVzc2A6IGNhbGxiYWNrIHRoYXQgaXMgY2FsbGVkIHdoZW4gYEZBQmAgaXMgcHJlc3NlZCAocmVxdWlyZWQpXG4gICAqL1xuICBhY3Rpb25zOiBBcnJheTx7XG4gICAgaWNvbjogSWNvblNvdXJjZTtcbiAgICBsYWJlbD86IHN0cmluZztcbiAgICBjb2xvcj86IHN0cmluZztcbiAgICBhY2Nlc3NpYmlsaXR5TGFiZWw/OiBzdHJpbmc7XG4gICAgc3R5bGU/OiBTdHlsZVByb3A8Vmlld1N0eWxlPjtcbiAgICBvblByZXNzOiAoKSA9PiB2b2lkO1xuICAgIHRlc3RJRD86IHN0cmluZztcbiAgfT47XG4gIC8qKlxuICAgKiBJY29uIHRvIGRpc3BsYXkgZm9yIHRoZSBgRkFCYC5cbiAgICogWW91IGNhbiB0b2dnbGUgaXQgYmFzZWQgb24gd2hldGhlciB0aGUgc3BlZWQgZGlhbCBpcyBvcGVuIHRvIGRpc3BsYXkgYSBkaWZmZXJlbnQgaWNvbi5cbiAgICovXG4gIGljb246IEljb25Tb3VyY2U7XG4gIC8qKlxuICAgKiBBY2Nlc3NpYmlsaXR5IGxhYmVsIGZvciB0aGUgRkFCLiBUaGlzIGlzIHJlYWQgYnkgdGhlIHNjcmVlbiByZWFkZXIgd2hlbiB0aGUgdXNlciB0YXBzIHRoZSBGQUIuXG4gICAqL1xuICBhY2Nlc3NpYmlsaXR5TGFiZWw/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBDdXN0b20gY29sb3IgZm9yIHRoZSBgRkFCYC5cbiAgICovXG4gIGNvbG9yPzogc3RyaW5nO1xuICAvKipcbiAgICogRnVuY3Rpb24gdG8gZXhlY3V0ZSBvbiBwcmVzc2luZyB0aGUgYEZBQmAuXG4gICAqL1xuICBvblByZXNzPzogKCkgPT4gdm9pZDtcbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIHNwZWVkIGRpYWwgaXMgb3Blbi5cbiAgICovXG4gIG9wZW46IGJvb2xlYW47XG4gIC8qKlxuICAgKiBDYWxsYmFjayB3aGljaCBpcyBjYWxsZWQgb24gb3BlbmluZyBhbmQgY2xvc2luZyB0aGUgc3BlZWQgZGlhbC5cbiAgICogVGhlIG9wZW4gc3RhdGUgbmVlZHMgdG8gYmUgdXBkYXRlZCB3aGVuIGl0J3MgY2FsbGVkLCBvdGhlcndpc2UgdGhlIGNoYW5nZSBpcyBkcm9wcGVkLlxuICAgKi9cbiAgb25TdGF0ZUNoYW5nZTogKHN0YXRlOiB7IG9wZW46IGJvb2xlYW4gfSkgPT4gdm9pZDtcbiAgLyoqXG4gICAqIFdoZXRoZXIgYEZBQmAgaXMgY3VycmVudGx5IHZpc2libGUuXG4gICAqL1xuICB2aXNpYmxlOiBib29sZWFuO1xuICAvKipcbiAgICogU3R5bGUgZm9yIHRoZSBncm91cC4gWW91IGNhbiB1c2UgaXQgdG8gcGFzcyBhZGRpdGlvbmFsIHN0eWxlcyBpZiB5b3UgbmVlZC5cbiAgICogRm9yIGV4YW1wbGUsIHlvdSBjYW4gc2V0IGFuIGFkZGl0aW9uYWwgcGFkZGluZyBpZiB5b3UgaGF2ZSBhIHRhYiBiYXIgYXQgdGhlIGJvdHRvbS5cbiAgICovXG4gIHN0eWxlPzogU3R5bGVQcm9wPFZpZXdTdHlsZT47XG4gIC8qKlxuICAgKiBTdHlsZSBmb3IgdGhlIEZBQi4gSXQgYWxsb3dzIHRvIHBhc3MgdGhlIEZBQiBidXR0b24gc3R5bGVzLCBzdWNoIGFzIGJhY2tncm91bmRDb2xvci5cbiAgICovXG4gIGZhYlN0eWxlPzogU3R5bGVQcm9wPFZpZXdTdHlsZT47XG4gIC8qKlxuICAgKiBAb3B0aW9uYWxcbiAgICovXG4gIHRoZW1lOiBSZWFjdE5hdGl2ZVBhcGVyLlRoZW1lO1xuICAvKipcbiAgICogUGFzcyBkb3duIHRlc3RJRCBmcm9tIEdyb3VwIHByb3BzIHRvIEZBQi5cbiAgICovXG4gIHRlc3RJRD86IHN0cmluZztcbn07XG5cbi8qKlxuICogQSBjb21wb25lbnQgdG8gZGlzcGxheSBhIHN0YWNrIG9mIEZBQnMgd2l0aCByZWxhdGVkIGFjdGlvbnMgaW4gYSBzcGVlZCBkaWFsLlxuICogVG8gcmVuZGVyIHRoZSBncm91cCBhYm92ZSBvdGhlciBjb21wb25lbnRzLCB5b3UnbGwgbmVlZCB0byB3cmFwIGl0IHdpdGggdGhlIFtgUG9ydGFsYF0ocG9ydGFsLmh0bWwpIGNvbXBvbmVudC5cbiAqXG4gKiA8ZGl2IGNsYXNzPVwic2NyZWVuc2hvdHNcIj5cbiAqICAgPGltZyBzcmM9XCJzY3JlZW5zaG90cy9mYWItZ3JvdXAucG5nXCIgLz5cbiAqIDwvZGl2PlxuICpcbiAqICMjIFVzYWdlXG4gKiBgYGBqc1xuICogaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuICogaW1wb3J0IHsgRkFCLCBQb3J0YWwsIFByb3ZpZGVyIH0gZnJvbSAncmVhY3QtbmF0aXZlLXBhcGVyJztcbiAqXG4gKiBjb25zdCBNeUNvbXBvbmVudCA9ICgpID0+IHtcbiAqICAgY29uc3QgW3N0YXRlLCBzZXRTdGF0ZV0gPSBSZWFjdC51c2VTdGF0ZSh7IG9wZW46IGZhbHNlIH0pO1xuICpcbiAqICAgY29uc3Qgb25TdGF0ZUNoYW5nZSA9ICh7IG9wZW4gfSkgPT4gc2V0U3RhdGUoeyBvcGVuIH0pO1xuICpcbiAqICAgY29uc3QgeyBvcGVuIH0gPSBzdGF0ZTtcbiAqXG4gKiAgIHJldHVybiAoXG4gKiAgICAgPFByb3ZpZGVyPlxuICogICAgICAgPFBvcnRhbD5cbiAqICAgICAgICAgPEZBQi5Hcm91cFxuICogICAgICAgICAgIG9wZW49e29wZW59XG4gKiAgICAgICAgICAgaWNvbj17b3BlbiA/ICdjYWxlbmRhci10b2RheScgOiAncGx1cyd9XG4gKiAgICAgICAgICAgYWN0aW9ucz17W1xuICogICAgICAgICAgICAgeyBpY29uOiAncGx1cycsIG9uUHJlc3M6ICgpID0+IGNvbnNvbGUubG9nKCdQcmVzc2VkIGFkZCcpIH0sXG4gKiAgICAgICAgICAgICB7XG4gKiAgICAgICAgICAgICAgIGljb246ICdzdGFyJyxcbiAqICAgICAgICAgICAgICAgbGFiZWw6ICdTdGFyJyxcbiAqICAgICAgICAgICAgICAgb25QcmVzczogKCkgPT4gY29uc29sZS5sb2coJ1ByZXNzZWQgc3RhcicpLFxuICogICAgICAgICAgICAgfSxcbiAqICAgICAgICAgICAgIHtcbiAqICAgICAgICAgICAgICAgaWNvbjogJ2VtYWlsJyxcbiAqICAgICAgICAgICAgICAgbGFiZWw6ICdFbWFpbCcsXG4gKiAgICAgICAgICAgICAgIG9uUHJlc3M6ICgpID0+IGNvbnNvbGUubG9nKCdQcmVzc2VkIGVtYWlsJyksXG4gKiAgICAgICAgICAgICB9LFxuICogICAgICAgICAgICAge1xuICogICAgICAgICAgICAgICBpY29uOiAnYmVsbCcsXG4gKiAgICAgICAgICAgICAgIGxhYmVsOiAnUmVtaW5kJyxcbiAqICAgICAgICAgICAgICAgb25QcmVzczogKCkgPT4gY29uc29sZS5sb2coJ1ByZXNzZWQgbm90aWZpY2F0aW9ucycpLFxuICogICAgICAgICAgICAgfSxcbiAqICAgICAgICAgICBdfVxuICogICAgICAgICAgIG9uU3RhdGVDaGFuZ2U9e29uU3RhdGVDaGFuZ2V9XG4gKiAgICAgICAgICAgb25QcmVzcz17KCkgPT4ge1xuICogICAgICAgICAgICAgaWYgKG9wZW4pIHtcbiAqICAgICAgICAgICAgICAgLy8gZG8gc29tZXRoaW5nIGlmIHRoZSBzcGVlZCBkaWFsIGlzIG9wZW5cbiAqICAgICAgICAgICAgIH1cbiAqICAgICAgICAgICB9fVxuICogICAgICAgICAvPlxuICogICAgICAgPC9Qb3J0YWw+XG4gKiAgICAgPC9Qcm92aWRlcj5cbiAqICAgKTtcbiAqIH07XG4gKlxuICogZXhwb3J0IGRlZmF1bHQgTXlDb21wb25lbnQ7XG4gKiBgYGBcbiAqL1xuY29uc3QgRkFCR3JvdXAgPSAoe1xuICBhY3Rpb25zLFxuICBpY29uLFxuICBvcGVuLFxuICBvblByZXNzLFxuICBhY2Nlc3NpYmlsaXR5TGFiZWwsXG4gIHRoZW1lLFxuICBzdHlsZSxcbiAgZmFiU3R5bGUsXG4gIHZpc2libGUsXG4gIHRlc3RJRCxcbiAgb25TdGF0ZUNoYW5nZSxcbiAgY29sb3I6IGNvbG9yUHJvcCxcbn06IFByb3BzKSA9PiB7XG4gIGNvbnN0IHsgY3VycmVudDogYmFja2Ryb3AgfSA9IFJlYWN0LnVzZVJlZjxBbmltYXRlZC5WYWx1ZT4oXG4gICAgbmV3IEFuaW1hdGVkLlZhbHVlKDApXG4gICk7XG4gIGNvbnN0IGFuaW1hdGlvbnMgPSBSZWFjdC51c2VSZWY8QW5pbWF0ZWQuVmFsdWVbXT4oXG4gICAgYWN0aW9ucy5tYXAoKCkgPT4gbmV3IEFuaW1hdGVkLlZhbHVlKG9wZW4gPyAxIDogMCkpXG4gICk7XG5cbiAgY29uc3QgW3ByZXZBY3Rpb25zLCBzZXRQcmV2QWN0aW9uc10gPSBSZWFjdC51c2VTdGF0ZTxcbiAgICB8IHtcbiAgICAgICAgaWNvbjogSWNvblNvdXJjZTtcbiAgICAgICAgbGFiZWw/OiBzdHJpbmc7XG4gICAgICAgIGNvbG9yPzogc3RyaW5nO1xuICAgICAgICBhY2Nlc3NpYmlsaXR5TGFiZWw/OiBzdHJpbmc7XG4gICAgICAgIHN0eWxlPzogU3R5bGVQcm9wPFZpZXdTdHlsZT47XG4gICAgICAgIG9uUHJlc3M6ICgpID0+IHZvaWQ7XG4gICAgICAgIHRlc3RJRD86IHN0cmluZztcbiAgICAgIH1bXVxuICAgIHwgbnVsbFxuICA+KG51bGwpO1xuXG4gIGNvbnN0IHsgc2NhbGUgfSA9IHRoZW1lLmFuaW1hdGlvbjtcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChvcGVuKSB7XG4gICAgICBBbmltYXRlZC5wYXJhbGxlbChbXG4gICAgICAgIEFuaW1hdGVkLnRpbWluZyhiYWNrZHJvcCwge1xuICAgICAgICAgIHRvVmFsdWU6IDEsXG4gICAgICAgICAgZHVyYXRpb246IDI1MCAqIHNjYWxlLFxuICAgICAgICAgIHVzZU5hdGl2ZURyaXZlcjogdHJ1ZSxcbiAgICAgICAgfSksXG4gICAgICAgIEFuaW1hdGVkLnN0YWdnZXIoXG4gICAgICAgICAgNTAgKiBzY2FsZSxcbiAgICAgICAgICBhbmltYXRpb25zLmN1cnJlbnRcbiAgICAgICAgICAgIC5tYXAoKGFuaW1hdGlvbikgPT5cbiAgICAgICAgICAgICAgQW5pbWF0ZWQudGltaW5nKGFuaW1hdGlvbiwge1xuICAgICAgICAgICAgICAgIHRvVmFsdWU6IDEsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDE1MCAqIHNjYWxlLFxuICAgICAgICAgICAgICAgIHVzZU5hdGl2ZURyaXZlcjogdHJ1ZSxcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIC5yZXZlcnNlKClcbiAgICAgICAgKSxcbiAgICAgIF0pLnN0YXJ0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIEFuaW1hdGVkLnBhcmFsbGVsKFtcbiAgICAgICAgQW5pbWF0ZWQudGltaW5nKGJhY2tkcm9wLCB7XG4gICAgICAgICAgdG9WYWx1ZTogMCxcbiAgICAgICAgICBkdXJhdGlvbjogMjAwICogc2NhbGUsXG4gICAgICAgICAgdXNlTmF0aXZlRHJpdmVyOiB0cnVlLFxuICAgICAgICB9KSxcbiAgICAgICAgLi4uYW5pbWF0aW9ucy5jdXJyZW50Lm1hcCgoYW5pbWF0aW9uKSA9PlxuICAgICAgICAgIEFuaW1hdGVkLnRpbWluZyhhbmltYXRpb24sIHtcbiAgICAgICAgICAgIHRvVmFsdWU6IDAsXG4gICAgICAgICAgICBkdXJhdGlvbjogMTUwICogc2NhbGUsXG4gICAgICAgICAgICB1c2VOYXRpdmVEcml2ZXI6IHRydWUsXG4gICAgICAgICAgfSlcbiAgICAgICAgKSxcbiAgICAgIF0pLnN0YXJ0KCk7XG4gICAgfVxuICB9LCBbb3BlbiwgYWN0aW9ucywgYmFja2Ryb3AsIHNjYWxlXSk7XG5cbiAgY29uc3QgY2xvc2UgPSAoKSA9PiBvblN0YXRlQ2hhbmdlKHsgb3BlbjogZmFsc2UgfSk7XG5cbiAgY29uc3QgdG9nZ2xlID0gKCkgPT4gb25TdGF0ZUNoYW5nZSh7IG9wZW46ICFvcGVuIH0pO1xuXG4gIGNvbnN0IHsgY29sb3JzIH0gPSB0aGVtZTtcblxuICBjb25zdCBsYWJlbENvbG9yID0gdGhlbWUuZGFya1xuICAgID8gY29sb3JzLnRleHRcbiAgICA6IGNvbG9yKGNvbG9ycy50ZXh0KS5mYWRlKDAuNTQpLnJnYigpLnN0cmluZygpO1xuICBjb25zdCBiYWNrZHJvcE9wYWNpdHkgPSBvcGVuXG4gICAgPyBiYWNrZHJvcC5pbnRlcnBvbGF0ZSh7XG4gICAgICAgIGlucHV0UmFuZ2U6IFswLCAwLjUsIDFdLFxuICAgICAgICBvdXRwdXRSYW5nZTogWzAsIDEsIDFdLFxuICAgICAgfSlcbiAgICA6IGJhY2tkcm9wO1xuXG4gIGNvbnN0IG9wYWNpdGllcyA9IGFuaW1hdGlvbnMuY3VycmVudDtcbiAgY29uc3Qgc2NhbGVzID0gb3BhY2l0aWVzLm1hcCgob3BhY2l0eSkgPT5cbiAgICBvcGVuXG4gICAgICA/IG9wYWNpdHkuaW50ZXJwb2xhdGUoe1xuICAgICAgICAgIGlucHV0UmFuZ2U6IFswLCAxXSxcbiAgICAgICAgICBvdXRwdXRSYW5nZTogWzAuOCwgMV0sXG4gICAgICAgIH0pXG4gICAgICA6IDFcbiAgKTtcblxuICBpZiAoYWN0aW9ucy5sZW5ndGggIT09IHByZXZBY3Rpb25zPy5sZW5ndGgpIHtcbiAgICBhbmltYXRpb25zLmN1cnJlbnQgPSBhY3Rpb25zLm1hcChcbiAgICAgIChfLCBpKSA9PiBhbmltYXRpb25zLmN1cnJlbnRbaV0gfHwgbmV3IEFuaW1hdGVkLlZhbHVlKG9wZW4gPyAxIDogMClcbiAgICApO1xuICAgIHNldFByZXZBY3Rpb25zKGFjdGlvbnMpO1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8VmlldyBwb2ludGVyRXZlbnRzPVwiYm94LW5vbmVcIiBzdHlsZT17W3N0eWxlcy5jb250YWluZXIsIHN0eWxlXX0+XG4gICAgICA8VG91Y2hhYmxlV2l0aG91dEZlZWRiYWNrIG9uUHJlc3M9e2Nsb3NlfT5cbiAgICAgICAgPEFuaW1hdGVkLlZpZXdcbiAgICAgICAgICBwb2ludGVyRXZlbnRzPXtvcGVuID8gJ2F1dG8nIDogJ25vbmUnfVxuICAgICAgICAgIHN0eWxlPXtbXG4gICAgICAgICAgICBzdHlsZXMuYmFja2Ryb3AsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIG9wYWNpdHk6IGJhY2tkcm9wT3BhY2l0eSxcbiAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBjb2xvcnMuYmFja2Ryb3AsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF19XG4gICAgICAgIC8+XG4gICAgICA8L1RvdWNoYWJsZVdpdGhvdXRGZWVkYmFjaz5cbiAgICAgIDxTYWZlQXJlYVZpZXcgcG9pbnRlckV2ZW50cz1cImJveC1ub25lXCIgc3R5bGU9e3N0eWxlcy5zYWZlQXJlYX0+XG4gICAgICAgIDxWaWV3IHBvaW50ZXJFdmVudHM9e29wZW4gPyAnYm94LW5vbmUnIDogJ25vbmUnfT5cbiAgICAgICAgICB7YWN0aW9ucy5tYXAoKGl0LCBpKSA9PiAoXG4gICAgICAgICAgICA8Vmlld1xuICAgICAgICAgICAgICBrZXk9e2l9IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgcmVhY3Qvbm8tYXJyYXktaW5kZXgta2V5XG4gICAgICAgICAgICAgIHN0eWxlPXtzdHlsZXMuaXRlbX1cbiAgICAgICAgICAgICAgcG9pbnRlckV2ZW50cz17b3BlbiA/ICdib3gtbm9uZScgOiAnbm9uZSd9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHtpdC5sYWJlbCAmJiAoXG4gICAgICAgICAgICAgICAgPENhcmRcbiAgICAgICAgICAgICAgICAgIHN0eWxlPXtcbiAgICAgICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAgIHN0eWxlcy5sYWJlbCxcbiAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IFt7IHNjYWxlOiBzY2FsZXNbaV0gfV0sXG4gICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiBvcGFjaXRpZXNbaV0sXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgXSBhcyBTdHlsZVByb3A8Vmlld1N0eWxlPlxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgb25QcmVzcz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpdC5vblByZXNzKCk7XG4gICAgICAgICAgICAgICAgICAgIGNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgYWNjZXNzaWJpbGl0eUxhYmVsPXtcbiAgICAgICAgICAgICAgICAgICAgaXQuYWNjZXNzaWJpbGl0eUxhYmVsICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICAgICAgICAgICAgICAgID8gaXQuYWNjZXNzaWJpbGl0eUxhYmVsXG4gICAgICAgICAgICAgICAgICAgICAgOiBpdC5sYWJlbFxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgYWNjZXNzaWJpbGl0eVRyYWl0cz1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICBhY2Nlc3NpYmlsaXR5Q29tcG9uZW50VHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICBhY2Nlc3NpYmlsaXR5Um9sZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPFRleHQgc3R5bGU9e3sgY29sb3I6IGxhYmVsQ29sb3IgfX0+e2l0LmxhYmVsfTwvVGV4dD5cbiAgICAgICAgICAgICAgICA8L0NhcmQ+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDxGQUJcbiAgICAgICAgICAgICAgICBzbWFsbFxuICAgICAgICAgICAgICAgIGljb249e2l0Lmljb259XG4gICAgICAgICAgICAgICAgY29sb3I9e2l0LmNvbG9yfVxuICAgICAgICAgICAgICAgIHN0eWxlPXtcbiAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogW3sgc2NhbGU6IHNjYWxlc1tpXSB9XSxcbiAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiBvcGFjaXRpZXNbaV0sXG4gICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiB0aGVtZS5jb2xvcnMuc3VyZmFjZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgaXQuc3R5bGUsXG4gICAgICAgICAgICAgICAgICBdIGFzIFN0eWxlUHJvcDxWaWV3U3R5bGU+XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG9uUHJlc3M9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgIGl0Lm9uUHJlc3MoKTtcbiAgICAgICAgICAgICAgICAgIGNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICBhY2Nlc3NpYmlsaXR5TGFiZWw9e1xuICAgICAgICAgICAgICAgICAgdHlwZW9mIGl0LmFjY2Vzc2liaWxpdHlMYWJlbCAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgICAgICAgICAgPyBpdC5hY2Nlc3NpYmlsaXR5TGFiZWxcbiAgICAgICAgICAgICAgICAgICAgOiBpdC5sYWJlbFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhY2Nlc3NpYmlsaXR5VHJhaXRzPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICBhY2Nlc3NpYmlsaXR5Q29tcG9uZW50VHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgYWNjZXNzaWJpbGl0eVJvbGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgIHRlc3RJRD17aXQudGVzdElEfVxuICAgICAgICAgICAgICAgIHZpc2libGU9e29wZW59XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L1ZpZXc+XG4gICAgICAgICAgKSl9XG4gICAgICAgIDwvVmlldz5cbiAgICAgICAgPEZBQlxuICAgICAgICAgIG9uUHJlc3M9eygpID0+IHtcbiAgICAgICAgICAgIG9uUHJlc3M/LigpO1xuICAgICAgICAgICAgdG9nZ2xlKCk7XG4gICAgICAgICAgfX1cbiAgICAgICAgICBpY29uPXtpY29ufVxuICAgICAgICAgIGNvbG9yPXtjb2xvclByb3B9XG4gICAgICAgICAgYWNjZXNzaWJpbGl0eUxhYmVsPXthY2Nlc3NpYmlsaXR5TGFiZWx9XG4gICAgICAgICAgYWNjZXNzaWJpbGl0eVRyYWl0cz1cImJ1dHRvblwiXG4gICAgICAgICAgYWNjZXNzaWJpbGl0eUNvbXBvbmVudFR5cGU9XCJidXR0b25cIlxuICAgICAgICAgIGFjY2Vzc2liaWxpdHlSb2xlPVwiYnV0dG9uXCJcbiAgICAgICAgICBhY2Nlc3NpYmlsaXR5U3RhdGU9e3sgZXhwYW5kZWQ6IG9wZW4gfX1cbiAgICAgICAgICBzdHlsZT17W3N0eWxlcy5mYWIsIGZhYlN0eWxlXX1cbiAgICAgICAgICB2aXNpYmxlPXt2aXNpYmxlfVxuICAgICAgICAgIHRlc3RJRD17dGVzdElEfVxuICAgICAgICAvPlxuICAgICAgPC9TYWZlQXJlYVZpZXc+XG4gICAgPC9WaWV3PlxuICApO1xufTtcblxuRkFCR3JvdXAuZGlzcGxheU5hbWUgPSAnRkFCLkdyb3VwJztcblxuZXhwb3J0IGRlZmF1bHQgd2l0aFRoZW1lKEZBQkdyb3VwKTtcblxuLy8gQGNvbXBvbmVudC1kb2NzIGlnbm9yZS1uZXh0LWxpbmVcbmNvbnN0IEZBQkdyb3VwV2l0aFRoZW1lID0gd2l0aFRoZW1lKEZBQkdyb3VwKTtcbi8vIEBjb21wb25lbnQtZG9jcyBpZ25vcmUtbmV4dC1saW5lXG5leHBvcnQgeyBGQUJHcm91cFdpdGhUaGVtZSBhcyBGQUJHcm91cCB9O1xuXG5jb25zdCBzdHlsZXMgPSBTdHlsZVNoZWV0LmNyZWF0ZSh7XG4gIHNhZmVBcmVhOiB7XG4gICAgYWxpZ25JdGVtczogJ2ZsZXgtZW5kJyxcbiAgfSxcbiAgY29udGFpbmVyOiB7XG4gICAgLi4uU3R5bGVTaGVldC5hYnNvbHV0ZUZpbGxPYmplY3QsXG4gICAganVzdGlmeUNvbnRlbnQ6ICdmbGV4LWVuZCcsXG4gIH0sXG4gIGZhYjoge1xuICAgIG1hcmdpbkhvcml6b250YWw6IDE2LFxuICAgIG1hcmdpbkJvdHRvbTogMTYsXG4gICAgbWFyZ2luVG9wOiAwLFxuICB9LFxuICBiYWNrZHJvcDoge1xuICAgIC4uLlN0eWxlU2hlZXQuYWJzb2x1dGVGaWxsT2JqZWN0LFxuICB9LFxuICBsYWJlbDoge1xuICAgIGJvcmRlclJhZGl1czogNSxcbiAgICBwYWRkaW5nSG9yaXpvbnRhbDogMTIsXG4gICAgcGFkZGluZ1ZlcnRpY2FsOiA2LFxuICAgIG1hcmdpblZlcnRpY2FsOiA4LFxuICAgIG1hcmdpbkhvcml6b250YWw6IDE2LFxuICAgIGVsZXZhdGlvbjogMixcbiAgfSxcbiAgaXRlbToge1xuICAgIG1hcmdpbkhvcml6b250YWw6IDI0LFxuICAgIG1hcmdpbkJvdHRvbTogMTYsXG4gICAgZmxleERpcmVjdGlvbjogJ3JvdycsXG4gICAganVzdGlmeUNvbnRlbnQ6ICdmbGV4LWVuZCcsXG4gICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gIH0sXG59KTtcbiJdfQ==