eabcc2c3b0486a57ca5f302488243e11
var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _react = _interopRequireWildcard(require("react"));

var _times = _interopRequireDefault(require("lodash/times"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _reactNative = require("react-native");

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

var STAR_IMAGE = require('./images/star.png');

var HEART_IMAGE = require('./images/heart.png');

var ROCKET_IMAGE = require('./images/rocket.png');

var BELL_IMAGE = require('./images/bell.png');

var TYPES = {
  star: {
    source: STAR_IMAGE,
    color: '#f1c40f',
    backgroundColor: 'white'
  },
  heart: {
    source: HEART_IMAGE,
    color: '#e74c3c',
    backgroundColor: 'white'
  },
  rocket: {
    source: ROCKET_IMAGE,
    color: '#2ecc71',
    backgroundColor: 'white'
  },
  bell: {
    source: BELL_IMAGE,
    color: '#f39c12',
    backgroundColor: 'white'
  }
};

var SwipeRating = function (_Component) {
  (0, _inherits2.default)(SwipeRating, _Component);

  var _super = _createSuper(SwipeRating);

  function SwipeRating(props) {
    var _this;

    (0, _classCallCheck2.default)(this, SwipeRating);
    _this = _super.call(this, props);
    var _this$props = _this.props,
        onStartRating = _this$props.onStartRating,
        onFinishRating = _this$props.onFinishRating,
        fractions = _this$props.fractions;
    var position = new _reactNative.Animated.ValueXY();

    var panResponder = _reactNative.PanResponder.create({
      onStartShouldSetPanResponder: function onStartShouldSetPanResponder() {
        return true;
      },
      onPanResponderGrant: function onPanResponderGrant() {
        if (typeof onStartRating === 'function') {
          onStartRating();
        }
      },
      onPanResponderMove: function onPanResponderMove(event, gesture) {
        var newPosition = new _reactNative.Animated.ValueXY();
        newPosition.setValue({
          x: gesture.dx,
          y: 0
        });

        if (_this.state.isComponentMounted) {
          _this.setState({
            position: newPosition,
            value: gesture.dx
          });
        }
      },
      onPanResponderRelease: function onPanResponderRelease(event) {
        var rating = _this.getCurrentRating(_this.state.value);

        if (rating >= _this.props.minValue) {
          if (!fractions) {
            _this.setCurrentRating(rating);
          }

          if (typeof onFinishRating === 'function') onFinishRating(rating);
        }
      }
    });

    _this.state = {
      panResponder: panResponder,
      position: position,
      display: false,
      isComponentMounted: false
    };
    return _this;
  }

  (0, _createClass2.default)(SwipeRating, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      var _STAR_IMAGE, _HEART_IMAGE, _ROCKET_IMAGE, _BELL_IMAGE;

      return _regenerator.default.async(function componentDidMount$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return _regenerator.default.awrap(require('./images/star.png'));

            case 3:
              _STAR_IMAGE = _context.sent;
              _context.next = 6;
              return _regenerator.default.awrap(require('./images/heart.png'));

            case 6:
              _HEART_IMAGE = _context.sent;
              _context.next = 9;
              return _regenerator.default.awrap(require('./images/rocket.png'));

            case 9:
              _ROCKET_IMAGE = _context.sent;
              _context.next = 12;
              return _regenerator.default.awrap(require('./images/bell.png'));

            case 12:
              _BELL_IMAGE = _context.sent;
              this.setState({
                display: true,
                isComponentMounted: true
              });
              _context.next = 19;
              break;

            case 16:
              _context.prev = 16;
              _context.t0 = _context["catch"](0);
              console.log(_context.t0);

            case 19:
              this.setCurrentRating(this.props.startingValue);

            case 20:
            case "end":
              return _context.stop();
          }
        }
      }, null, this, [[0, 16]], Promise);
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate(prevProps) {
      if (this.props.startingValue !== prevProps.startingValue) {
        this.setCurrentRating(this.props.startingValue);
      }
    }
  }, {
    key: "getPrimaryViewStyle",
    value: function getPrimaryViewStyle() {
      var position = this.state.position;
      var _this$props2 = this.props,
          imageSize = _this$props2.imageSize,
          ratingCount = _this$props2.ratingCount,
          type = _this$props2.type;
      var color = TYPES[type].color;
      var width = position.x.interpolate({
        inputRange: [-ratingCount * (imageSize / 2), 0, ratingCount * (imageSize / 2)],
        outputRange: [0, ratingCount * imageSize / 2, ratingCount * imageSize],
        extrapolate: 'clamp'
      }, {
        useNativeDriver: true
      });
      return {
        backgroundColor: color,
        width: width,
        height: width ? imageSize : 0
      };
    }
  }, {
    key: "getSecondaryViewStyle",
    value: function getSecondaryViewStyle() {
      var position = this.state.position;
      var _this$props3 = this.props,
          imageSize = _this$props3.imageSize,
          ratingCount = _this$props3.ratingCount,
          type = _this$props3.type;
      var backgroundColor = TYPES[type].backgroundColor;
      var width = position.x.interpolate({
        inputRange: [-ratingCount * (imageSize / 2), 0, ratingCount * (imageSize / 2)],
        outputRange: [ratingCount * imageSize, ratingCount * imageSize / 2, 0],
        extrapolate: 'clamp'
      }, {
        useNativeDriver: true
      });
      return {
        backgroundColor: backgroundColor,
        width: width,
        height: width ? imageSize : 0
      };
    }
  }, {
    key: "renderRatings",
    value: function renderRatings() {
      var _this$props4 = this.props,
          imageSize = _this$props4.imageSize,
          ratingCount = _this$props4.ratingCount,
          type = _this$props4.type,
          tintColor = _this$props4.tintColor;
      var source = TYPES[type].source;
      return (0, _times.default)(ratingCount, function (index) {
        return _react.default.createElement(_reactNative.View, {
          key: index,
          style: styles.starContainer
        }, _react.default.createElement(_reactNative.Image, {
          source: source,
          style: {
            width: imageSize,
            height: imageSize,
            tintColor: tintColor
          }
        }));
      });
    }
  }, {
    key: "getCurrentRating",
    value: function getCurrentRating(value) {
      var _this$props5 = this.props,
          fractions = _this$props5.fractions,
          imageSize = _this$props5.imageSize,
          ratingCount = _this$props5.ratingCount;
      var startingValue = ratingCount / 2;
      var currentRating = this.props.minValue ? this.props.minValue : 0;

      if (value > ratingCount * imageSize / 2) {
        currentRating = ratingCount;
      } else if (value < -ratingCount * imageSize / 2) {
        currentRating = this.props.minValue ? this.props.minValue : 0;
      } else if (value <= imageSize || value > imageSize) {
        currentRating = startingValue + value / imageSize;
        currentRating = !fractions ? Math.ceil(currentRating) : +currentRating.toFixed(fractions);
      } else {
        currentRating = !fractions ? Math.ceil(startingValue) : +startingValue.toFixed(fractions);
      }

      return currentRating;
    }
  }, {
    key: "setCurrentRating",
    value: function setCurrentRating(rating) {
      var _this$props6 = this.props,
          imageSize = _this$props6.imageSize,
          ratingCount = _this$props6.ratingCount;
      var initialRating = ratingCount / 2;
      var value = null;

      if (rating > ratingCount) {
        value = ratingCount * imageSize / 2;
      } else if (rating < 0) {
        value = -ratingCount * imageSize / 2;
      } else if (rating < ratingCount / 2 || rating > ratingCount / 2) {
        value = (rating - initialRating) * imageSize;
      } else {
        value = 0;
      }

      var newPosition = new _reactNative.Animated.ValueXY();
      newPosition.setValue({
        x: value,
        y: 0
      });

      if (this.state.isComponentMounted) {
        this.setState({
          position: newPosition,
          value: value
        });
      }
    }
  }, {
    key: "displayCurrentRating",
    value: function displayCurrentRating() {
      var _this$props7 = this.props,
          ratingCount = _this$props7.ratingCount,
          type = _this$props7.type,
          readonly = _this$props7.readonly,
          showReadOnlyText = _this$props7.showReadOnlyText,
          ratingTextColor = _this$props7.ratingTextColor;
      var color = ratingTextColor || TYPES[type].color;
      return _react.default.createElement(_reactNative.View, {
        style: styles.showRatingView
      }, _react.default.createElement(_reactNative.View, {
        style: styles.ratingView
      }, _react.default.createElement(_reactNative.Text, {
        style: [styles.ratingText, {
          color: color
        }]
      }, "Rating:", ' '), _react.default.createElement(_reactNative.Text, {
        style: [styles.currentRatingText, {
          color: color
        }]
      }, this.getCurrentRating(this.state.value)), _react.default.createElement(_reactNative.Text, {
        style: [styles.maxRatingText, {
          color: color
        }]
      }, "/", ratingCount)), _react.default.createElement(_reactNative.View, null, readonly && showReadOnlyText && _react.default.createElement(_reactNative.Text, {
        style: [styles.readonlyLabel, {
          color: color
        }]
      }, "(readonly)")));
    }
  }, {
    key: "render",
    value: function render() {
      var _this$props8 = this.props,
          readonly = _this$props8.readonly,
          type = _this$props8.type,
          ratingImage = _this$props8.ratingImage,
          ratingColor = _this$props8.ratingColor,
          ratingBackgroundColor = _this$props8.ratingBackgroundColor,
          style = _this$props8.style,
          showRating = _this$props8.showRating;

      if (type === 'custom') {
        var custom = {
          source: ratingImage,
          color: ratingColor,
          backgroundColor: ratingBackgroundColor
        };
        TYPES.custom = custom;
      }

      return this.state.display ? _react.default.createElement(_reactNative.View, {
        pointerEvents: readonly ? 'none' : 'auto',
        style: style
      }, showRating && this.displayCurrentRating(), _react.default.createElement(_reactNative.View, (0, _extends2.default)({
        style: styles.starsWrapper
      }, this.state.panResponder.panHandlers), _react.default.createElement(_reactNative.View, {
        style: styles.starsInsideWrapper
      }, _react.default.createElement(_reactNative.Animated.View, {
        style: this.getPrimaryViewStyle()
      }), _react.default.createElement(_reactNative.Animated.View, {
        style: this.getSecondaryViewStyle()
      })), this.renderRatings())) : null;
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      this.setState({
        isComponentMounted: false
      });
    }
  }]);
  return SwipeRating;
}(_react.Component);

exports.default = SwipeRating;
SwipeRating.defaultProps = {
  type: 'star',
  ratingImage: require('./images/star.png'),
  ratingColor: '#f1c40f',
  ratingBackgroundColor: 'white',
  ratingCount: 5,
  showReadOnlyText: true,
  imageSize: 40,
  minValue: 0
};

var styles = _reactNative.StyleSheet.create({
  starsWrapper: {
    flexDirection: 'row',
    justifyContent: 'center',
    alignItems: 'center'
  },
  starsInsideWrapper: {
    position: 'absolute',
    top: 0,
    left: 0,
    right: 0,
    bottom: 0,
    flexDirection: 'row',
    justifyContent: 'center',
    alignItems: 'center'
  },
  showRatingView: {
    flexDirection: 'column',
    justifyContent: 'center',
    alignItems: 'center',
    paddingBottom: 5
  },
  ratingView: {
    flexDirection: 'row',
    justifyContent: 'center',
    alignItems: 'center',
    paddingBottom: 5
  },
  ratingText: {
    fontSize: 15,
    textAlign: 'center',
    fontFamily: _reactNative.Platform.OS === 'ios' ? 'Trebuchet MS' : null,
    color: '#34495e'
  },
  readonlyLabel: {
    justifyContent: 'center',
    alignItems: 'center',
    fontSize: 12,
    textAlign: 'center',
    fontFamily: _reactNative.Platform.OS === 'ios' ? 'Trebuchet MS' : null,
    color: '#34495a'
  },
  currentRatingText: {
    fontSize: 30,
    textAlign: 'center',
    fontFamily: _reactNative.Platform.OS === 'ios' ? 'Trebuchet MS' : null
  },
  maxRatingText: {
    fontSize: 18,
    textAlign: 'center',
    fontFamily: _reactNative.Platform.OS === 'ios' ? 'Trebuchet MS' : null,
    color: '#34495e'
  }
});

var fractionsType = function fractionsType(props, propName, componentName) {
  if (props[propName]) {
    var value = props[propName];

    if (typeof value === 'number') {
      return value >= 0 && value <= 20 ? null : new Error("`" + propName + "` in `" + componentName + "` must be between 0 and 20");
    }

    return new Error("`" + propName + "` in `" + componentName + "` must be a number");
  }
};

SwipeRating.propTypes = {
  type: _propTypes.default.string,
  ratingImage: _propTypes.default.node,
  ratingColor: _propTypes.default.string,
  ratingBackgroundColor: _propTypes.default.string,
  ratingCount: _propTypes.default.number,
  ratingTextColor: _propTypes.default.string,
  imageSize: _propTypes.default.number,
  onStartRating: _propTypes.default.func,
  onFinishRating: _propTypes.default.func,
  showRating: _propTypes.default.bool,
  style: _propTypes.default.object,
  readonly: _propTypes.default.bool,
  showReadOnlyText: _propTypes.default.bool,
  startingValue: _propTypes.default.number,
  fractions: fractionsType,
  minValue: _propTypes.default.number
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlN3aXBlUmF0aW5nLmpzIl0sIm5hbWVzIjpbIlNUQVJfSU1BR0UiLCJyZXF1aXJlIiwiSEVBUlRfSU1BR0UiLCJST0NLRVRfSU1BR0UiLCJCRUxMX0lNQUdFIiwiVFlQRVMiLCJzdGFyIiwic291cmNlIiwiY29sb3IiLCJiYWNrZ3JvdW5kQ29sb3IiLCJoZWFydCIsInJvY2tldCIsImJlbGwiLCJTd2lwZVJhdGluZyIsInByb3BzIiwib25TdGFydFJhdGluZyIsIm9uRmluaXNoUmF0aW5nIiwiZnJhY3Rpb25zIiwicG9zaXRpb24iLCJBbmltYXRlZCIsIlZhbHVlWFkiLCJwYW5SZXNwb25kZXIiLCJQYW5SZXNwb25kZXIiLCJjcmVhdGUiLCJvblN0YXJ0U2hvdWxkU2V0UGFuUmVzcG9uZGVyIiwib25QYW5SZXNwb25kZXJHcmFudCIsIm9uUGFuUmVzcG9uZGVyTW92ZSIsImV2ZW50IiwiZ2VzdHVyZSIsIm5ld1Bvc2l0aW9uIiwic2V0VmFsdWUiLCJ4IiwiZHgiLCJ5Iiwic3RhdGUiLCJpc0NvbXBvbmVudE1vdW50ZWQiLCJzZXRTdGF0ZSIsInZhbHVlIiwib25QYW5SZXNwb25kZXJSZWxlYXNlIiwicmF0aW5nIiwiZ2V0Q3VycmVudFJhdGluZyIsIm1pblZhbHVlIiwic2V0Q3VycmVudFJhdGluZyIsImRpc3BsYXkiLCJjb25zb2xlIiwibG9nIiwic3RhcnRpbmdWYWx1ZSIsInByZXZQcm9wcyIsImltYWdlU2l6ZSIsInJhdGluZ0NvdW50IiwidHlwZSIsIndpZHRoIiwiaW50ZXJwb2xhdGUiLCJpbnB1dFJhbmdlIiwib3V0cHV0UmFuZ2UiLCJleHRyYXBvbGF0ZSIsInVzZU5hdGl2ZURyaXZlciIsImhlaWdodCIsInRpbnRDb2xvciIsImluZGV4Iiwic3R5bGVzIiwic3RhckNvbnRhaW5lciIsImN1cnJlbnRSYXRpbmciLCJNYXRoIiwiY2VpbCIsInRvRml4ZWQiLCJpbml0aWFsUmF0aW5nIiwicmVhZG9ubHkiLCJzaG93UmVhZE9ubHlUZXh0IiwicmF0aW5nVGV4dENvbG9yIiwic2hvd1JhdGluZ1ZpZXciLCJyYXRpbmdWaWV3IiwicmF0aW5nVGV4dCIsImN1cnJlbnRSYXRpbmdUZXh0IiwibWF4UmF0aW5nVGV4dCIsInJlYWRvbmx5TGFiZWwiLCJyYXRpbmdJbWFnZSIsInJhdGluZ0NvbG9yIiwicmF0aW5nQmFja2dyb3VuZENvbG9yIiwic3R5bGUiLCJzaG93UmF0aW5nIiwiY3VzdG9tIiwiZGlzcGxheUN1cnJlbnRSYXRpbmciLCJzdGFyc1dyYXBwZXIiLCJwYW5IYW5kbGVycyIsInN0YXJzSW5zaWRlV3JhcHBlciIsImdldFByaW1hcnlWaWV3U3R5bGUiLCJnZXRTZWNvbmRhcnlWaWV3U3R5bGUiLCJyZW5kZXJSYXRpbmdzIiwiQ29tcG9uZW50IiwiZGVmYXVsdFByb3BzIiwiU3R5bGVTaGVldCIsImZsZXhEaXJlY3Rpb24iLCJqdXN0aWZ5Q29udGVudCIsImFsaWduSXRlbXMiLCJ0b3AiLCJsZWZ0IiwicmlnaHQiLCJib3R0b20iLCJwYWRkaW5nQm90dG9tIiwiZm9udFNpemUiLCJ0ZXh0QWxpZ24iLCJmb250RmFtaWx5IiwiUGxhdGZvcm0iLCJPUyIsImZyYWN0aW9uc1R5cGUiLCJwcm9wTmFtZSIsImNvbXBvbmVudE5hbWUiLCJFcnJvciIsInByb3BUeXBlcyIsIlByb3BUeXBlcyIsInN0cmluZyIsIm5vZGUiLCJudW1iZXIiLCJmdW5jIiwiYm9vbCIsIm9iamVjdCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFFQTs7Ozs7O0FBTUEsSUFBTUEsVUFBVSxHQUFHQyxPQUFPLENBQUMsbUJBQUQsQ0FBMUI7O0FBQ0EsSUFBTUMsV0FBVyxHQUFHRCxPQUFPLENBQUMsb0JBQUQsQ0FBM0I7O0FBQ0EsSUFBTUUsWUFBWSxHQUFHRixPQUFPLENBQUMscUJBQUQsQ0FBNUI7O0FBQ0EsSUFBTUcsVUFBVSxHQUFHSCxPQUFPLENBQUMsbUJBQUQsQ0FBMUI7O0FBRUEsSUFBTUksS0FBSyxHQUFHO0FB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QUssSUFBSSxFQUF2QixHQUNILElBREcsR0FFSCxJQUFJdUUsS0FBSixPQUFlRixRQUFmLGNBQWtDQyxhQUFsQyxnQ0FGSjtBQUdEOztBQUVELFdBQU8sSUFBSUMsS0FBSixPQUFlRixRQUFmLGNBQWtDQyxhQUFsQyx3QkFBUDtBQUNEO0FBQ0YsQ0FYRDs7QUFhQTlGLFdBQVcsQ0FBQ2dHLFNBQVosR0FBd0I7QUFDdEIzRCxFQUFBQSxJQUFJLEVBQUU0RCxtQkFBVUMsTUFETTtBQUV0Qm5DLEVBQUFBLFdBQVcsRUFBRWtDLG1CQUFVRSxJQUZEO0FBR3RCbkMsRUFBQUEsV0FBVyxFQUFFaUMsbUJBQVVDLE1BSEQ7QUFJdEJqQyxFQUFBQSxxQkFBcUIsRUFBRWdDLG1CQUFVQyxNQUpYO0FBS3RCOUQsRUFBQUEsV0FBVyxFQUFFNkQsbUJBQVVHLE1BTEQ7QUFNdEI1QyxFQUFBQSxlQUFlLEVBQUV5QyxtQkFBVUMsTUFOTDtBQU90Qi9ELEVBQUFBLFNBQVMsRUFBRThELG1CQUFVRyxNQVBDO0FBUXRCbEcsRUFBQUEsYUFBYSxFQUFFK0YsbUJBQVVJLElBUkg7QUFTdEJsRyxFQUFBQSxjQUFjLEVBQUU4RixtQkFBVUksSUFUSjtBQVV0QmxDLEVBQUFBLFVBQVUsRUFBRThCLG1CQUFVSyxJQVZBO0FBV3RCcEMsRUFBQUEsS0FBSyxFQUFFK0IsbUJBQVVNLE1BWEs7QUFZdEJqRCxFQUFBQSxRQUFRLEVBQUUyQyxtQkFBVUssSUFaRTtBQWF0Qi9DLEVBQUFBLGdCQUFnQixFQUFFMEMsbUJBQVVLLElBYk47QUFjdEJyRSxFQUFBQSxhQUFhLEVBQUVnRSxtQkFBVUcsTUFkSDtBQWV0QmhHLEVBQUFBLFNBQVMsRUFBRXdGLGFBZlc7QUFnQnRCaEUsRUFBQUEsUUFBUSxFQUFFcUUsbUJBQVVHO0FBaEJFLENBQXhCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB0aW1lcyBmcm9tICdsb2Rhc2gvdGltZXMnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcblxuaW1wb3J0IHtcbiAgVmlldywgVGV4dCwgQW5pbWF0ZWQsIFBhblJlc3BvbmRlciwgSW1hZ2UsXG4gIFN0eWxlU2hlZXQsIFBsYXRmb3JtXG59IGZyb20gJ3JlYWN0LW5hdGl2ZSc7XG5cbi8vIFJBVElORyBJTUFHRVMgV0lUSCBTVEFUSUMgQkFDS0dST1VORCBDT0xPUiAod2hpdGUpXG5jb25zdCBTVEFSX0lNQUdFID0gcmVxdWlyZSgnLi9pbWFnZXMvc3Rhci5wbmcnKTtcbmNvbnN0IEhFQVJUX0lNQUdFID0gcmVxdWlyZSgnLi9pbWFnZXMvaGVhcnQucG5nJyk7XG5jb25zdCBST0NLRVRfSU1BR0UgPSByZXF1aXJlKCcuL2ltYWdlcy9yb2NrZXQucG5nJyk7XG5jb25zdCBCRUxMX0lNQUdFID0gcmVxdWlyZSgnLi9pbWFnZXMvYmVsbC5wbmcnKTtcblxuY29uc3QgVFlQRVMgPSB7XG4gIHN0YXI6IHtcbiAgICBzb3VyY2U6IFNUQVJfSU1BR0UsXG4gICAgY29sb3I6ICcjZjFjNDBmJyxcbiAgICBiYWNrZ3JvdW5kQ29sb3I6ICd3aGl0ZSdcbiAgfSxcbiAgaGVhcnQ6IHtcbiAgICBzb3VyY2U6IEhFQVJUX0lNQUdFLFxuICAgIGNvbG9yOiAnI2U3NGMzYycsXG4gICAgYmFja2dyb3VuZENvbG9yOiAnd2hpdGUnXG4gIH0sXG4gIHJvY2tldDoge1xuICAgIHNvdXJjZTogUk9DS0VUX0lNQUdFLFxuICAgIGNvbG9yOiAnIzJlY2M3MScsXG4gICAgYmFja2dyb3VuZENvbG9yOiAnd2hpdGUnXG4gIH0sXG4gIGJlbGw6IHtcbiAgICBzb3VyY2U6IEJFTExfSU1BR0UsXG4gICAgY29sb3I6ICcjZjM5YzEyJyxcbiAgICBiYWNrZ3JvdW5kQ29sb3I6ICd3aGl0ZSdcbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3dpcGVSYXRpbmcgZXh0ZW5kcyBDb21wb25lbnQge1xuICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgIHR5cGU6ICdzdGFyJyxcbiAgICByYXRpbmdJbWFnZTogcmVxdWlyZSgnLi9pbWFnZXMvc3Rhci5wbmcnKSxcbiAgICByYXRpbmdDb2xvcjogJyNmMWM0MGYnLFxuICAgIHJhdGluZ0JhY2tncm91bmRDb2xvcjogJ3doaXRlJyxcbiAgICByYXRpbmdDb3VudDogNSxcbiAgICBzaG93UmVhZE9ubHlUZXh0OiB0cnVlLFxuICAgIGltYWdlU2l6ZTogNDAsXG4gICAgbWluVmFsdWU6IDBcbiAgfTtcblxuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICBjb25zdCB7IG9uU3RhcnRSYXRpbmcsIG9uRmluaXNoUmF0aW5nLCBmcmFjdGlvbnMgfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgcG9zaXRpb24gPSBuZXcgQW5pbWF0ZWQuVmFsdWVYWSgpO1xuXG4gICAgY29uc3QgcGFuUmVzcG9uZGVyID0gUGFuUmVzcG9uZGVyLmNyZWF0ZSh7XG4gICAgICBvblN0YXJ0U2hvdWxkU2V0UGFuUmVzcG9uZGVyOiAoKSA9PiB0cnVlLFxuICAgICAgb25QYW5SZXNwb25kZXJHcmFudDogKCkgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIG9uU3RhcnRSYXRpbmcgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBvblN0YXJ0UmF0aW5nKCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvblBhblJlc3BvbmRlck1vdmU6IChldmVudCwgZ2VzdHVyZSkgPT4ge1xuICAgICAgICBjb25zdCBuZXdQb3NpdGlvbiA9IG5ldyBBbmltYXRlZC5WYWx1ZVhZKCk7XG4gICAgICAgIG5ld1Bvc2l0aW9uLnNldFZhbHVlKHsgeDogZ2VzdHVyZS5keCwgeTogMCB9KTtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuaXNDb21wb25lbnRNb3VudGVkKSB7XG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7cG9zaXRpb246IG5ld1Bvc2l0aW9uLCB2YWx1ZTogZ2VzdHVyZS5keH0pO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgb25QYW5SZXNwb25kZXJSZWxlYXNlOiBldmVudCA9PiB7XG4gICAgICAgIGNvbnN0IHJhdGluZyA9IHRoaXMuZ2V0Q3VycmVudFJhdGluZyh0aGlzLnN0YXRlLnZhbHVlKTtcbiAgICAgICAgaWYgKHJhdGluZyA+PSB0aGlzLnByb3BzLm1pblZhbHVlKSB7XG4gICAgICAgICAgaWYgKCFmcmFjdGlvbnMpIHtcbiAgICAgICAgICAgIC8vICdyb3VuZCB1cCcgdG8gdGhlIG5lYXJlc3QgcmF0aW5nIGltYWdlXG4gICAgICAgICAgICB0aGlzLnNldEN1cnJlbnRSYXRpbmcocmF0aW5nKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHR5cGVvZiBvbkZpbmlzaFJhdGluZyA9PT0gJ2Z1bmN0aW9uJykgb25GaW5pc2hSYXRpbmcocmF0aW5nKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5zdGF0ZSA9IHsgcGFuUmVzcG9uZGVyLCBwb3NpdGlvbiwgZGlzcGxheTogZmFsc2UsIGlzQ29tcG9uZW50TW91bnRlZDogZmFsc2UgfTtcbiAgfVxuXG4gIGFzeW5jIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBTVEFSX0lNQUdFID0gYXdhaXQgcmVxdWlyZSgnLi9pbWFnZXMvc3Rhci5wbmcnKTtcbiAgICAgIGNvbnN0IEhFQVJUX0lNQUdFID0gYXdhaXQgcmVxdWlyZSgnLi9pbWFnZXMvaGVhcnQucG5nJyk7XG4gICAgICBjb25zdCBST0NLRVRfSU1BR0UgPSBhd2FpdCByZXF1aXJlKCcuL2ltYWdlcy9yb2NrZXQucG5nJyk7XG4gICAgICBjb25zdCBCRUxMX0lNQUdFID0gYXdhaXQgcmVxdWlyZSgnLi9pbWFnZXMvYmVsbC5wbmcnKTtcblxuICAgICAgdGhpcy5zZXRTdGF0ZSh7IGRpc3BsYXk6IHRydWUsIGlzQ29tcG9uZW50TW91bnRlZDogdHJ1ZSB9KTtcbiAgICB9IGNhdGNoKGVycikge1xuICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgIH1cblxuICAgIHRoaXMuc2V0Q3VycmVudFJhdGluZyh0aGlzLnByb3BzLnN0YXJ0aW5nVmFsdWUpO1xuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcykge1xuICAgIGlmICh0aGlzLnByb3BzLnN0YXJ0aW5nVmFsdWUgIT09IHByZXZQcm9wcy5zdGFydGluZ1ZhbHVlKSB7XG4gICAgICB0aGlzLnNldEN1cnJlbnRSYXRpbmcodGhpcy5wcm9wcy5zdGFydGluZ1ZhbHVlKTtcbiAgICB9XG4gIH1cblxuICBnZXRQcmltYXJ5Vmlld1N0eWxlKCkge1xuICAgIGNvbnN0IHsgcG9zaXRpb24gfSA9IHRoaXMuc3RhdGU7XG4gICAgY29uc3QgeyBpbWFnZVNpemUsIHJhdGluZ0NvdW50LCB0eXBlIH0gPSB0aGlzLnByb3BzO1xuXG4gICAgY29uc3QgY29sb3IgPSBUWVBFU1t0eXBlXS5jb2xvcjtcblxuICAgIGNvbnN0IHdpZHRoID0gcG9zaXRpb24ueC5pbnRlcnBvbGF0ZShcbiAgICAgIHtcbiAgICAgICAgaW5wdXRSYW5nZTogWy1yYXRpbmdDb3VudCAqIChpbWFnZVNpemUgLyAyKSwgMCwgcmF0aW5nQ291bnQgKiAoaW1hZ2VTaXplIC8gMildLFxuICAgICAgICBvdXRwdXRSYW5nZTogWzAsIChyYXRpbmdDb3VudCAqIGltYWdlU2l6ZSkgLyAyLCByYXRpbmdDb3VudCAqIGltYWdlU2l6ZV0sXG4gICAgICAgIGV4dHJhcG9sYXRlOiAnY2xhbXAnXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICB1c2VOYXRpdmVEcml2ZXI6IHRydWVcbiAgICAgIH1cbiAgICApO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGJhY2tncm91bmRDb2xvcjogY29sb3IsXG4gICAgICB3aWR0aCxcbiAgICAgIGhlaWdodDogd2lkdGggPyBpbWFnZVNpemUgOiAwXG4gICAgfTtcbiAgfVxuXG4gIGdldFNlY29uZGFyeVZpZXdTdHlsZSgpIHtcbiAgICBjb25zdCB7IHBvc2l0aW9uIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IHsgaW1hZ2VTaXplLCByYXRpbmdDb3VudCwgdHlwZSB9ID0gdGhpcy5wcm9wcztcblxuICAgIGNvbnN0IGJhY2tncm91bmRDb2xvciA9IFRZUEVTW3R5cGVdLmJhY2tncm91bmRDb2xvcjtcblxuICAgIGNvbnN0IHdpZHRoID0gcG9zaXRpb24ueC5pbnRlcnBvbGF0ZShcbiAgICAgIHtcbiAgICAgICAgaW5wdXRSYW5nZTogWy1yYXRpbmdDb3VudCAqIChpbWFnZVNpemUgLyAyKSwgMCwgcmF0aW5nQ291bnQgKiAoaW1hZ2VTaXplIC8gMildLFxuICAgICAgICBvdXRwdXRSYW5nZTogW3JhdGluZ0NvdW50ICogaW1hZ2VTaXplLCAocmF0aW5nQ291bnQgKiBpbWFnZVNpemUpIC8gMiwgMF0sXG4gICAgICAgIGV4dHJhcG9sYXRlOiAnY2xhbXAnXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICB1c2VOYXRpdmVEcml2ZXI6IHRydWVcbiAgICAgIH1cbiAgICApO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGJhY2tncm91bmRDb2xvcixcbiAgICAgIHdpZHRoLFxuICAgICAgaGVpZ2h0OiB3aWR0aCA/IGltYWdlU2l6ZSA6IDBcbiAgICB9O1xuICB9XG5cbiAgcmVuZGVyUmF0aW5ncygpIHtcbiAgICBjb25zdCB7IGltYWdlU2l6ZSwgcmF0aW5nQ291bnQsIHR5cGUsIHRpbnRDb2xvciB9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCBzb3VyY2UgPSBUWVBFU1t0eXBlXS5zb3VyY2U7XG5cbiAgICByZXR1cm4gdGltZXMocmF0aW5nQ291bnQsIGluZGV4ID0+IChcbiAgICAgIDxWaWV3IGtleT17aW5kZXh9IHN0eWxlPXtzdHlsZXMuc3RhckNvbnRhaW5lcn0+XG4gICAgICAgIDxJbWFnZSBzb3VyY2U9e3NvdXJjZX0gc3R5bGU9e3sgd2lkdGg6IGltYWdlU2l6ZSwgaGVpZ2h0OiBpbWFnZVNpemUsIHRpbnRDb2xvciB9fSAvPlxuICAgICAgPC9WaWV3PlxuICAgICkpO1xuICB9XG5cbiAgZ2V0Q3VycmVudFJhdGluZyh2YWx1ZSkge1xuICAgIC8vIGNvbnN0IHsgdmFsdWUgfSA9IHRoaXMuc3RhdGU7XG4gICAgY29uc3QgeyBmcmFjdGlvbnMsIGltYWdlU2l6ZSwgcmF0aW5nQ291bnQgfSA9IHRoaXMucHJvcHM7XG5cbiAgICBjb25zdCBzdGFydGluZ1ZhbHVlID0gcmF0aW5nQ291bnQgLyAyO1xuICAgIGxldCBjdXJyZW50UmF0aW5nID0gKHRoaXMucHJvcHMubWluVmFsdWUpID8gdGhpcy5wcm9wcy5taW5WYWx1ZSA6IDA7XG5cbiAgICBpZiAodmFsdWUgPiAocmF0aW5nQ291bnQgKiBpbWFnZVNpemUpIC8gMikge1xuICAgICAgY3VycmVudFJhdGluZyA9IHJhdGluZ0NvdW50O1xuICAgIH0gZWxzZSBpZiAodmFsdWUgPCAoLXJhdGluZ0NvdW50ICogaW1hZ2VTaXplKSAvIDIpIHtcbiAgICAgIGN1cnJlbnRSYXRpbmcgPSAodGhpcy5wcm9wcy5taW5WYWx1ZSkgPyB0aGlzLnByb3BzLm1pblZhbHVlIDogMDtcbiAgICB9IGVsc2UgaWYgKHZhbHVlIDw9IGltYWdlU2l6ZSB8fCB2YWx1ZSA+IGltYWdlU2l6ZSkge1xuICAgICAgY3VycmVudFJhdGluZyA9IHN0YXJ0aW5nVmFsdWUgKyB2YWx1ZSAvIGltYWdlU2l6ZTtcbiAgICAgIGN1cnJlbnRSYXRpbmcgPSAhZnJhY3Rpb25zID8gTWF0aC5jZWlsKGN1cnJlbnRSYXRpbmcpIDogK2N1cnJlbnRSYXRpbmcudG9GaXhlZChmcmFjdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdXJyZW50UmF0aW5nID0gIWZyYWN0aW9ucyA/IE1hdGguY2VpbChzdGFydGluZ1ZhbHVlKSA6ICtzdGFydGluZ1ZhbHVlLnRvRml4ZWQoZnJhY3Rpb25zKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY3VycmVudFJhdGluZztcbiAgfVxuXG4gIHNldEN1cnJlbnRSYXRpbmcocmF0aW5nKSB7XG4gICAgY29uc3QgeyBpbWFnZVNpemUsIHJhdGluZ0NvdW50IH0gPSB0aGlzLnByb3BzO1xuXG4gICAgLy8gYGluaXRpYWxSYXRpbmdgIGNvcnJlc3BvbmRzIHRvIGBzdGFydGluZ1ZhbHVlYCBpbiB0aGUgZ2V0dGVyLiBOYW1pbmcgaXRcbiAgICAvLyBkaWZmZXJlbnRseSBoZXJlIGF2b2lkcyBjb25mdXNpb24gd2l0aCBgdmFsdWVgIGJlbG93LlxuICAgIGNvbnN0IGluaXRpYWxSYXRpbmcgPSByYXRpbmdDb3VudCAvIDI7XG4gICAgbGV0IHZhbHVlID0gbnVsbDtcblxuICAgIGlmIChyYXRpbmcgPiByYXRpbmdDb3VudCkge1xuICAgICAgdmFsdWUgPSAocmF0aW5nQ291bnQgKiBpbWFnZVNpemUpIC8gMjtcbiAgICB9IGVsc2UgaWYgKHJhdGluZyA8IDApIHtcbiAgICAgIHZhbHVlID0gKC1yYXRpbmdDb3VudCAqIGltYWdlU2l6ZSkgLyAyO1xuICAgIH0gZWxzZSBpZiAocmF0aW5nIDwgcmF0aW5nQ291bnQgLyAyIHx8IHJhdGluZyA+IHJhdGluZ0NvdW50IC8gMikge1xuICAgICAgdmFsdWUgPSAocmF0aW5nIC0gaW5pdGlhbFJhdGluZykgKiBpbWFnZVNpemU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhbHVlID0gMDtcbiAgICB9XG5cbiAgICBjb25zdCBuZXdQb3NpdGlvbiA9IG5ldyBBbmltYXRlZC5WYWx1ZVhZKCk7XG4gICAgbmV3UG9zaXRpb24uc2V0VmFsdWUoeyB4OiB2YWx1ZSwgeTogMCB9KTtcbiAgICBpZiAodGhpcy5zdGF0ZS5pc0NvbXBvbmVudE1vdW50ZWQpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe3Bvc2l0aW9uOiBuZXdQb3NpdGlvbiwgdmFsdWV9KTtcbiAgICB9XG4gIH1cblxuICBkaXNwbGF5Q3VycmVudFJhdGluZygpIHtcbiAgICBjb25zdCB7IHJhdGluZ0NvdW50LCB0eXBlLCByZWFkb25seSwgc2hvd1JlYWRPbmx5VGV4dCwgcmF0aW5nVGV4dENvbG9yIH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IGNvbG9yID0gcmF0aW5nVGV4dENvbG9yIHx8IFRZUEVTW3R5cGVdLmNvbG9yO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxWaWV3IHN0eWxlPXtzdHlsZXMuc2hvd1JhdGluZ1ZpZXd9PlxuICAgICAgICA8VmlldyBzdHlsZT17c3R5bGVzLnJhdGluZ1ZpZXd9PlxuICAgICAgICAgIDxUZXh0IHN0eWxlPXtbc3R5bGVzLnJhdGluZ1RleHQsIHsgY29sb3IgfV19PlJhdGluZzp7JyAnfTwvVGV4dD5cbiAgICAgICAgICA8VGV4dCBzdHlsZT17W3N0eWxlcy5jdXJyZW50UmF0aW5nVGV4dCwgeyBjb2xvciB9XX0+e3RoaXMuZ2V0Q3VycmVudFJhdGluZyh0aGlzLnN0YXRlLnZhbHVlKX08L1RleHQ+XG4gICAgICAgICAgPFRleHQgc3R5bGU9e1tzdHlsZXMubWF4UmF0aW5nVGV4dCwgeyBjb2xvciB9XX0+L3tyYXRpbmdDb3VudH08L1RleHQ+XG4gICAgICAgIDwvVmlldz5cbiAgICAgICAgPFZpZXc+e3JlYWRvbmx5ICYmIHNob3dSZWFkT25seVRleHQgJiYgPFRleHQgc3R5bGU9e1tzdHlsZXMucmVhZG9ubHlMYWJlbCwgeyBjb2xvciB9XX0+KHJlYWRvbmx5KTwvVGV4dD59PC9WaWV3PlxuICAgICAgPC9WaWV3PlxuICAgICk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyByZWFkb25seSwgdHlwZSwgcmF0aW5nSW1hZ2UsIHJhdGluZ0NvbG9yLCByYXRpbmdCYWNrZ3JvdW5kQ29sb3IsIHN0eWxlLCBzaG93UmF0aW5nIH0gPSB0aGlzLnByb3BzO1xuXG4gICAgaWYgKHR5cGUgPT09ICdjdXN0b20nKSB7XG4gICAgICBsZXQgY3VzdG9tID0ge1xuICAgICAgICBzb3VyY2U6IHJhdGluZ0ltYWdlLFxuICAgICAgICBjb2xvcjogcmF0aW5nQ29sb3IsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogcmF0aW5nQmFja2dyb3VuZENvbG9yXG4gICAgICB9O1xuICAgICAgVFlQRVMuY3VzdG9tID0gY3VzdG9tO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICB0aGlzLnN0YXRlLmRpc3BsYXkgP1xuICAgICAgPFZpZXcgcG9pbnRlckV2ZW50cz17cmVhZG9ubHkgPyAnbm9uZScgOiAnYXV0byd9IHN0eWxlPXtzdHlsZX0+XG4gICAgICAgIHtzaG93UmF0aW5nICYmIHRoaXMuZGlzcGxheUN1cnJlbnRSYXRpbmcoKX1cbiAgICAgICAgPFZpZXcgc3R5bGU9e3N0eWxlcy5zdGFyc1dyYXBwZXJ9IHsuLi50aGlzLnN0YXRlLnBhblJlc3BvbmRlci5wYW5IYW5kbGVyc30+XG4gICAgICAgICAgPFZpZXcgc3R5bGU9e3N0eWxlcy5zdGFyc0luc2lkZVdyYXBwZXJ9PlxuICAgICAgICAgICAgPEFuaW1hdGVkLlZpZXcgc3R5bGU9e3RoaXMuZ2V0UHJpbWFyeVZpZXdTdHlsZSgpfSAvPlxuICAgICAgICAgICAgPEFuaW1hdGVkLlZpZXcgc3R5bGU9e3RoaXMuZ2V0U2Vjb25kYXJ5Vmlld1N0eWxlKCl9IC8+XG4gICAgICAgICAgPC9WaWV3PlxuICAgICAgICAgIHt0aGlzLnJlbmRlclJhdGluZ3MoKX1cbiAgICAgICAgPC9WaWV3PlxuICAgICAgPC9WaWV3PiA6XG4gICAgICBudWxsXG4gICAgKTtcbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBpc0NvbXBvbmVudE1vdW50ZWQ6IGZhbHNlIH0pO1xuICB9XG5cbn1cblxuY29uc3Qgc3R5bGVzID0gU3R5bGVTaGVldC5jcmVhdGUoe1xuICBzdGFyc1dyYXBwZXI6IHtcbiAgICBmbGV4RGlyZWN0aW9uOiAncm93JyxcbiAgICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXG4gICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gIH0sXG4gIHN0YXJzSW5zaWRlV3JhcHBlcjoge1xuICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgIHRvcDogMCxcbiAgICBsZWZ0OiAwLFxuICAgIHJpZ2h0OiAwLFxuICAgIGJvdHRvbTogMCxcbiAgICBmbGV4RGlyZWN0aW9uOiAncm93JyxcbiAgICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXG4gICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gIH0sXG4gIHNob3dSYXRpbmdWaWV3OiB7XG4gICAgZmxleERpcmVjdGlvbjogJ2NvbHVtbicsXG4gICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxuICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgIHBhZGRpbmdCb3R0b206IDVcbiAgfSxcbiAgcmF0aW5nVmlldzoge1xuICAgIGZsZXhEaXJlY3Rpb246ICdyb3cnLFxuICAgIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcbiAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICBwYWRkaW5nQm90dG9tOiA1XG4gIH0sXG4gIHJhdGluZ1RleHQ6IHtcbiAgICBmb250U2l6ZTogMTUsXG4gICAgdGV4dEFsaWduOiAnY2VudGVyJyxcbiAgICBmb250RmFtaWx5OiBQbGF0Zm9ybS5PUyA9PT0gJ2lvcycgPyAnVHJlYnVjaGV0IE1TJyA6IG51bGwsXG4gICAgY29sb3I6ICcjMzQ0OTVlJ1xuICB9LFxuICByZWFkb25seUxhYmVsOiB7XG4gICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxuICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgIGZvbnRTaXplOiAxMixcbiAgICB0ZXh0QWxpZ246ICdjZW50ZXInLFxuICAgIGZvbnRGYW1pbHk6IFBsYXRmb3JtLk9TID09PSAnaW9zJyA/ICdUcmVidWNoZXQgTVMnIDogbnVsbCxcbiAgICBjb2xvcjogJyMzNDQ5NWEnXG4gIH0sXG4gIGN1cnJlbnRSYXRpbmdUZXh0OiB7XG4gICAgZm9udFNpemU6IDMwLFxuICAgIHRleHRBbGlnbjogJ2NlbnRlcicsXG4gICAgZm9udEZhbWlseTogUGxhdGZvcm0uT1MgPT09ICdpb3MnID8gJ1RyZWJ1Y2hldCBNUycgOiBudWxsXG4gIH0sXG4gIG1heFJhdGluZ1RleHQ6IHtcbiAgICBmb250U2l6ZTogMTgsXG4gICAgdGV4dEFsaWduOiAnY2VudGVyJyxcbiAgICBmb250RmFtaWx5OiBQbGF0Zm9ybS5PUyA9PT0gJ2lvcycgPyAnVHJlYnVjaGV0IE1TJyA6IG51bGwsXG4gICAgY29sb3I6ICcjMzQ0OTVlJ1xuICB9XG59KTtcblxuY29uc3QgZnJhY3Rpb25zVHlwZSA9IChwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUpID0+IHtcbiAgaWYgKHByb3BzW3Byb3BOYW1lXSkge1xuICAgIGNvbnN0IHZhbHVlID0gcHJvcHNbcHJvcE5hbWVdO1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgICByZXR1cm4gdmFsdWUgPj0gMCAmJiB2YWx1ZSA8PSAyMFxuICAgICAgICA/IG51bGxcbiAgICAgICAgOiBuZXcgRXJyb3IoYFxcYCR7cHJvcE5hbWV9XFxgIGluIFxcYCR7Y29tcG9uZW50TmFtZX1cXGAgbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDIwYCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBFcnJvcihgXFxgJHtwcm9wTmFtZX1cXGAgaW4gXFxgJHtjb21wb25lbnROYW1lfVxcYCBtdXN0IGJlIGEgbnVtYmVyYCk7XG4gIH1cbn07XG5cblN3aXBlUmF0aW5nLnByb3BUeXBlcyA9IHtcbiAgdHlwZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgcmF0aW5nSW1hZ2U6IFByb3BUeXBlcy5ub2RlLFxuICByYXRpbmdDb2xvcjogUHJvcFR5cGVzLnN0cmluZyxcbiAgcmF0aW5nQmFja2dyb3VuZENvbG9yOiBQcm9wVHlwZXMuc3RyaW5nLFxuICByYXRpbmdDb3VudDogUHJvcFR5cGVzLm51bWJlcixcbiAgcmF0aW5nVGV4dENvbG9yOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBpbWFnZVNpemU6IFByb3BUeXBlcy5udW1iZXIsXG4gIG9uU3RhcnRSYXRpbmc6IFByb3BUeXBlcy5mdW5jLFxuICBvbkZpbmlzaFJhdGluZzogUHJvcFR5cGVzLmZ1bmMsXG4gIHNob3dSYXRpbmc6IFByb3BUeXBlcy5ib29sLFxuICBzdHlsZTogUHJvcFR5cGVzLm9iamVjdCxcbiAgcmVhZG9ubHk6IFByb3BUeXBlcy5ib29sLFxuICBzaG93UmVhZE9ubHlUZXh0OiBQcm9wVHlwZXMuYm9vbCxcbiAgc3RhcnRpbmdWYWx1ZTogUHJvcFR5cGVzLm51bWJlcixcbiAgZnJhY3Rpb25zOiBmcmFjdGlvbnNUeXBlLFxuICBtaW5WYWx1ZTogUHJvcFR5cGVzLm51bWJlclxufTtcbiJdfQ==