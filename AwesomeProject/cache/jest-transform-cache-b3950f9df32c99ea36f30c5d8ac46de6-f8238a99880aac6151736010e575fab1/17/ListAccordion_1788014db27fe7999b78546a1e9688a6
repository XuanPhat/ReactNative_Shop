bbf5748c732c271d5fb6b330d337ffb7
"use strict";

var _interopRequireDefault2 = require("@babel/runtime/helpers/interopRequireDefault");

var _slicedToArray2 = _interopRequireDefault2(require("@babel/runtime/helpers/slicedToArray"));

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _color = _interopRequireDefault(require("color"));

var React = _interopRequireWildcard(require("react"));

var _reactNative = require("react-native");

var _TouchableRipple = _interopRequireDefault(require("../TouchableRipple/TouchableRipple"));

var _MaterialCommunityIcon = _interopRequireDefault(require("../MaterialCommunityIcon"));

var _Text = _interopRequireDefault(require("../Typography/Text"));

var _theming = require("../../core/theming");

var _ListAccordionGroup = require("./ListAccordionGroup");

function _getRequireWildcardCache() {
  if (typeof WeakMap !== "function") return null;
  var cache = new WeakMap();

  _getRequireWildcardCache = function _getRequireWildcardCache() {
    return cache;
  };

  return cache;
}

function _interopRequireWildcard(obj) {
  if (obj && obj.__esModule) {
    return obj;
  }

  if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
    return {
      default: obj
    };
  }

  var cache = _getRequireWildcardCache();

  if (cache && cache.has(obj)) {
    return cache.get(obj);
  }

  var newObj = {};
  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;

  for (var key in obj) {
    if (Object.prototype.hasOwnProperty.call(obj, key)) {
      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;

      if (desc && (desc.get || desc.set)) {
        Object.defineProperty(newObj, key, desc);
      } else {
        newObj[key] = obj[key];
      }
    }
  }

  newObj.default = obj;

  if (cache) {
    cache.set(obj, newObj);
  }

  return newObj;
}

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}

var ListAccordion = function ListAccordion(_ref) {
  var left = _ref.left,
      title = _ref.title,
      description = _ref.description,
      children = _ref.children,
      theme = _ref.theme,
      titleStyle = _ref.titleStyle,
      descriptionStyle = _ref.descriptionStyle,
      _ref$titleNumberOfLin = _ref.titleNumberOfLines,
      titleNumberOfLines = _ref$titleNumberOfLin === void 0 ? 1 : _ref$titleNumberOfLin,
      _ref$descriptionNumbe = _ref.descriptionNumberOfLines,
      descriptionNumberOfLines = _ref$descriptionNumbe === void 0 ? 2 : _ref$descriptionNumbe,
      style = _ref.style,
      id = _ref.id,
      testID = _ref.testID,
      onPress = _ref.onPress,
      expandedProp = _ref.expanded;

  var _React$useState = React.useState(expandedProp || false),
      _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 2),
      expanded = _React$useState2[0],
      setExpanded = _React$useState2[1];

  var handlePressAction = function handlePressAction() {
    onPress === null || onPress === void 0 ? void 0 : onPress();

    if (expandedProp === undefined) {
      setExpanded(function (expanded) {
        return !expanded;
      });
    }
  };

  var titleColor = (0, _color.default)(theme.colors.text).alpha(0.87).rgb().string();
  var descriptionColor = (0, _color.default)(theme.colors.text).alpha(0.54).rgb().string();
  var expandedInternal = expandedProp !== undefined ? expandedProp : expanded;
  var groupContext = React.useContext(_ListAccordionGroup.ListAccordionGroupContext);

  if (groupContext !== null && !id) {
    throw new Error('List.Accordion is used inside a List.AccordionGroup without specifying an id prop.');
  }

  var isExpanded = groupContext ? groupContext.expandedId === id : expandedInternal;
  var handlePress = groupContext && id !== undefined ? function () {
    return groupContext.onAccordionPress(id);
  } : handlePressAction;
  return React.createElement(_reactNative.View, null, React.createElement(_TouchableRipple.default, {
    style: [styles.container, style],
    onPress: handlePress,
    accessibilityTraits: "button",
    accessibilityComponentType: "button",
    accessibilityRole: "button",
    testID: testID
  }, React.createElement(_reactNative.View, {
    style: styles.row,
    pointerEvents: "none"
  }, left ? left({
    color: isExpanded ? theme.colors.primary : descriptionColor
  }) : null, React.createElement(_reactNative.View, {
    style: [styles.item, styles.content]
  }, React.createElement(_Text.default, {
    selectable: false,
    numberOfLines: titleNumberOfLines,
    style: [styles.title, {
      color: isExpanded ? theme.colors.primary : titleColor
    }, titleStyle]
  }, title), description && React.createElement(_Text.default, {
    selectable: false,
    numberOfLines: descriptionNumberOfLines,
    style: [styles.description, {
      color: descriptionColor
    }, descriptionStyle]
  }, description)), React.createElement(_reactNative.View, {
    style: [styles.item, description ? styles.multiline : undefined]
  }, React.createElement(_MaterialCommunityIcon.default, {
    name: isExpanded ? 'chevron-up' : 'chevron-down',
    color: titleColor,
    size: 24,
    direction: _reactNative.I18nManager.isRTL ? 'rtl' : 'ltr'
  })))), isExpanded ? React.Children.map(children, function (child) {
    if (left && React.isValidElement(child) && !child.props.left && !child.props.right) {
      return React.cloneElement(child, {
        style: [styles.child, child.props.style]
      });
    }

    return child;
  }) : null);
};

ListAccordion.displayName = 'List.Accordion';

var styles = _reactNative.StyleSheet.create({
  container: {
    padding: 8
  },
  row: {
    flexDirection: 'row',
    alignItems: 'center'
  },
  multiline: {
    height: 40,
    alignItems: 'center',
    justifyContent: 'center'
  },
  title: {
    fontSize: 16
  },
  description: {
    fontSize: 14
  },
  item: {
    margin: 8
  },
  child: {
    paddingLeft: 64
  },
  content: {
    flex: 1,
    justifyContent: 'center'
  }
});

var _default = (0, _theming.withTheme)(ListAccordion);

exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkxpc3RBY2NvcmRpb24udHN4Il0sIm5hbWVzIjpbIkxpc3RBY2NvcmRpb24iLCJ0aXRsZU51bWJlck9mTGluZXMiLCJkZXNjcmlwdGlvbk51bWJlck9mTGluZXMiLCJleHBhbmRlZCIsImV4cGFuZGVkUHJvcCIsIlJlYWN0IiwiaGFuZGxlUHJlc3NBY3Rpb24iLCJvblByZXNzIiwic2V0RXhwYW5kZWQiLCJ0aXRsZUNvbG9yIiwidGhlbWUiLCJkZXNjcmlwdGlvbkNvbG9yIiwiZXhwYW5kZWRJbnRlcm5hbCIsImdyb3VwQ29udGV4dCIsIkxpc3RBY2NvcmRpb25Hcm91cENvbnRleHQiLCJpc0V4cGFuZGVkIiwiaGFuZGxlUHJlc3MiLCJpZCIsInN0eWxlcyIsInRlc3RJRCIsImxlZnQiLCJjb2xvciIsImRlc2NyaXB0aW9uIiwiSTE4bk1hbmFnZXIiLCJjaGlsZCIsInN0eWxlIiwiY29udGFpbmVyIiwicGFkZGluZyIsInJvdyIsImZsZXhEaXJlY3Rpb24iLCJhbGlnbkl0ZW1zIiwibXVsdGlsaW5lIiwiaGVpZ2h0IiwianVzdGlmeUNvbnRlbnQiLCJ0aXRsZSIsImZvbnRTaXplIiwiaXRlbSIsIm1hcmdpbiIsInBhZGRpbmdMZWZ0IiwiY29udGVudCIsImZsZXgiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUEsSUFBQSxNQUFBLEdBQUEsc0JBQUEsQ0FBQSxPQUFBLENBQUEsT0FBQSxDQUFBLENBQUE7O0FBQ0EsSUFBQSxLQUFBLEdBQUEsdUJBQUEsQ0FBQSxPQUFBLENBQUEsT0FBQSxDQUFBLENBQUE7O0FBQ0EsSUFBQSxZQUFBLEdBQUEsT0FBQSxDQUFBLGNBQUEsQ0FBQTs7QUFRQSxJQUFBLGdCQUFBLEdBQUEsc0JBQUEsQ0FBQSxPQUFBLENBQUEsb0NBQUEsQ0FBQSxDQUFBOztBQUNBLElBQUEsc0JBQUEsR0FBQSxzQkFBQSxDQUFBLE9BQUEsQ0FBQSwwQkFBQSxDQUFBLENBQUE7O0FBQ0EsSUFBQSxLQUFBLEdBQUEsc0JBQUEsQ0FBQSxPQUFB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QSxHQUFBQSxnQkFBQUE7O0FBRUEsSUFBTWtCLE1BQU0sR0FBRyxZQUFBLENBQUEsVUFBQSxDQUFBLE1BQUEsQ0FBa0I7QUFDL0JRLEVBQUFBLFNBQVMsRUFBRTtBQUNUQyxJQUFBQSxPQUFPLEVBQUU7QUFEQSxHQURvQjtBQUkvQkMsRUFBQUEsR0FBRyxFQUFFO0FBQ0hDLElBQUFBLGFBQWEsRUFEVixLQUFBO0FBRUhDLElBQUFBLFVBQVUsRUFBRTtBQUZULEdBSjBCO0FBUS9CQyxFQUFBQSxTQUFTLEVBQUU7QUFDVEMsSUFBQUEsTUFBTSxFQURHLEVBQUE7QUFFVEYsSUFBQUEsVUFBVSxFQUZELFFBQUE7QUFHVEcsSUFBQUEsY0FBYyxFQUFFO0FBSFAsR0FSb0I7QUFhL0JDLEVBQUFBLEtBQUssRUFBRTtBQUNMQyxJQUFBQSxRQUFRLEVBQUU7QUFETCxHQWJ3QjtBQWdCL0JiLEVBQUFBLFdBQVcsRUFBRTtBQUNYYSxJQUFBQSxRQUFRLEVBQUU7QUFEQyxHQWhCa0I7QUFtQi9CQyxFQUFBQSxJQUFJLEVBQUU7QUFDSkMsSUFBQUEsTUFBTSxFQUFFO0FBREosR0FuQnlCO0FBc0IvQmIsRUFBQUEsS0FBSyxFQUFFO0FBQ0xjLElBQUFBLFdBQVcsRUFBRTtBQURSLEdBdEJ3QjtBQXlCL0JDLEVBQUFBLE9BQU8sRUFBRTtBQUNQQyxJQUFBQSxJQUFJLEVBREcsQ0FBQTtBQUVQUCxJQUFBQSxjQUFjLEVBQUU7QUFGVDtBQXpCc0IsQ0FBbEIsQ0FBZjs7ZUErQmUsQ0FBQSxHQUFBLFFBQUEsQ0FBQSxTQUFBLEVBQUEsYUFBQSxDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbG9yIGZyb20gJ2NvbG9yJztcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7XG4gIFZpZXcsXG4gIFZpZXdTdHlsZSxcbiAgU3R5bGVTaGVldCxcbiAgU3R5bGVQcm9wLFxuICBUZXh0U3R5bGUsXG4gIEkxOG5NYW5hZ2VyLFxufSBmcm9tICdyZWFjdC1uYXRpdmUnO1xuaW1wb3J0IFRvdWNoYWJsZVJpcHBsZSBmcm9tICcuLi9Ub3VjaGFibGVSaXBwbGUvVG91Y2hhYmxlUmlwcGxlJztcbmltcG9ydCBNYXRlcmlhbENvbW11bml0eUljb24gZnJvbSAnLi4vTWF0ZXJpYWxDb21tdW5pdHlJY29uJztcbmltcG9ydCBUZXh0IGZyb20gJy4uL1R5cG9ncmFwaHkvVGV4dCc7XG5pbXBvcnQgeyB3aXRoVGhlbWUgfSBmcm9tICcuLi8uLi9jb3JlL3RoZW1pbmcnO1xuXG5pbXBvcnQgeyBMaXN0QWNjb3JkaW9uR3JvdXBDb250ZXh0IH0gZnJvbSAnLi9MaXN0QWNjb3JkaW9uR3JvdXAnO1xuXG50eXBlIFByb3BzID0ge1xuICAvKipcbiAgICogVGl0bGUgdGV4dCBmb3IgdGhlIGxpc3QgYWNjb3JkaW9uLlxuICAgKi9cbiAgdGl0bGU6IFJlYWN0LlJlYWN0Tm9kZTtcbiAgLyoqXG4gICAqIERlc2NyaXB0aW9uIHRleHQgZm9yIHRoZSBsaXN0IGFjY29yZGlvbi5cbiAgICovXG4gIGRlc2NyaXB0aW9uPzogUmVhY3QuUmVhY3ROb2RlO1xuICAvKipcbiAgICogQ2FsbGJhY2sgd2hpY2ggcmV0dXJucyBhIFJlYWN0IGVsZW1lbnQgdG8gZGlzcGxheSBvbiB0aGUgbGVmdCBzaWRlLlxuICAgKi9cbiAgbGVmdD86IChwcm9wczogeyBjb2xvcjogc3RyaW5nIH0pID0+IFJlYWN0LlJlYWN0Tm9kZTtcbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIGFjY29yZGlvbiBpcyBleHBhbmRlZFxuICAgKiBJZiB0aGlzIHByb3AgaXMgcHJvdmlkZWQsIHRoZSBhY2NvcmRpb24gd2lsbCBiZWhhdmUgYXMgYSBcImNvbnRyb2xsZWQgY29tcG9uZW50XCIuXG4gICAqIFlvdSdsbCBuZWVkIHRvIHVwZGF0ZSB0aGlzIHByb3Agd2hlbiB5b3Ugd2FudCB0byB0b2dnbGUgdGhlIGNvbXBvbmVudCBvciBvbiBgb25QcmVzc2AuXG4gICAqL1xuICBleHBhbmRlZD86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBGdW5jdGlvbiB0byBleGVjdXRlIG9uIHByZXNzLlxuICAgKi9cbiAgb25QcmVzcz86ICgpID0+IHZvaWQ7XG4gIC8qKlxuICAgKiBDb250ZW50IG9mIHRoZSBzZWN0aW9uLlxuICAgKi9cbiAgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZTtcbiAgLyoqXG4gICAqIEBvcHRpb25hbFxuICAgKi9cbiAgdGhlbWU6IFJlYWN0TmF0aXZlUGFwZXIuVGhlbWU7XG4gIC8qKlxuICAgKiBTdHlsZSB0aGF0IGlzIHBhc3NlZCB0byB0aGUgd3JhcHBpbmcgVG91Y2hhYmxlUmlwcGxlIGVsZW1lbnQuXG4gICAqL1xuICBzdHlsZT86IFN0eWxlUHJvcDxWaWV3U3R5bGU+O1xuICAvKipcbiAgICogU3R5bGUgdGhhdCBpcyBwYXNzZWQgdG8gVGl0bGUgZWxlbWVudC5cbiAgICovXG4gIHRpdGxlU3R5bGU/OiBTdHlsZVByb3A8VGV4dFN0eWxlPjtcbiAgLyoqXG4gICAqIFN0eWxlIHRoYXQgaXMgcGFzc2VkIHRvIERlc2NyaXB0aW9uIGVsZW1lbnQuXG4gICAqL1xuICBkZXNjcmlwdGlvblN0eWxlPzogU3R5bGVQcm9wPFRleHRTdHlsZT47XG4gIC8qKlxuICAgKiBUcnVuY2F0ZSBUaXRsZSB0ZXh0IHN1Y2ggdGhhdCB0aGUgdG90YWwgbnVtYmVyIG9mIGxpbmVzIGRvZXMgbm90XG4gICAqIGV4Y2VlZCB0aGlzIG51bWJlci5cbiAgICovXG4gIHRpdGxlTnVtYmVyT2ZMaW5lcz86IG51bWJlcjtcbiAgLyoqXG4gICAqIFRydW5jYXRlIERlc2NyaXB0aW9uIHRleHQgc3VjaCB0aGF0IHRoZSB0b3RhbCBudW1iZXIgb2YgbGluZXMgZG9lcyBub3RcbiAgICogZXhjZWVkIHRoaXMgbnVtYmVyLlxuICAgKi9cbiAgZGVzY3JpcHRpb25OdW1iZXJPZkxpbmVzPzogbnVtYmVyO1xuICAvKipcbiAgICogSWQgaXMgdXNlZCBmb3IgZGlzdGluZ3Vpc2hpbmcgc3BlY2lmaWMgYWNjb3JkaW9uIHdoZW4gdXNpbmcgTGlzdC5BY2NvcmRpb25Hcm91cC4gUHJvcGVydHkgaXMgcmVxdWlyZWQgd2hlbiB1c2luZyBMaXN0LkFjY29yZGlvbkdyb3VwIGFuZCBoYXMgbm8gaW1wYWN0IG9uIGJlaGF2aW9yIHdoZW4gdXNpbmcgc3RhbmRhbG9uZSBMaXN0LkFjY29yZGlvbi5cbiAgICovXG4gIGlkPzogc3RyaW5nIHwgbnVtYmVyO1xuICAvKipcbiAgICogVGVzdElEIHVzZWQgZm9yIHRlc3RpbmcgcHVycG9zZXNcbiAgICovXG4gIHRlc3RJRD86IHN0cmluZztcbn07XG5cbi8qKlxuICogQSBjb21wb25lbnQgdXNlZCB0byBkaXNwbGF5IGFuIGV4cGFuZGFibGUgbGlzdCBpdGVtLlxuICpcbiAqIDxkaXYgY2xhc3M9XCJzY3JlZW5zaG90c1wiPlxuICogICA8aW1nIGNsYXNzPVwibWVkaXVtXCIgc3JjPVwic2NyZWVuc2hvdHMvbGlzdC1hY2NvcmRpb24tMS5wbmdcIiAvPlxuICogICA8aW1nIGNsYXNzPVwibWVkaXVtXCIgc3JjPVwic2NyZWVuc2hvdHMvbGlzdC1hY2NvcmRpb24tMi5wbmdcIiAvPlxuICogICA8aW1nIGNsYXNzPVwibWVkaXVtXCIgc3JjPVwic2NyZWVuc2hvdHMvbGlzdC1hY2NvcmRpb24tMy5wbmdcIiAvPlxuICogPC9kaXY+XG4gKlxuICogIyMgVXNhZ2VcbiAqIGBgYGpzXG4gKiBpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG4gKiBpbXBvcnQgeyBMaXN0IH0gZnJvbSAncmVhY3QtbmF0aXZlLXBhcGVyJztcbiAqXG4gKiBjb25zdCBNeUNvbXBvbmVudCA9ICgpID0+IHtcbiAqICAgY29uc3QgW2V4cGFuZGVkLCBzZXRFeHBhbmRlZF0gPSBSZWFjdC51c2VTdGF0ZSh0cnVlKTtcbiAqXG4gKiAgIGNvbnN0IGhhbmRsZVByZXNzID0gKCkgPT4gc2V0RXhwYW5kZWQoIWV4cGFuZGVkKTtcbiAqXG4gKiAgIHJldHVybiAoXG4gKiAgICAgPExpc3QuU2VjdGlvbiB0aXRsZT1cIkFjY29yZGlvbnNcIj5cbiAqICAgICAgIDxMaXN0LkFjY29yZGlvblxuICogICAgICAgICB0aXRsZT1cIlVuY29udHJvbGxlZCBBY2NvcmRpb25cIlxuICogICAgICAgICBsZWZ0PXtwcm9wcyA9PiA8TGlzdC5JY29uIHsuLi5wcm9wc30gaWNvbj1cImZvbGRlclwiIC8+fT5cbiAqICAgICAgICAgPExpc3QuSXRlbSB0aXRsZT1cIkZpcnN0IGl0ZW1cIiAvPlxuICogICAgICAgICA8TGlzdC5JdGVtIHRpdGxlPVwiU2Vjb25kIGl0ZW1cIiAvPlxuICogICAgICAgPC9MaXN0LkFjY29yZGlvbj5cbiAqXG4gKiAgICAgICA8TGlzdC5BY2NvcmRpb25cbiAqICAgICAgICAgdGl0bGU9XCJDb250cm9sbGVkIEFjY29yZGlvblwiXG4gKiAgICAgICAgIGxlZnQ9e3Byb3BzID0+IDxMaXN0Lkljb24gey4uLnByb3BzfSBpY29uPVwiZm9sZGVyXCIgLz59XG4gKiAgICAgICAgIGV4cGFuZGVkPXtleHBhbmRlZH1cbiAqICAgICAgICAgb25QcmVzcz17aGFuZGxlUHJlc3N9PlxuICogICAgICAgICA8TGlzdC5JdGVtIHRpdGxlPVwiRmlyc3QgaXRlbVwiIC8+XG4gKiAgICAgICAgIDxMaXN0Lkl0ZW0gdGl0bGU9XCJTZWNvbmQgaXRlbVwiIC8+XG4gKiAgICAgICA8L0xpc3QuQWNjb3JkaW9uPlxuICogICAgIDwvTGlzdC5TZWN0aW9uPlxuICogICApO1xuICogfTtcbiAqXG4gKiBleHBvcnQgZGVmYXVsdCBNeUNvbXBvbmVudDtcbiAqIGBgYFxuICovXG5jb25zdCBMaXN0QWNjb3JkaW9uID0gKHtcbiAgbGVmdCxcbiAgdGl0bGUsXG4gIGRlc2NyaXB0aW9uLFxuICBjaGlsZHJlbixcbiAgdGhlbWUsXG4gIHRpdGxlU3R5bGUsXG4gIGRlc2NyaXB0aW9uU3R5bGUsXG4gIHRpdGxlTnVtYmVyT2ZMaW5lcyA9IDEsXG4gIGRlc2NyaXB0aW9uTnVtYmVyT2ZMaW5lcyA9IDIsXG4gIHN0eWxlLFxuICBpZCxcbiAgdGVzdElELFxuICBvblByZXNzLFxuICBleHBhbmRlZDogZXhwYW5kZWRQcm9wLFxufTogUHJvcHMpID0+IHtcbiAgY29uc3QgW2V4cGFuZGVkLCBzZXRFeHBhbmRlZF0gPSBSZWFjdC51c2VTdGF0ZTxib29sZWFuPihcbiAgICBleHBhbmRlZFByb3AgfHwgZmFsc2VcbiAgKTtcblxuICBjb25zdCBoYW5kbGVQcmVzc0FjdGlvbiA9ICgpID0+IHtcbiAgICBvblByZXNzPy4oKTtcblxuICAgIGlmIChleHBhbmRlZFByb3AgPT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gT25seSB1cGRhdGUgc3RhdGUgb2YgdGhlIGBleHBhbmRlZGAgcHJvcCB3YXMgbm90IHBhc3NlZFxuICAgICAgLy8gSWYgaXQgd2FzIHBhc3NlZCwgdGhlIGNvbXBvbmVudCB3aWxsIGFjdCBhcyBhIGNvbnRyb2xsZWQgY29tcG9uZW50XG4gICAgICBzZXRFeHBhbmRlZCgoZXhwYW5kZWQpID0+ICFleHBhbmRlZCk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHRpdGxlQ29sb3IgPSBjb2xvcih0aGVtZS5jb2xvcnMudGV4dCkuYWxwaGEoMC44NykucmdiKCkuc3RyaW5nKCk7XG4gIGNvbnN0IGRlc2NyaXB0aW9uQ29sb3IgPSBjb2xvcih0aGVtZS5jb2xvcnMudGV4dCkuYWxwaGEoMC41NCkucmdiKCkuc3RyaW5nKCk7XG5cbiAgY29uc3QgZXhwYW5kZWRJbnRlcm5hbCA9IGV4cGFuZGVkUHJvcCAhPT0gdW5kZWZpbmVkID8gZXhwYW5kZWRQcm9wIDogZXhwYW5kZWQ7XG5cbiAgY29uc3QgZ3JvdXBDb250ZXh0ID0gUmVhY3QudXNlQ29udGV4dChMaXN0QWNjb3JkaW9uR3JvdXBDb250ZXh0KTtcbiAgaWYgKGdyb3VwQ29udGV4dCAhPT0gbnVsbCAmJiAhaWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAnTGlzdC5BY2NvcmRpb24gaXMgdXNlZCBpbnNpZGUgYSBMaXN0LkFjY29yZGlvbkdyb3VwIHdpdGhvdXQgc3BlY2lmeWluZyBhbiBpZCBwcm9wLidcbiAgICApO1xuICB9XG4gIGNvbnN0IGlzRXhwYW5kZWQgPSBncm91cENvbnRleHRcbiAgICA/IGdyb3VwQ29udGV4dC5leHBhbmRlZElkID09PSBpZFxuICAgIDogZXhwYW5kZWRJbnRlcm5hbDtcbiAgY29uc3QgaGFuZGxlUHJlc3MgPVxuICAgIGdyb3VwQ29udGV4dCAmJiBpZCAhPT0gdW5kZWZpbmVkXG4gICAgICA/ICgpID0+IGdyb3VwQ29udGV4dC5vbkFjY29yZGlvblByZXNzKGlkKVxuICAgICAgOiBoYW5kbGVQcmVzc0FjdGlvbjtcbiAgcmV0dXJuIChcbiAgICA8Vmlldz5cbiAgICAgIDxUb3VjaGFibGVSaXBwbGVcbiAgICAgICAgc3R5bGU9e1tzdHlsZXMuY29udGFpbmVyLCBzdHlsZV19XG4gICAgICAgIG9uUHJlc3M9e2hhbmRsZVByZXNzfVxuICAgICAgICBhY2Nlc3NpYmlsaXR5VHJhaXRzPVwiYnV0dG9uXCJcbiAgICAgICAgYWNjZXNzaWJpbGl0eUNvbXBvbmVudFR5cGU9XCJidXR0b25cIlxuICAgICAgICBhY2Nlc3NpYmlsaXR5Um9sZT1cImJ1dHRvblwiXG4gICAgICAgIHRlc3RJRD17dGVzdElEfVxuICAgICAgPlxuICAgICAgICA8VmlldyBzdHlsZT17c3R5bGVzLnJvd30gcG9pbnRlckV2ZW50cz1cIm5vbmVcIj5cbiAgICAgICAgICB7bGVmdFxuICAgICAgICAgICAgPyBsZWZ0KHtcbiAgICAgICAgICAgICAgICBjb2xvcjogaXNFeHBhbmRlZCA/IHRoZW1lLmNvbG9ycy5wcmltYXJ5IDogZGVzY3JpcHRpb25Db2xvcixcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIDogbnVsbH1cbiAgICAgICAgICA8VmlldyBzdHlsZT17W3N0eWxlcy5pdGVtLCBzdHlsZXMuY29udGVudF19PlxuICAgICAgICAgICAgPFRleHRcbiAgICAgICAgICAgICAgc2VsZWN0YWJsZT17ZmFsc2V9XG4gICAgICAgICAgICAgIG51bWJlck9mTGluZXM9e3RpdGxlTnVtYmVyT2ZMaW5lc31cbiAgICAgICAgICAgICAgc3R5bGU9e1tcbiAgICAgICAgICAgICAgICBzdHlsZXMudGl0bGUsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgY29sb3I6IGlzRXhwYW5kZWQgPyB0aGVtZS5jb2xvcnMucHJpbWFyeSA6IHRpdGxlQ29sb3IsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB0aXRsZVN0eWxlLFxuICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7dGl0bGV9XG4gICAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICAgICB7ZGVzY3JpcHRpb24gJiYgKFxuICAgICAgICAgICAgICA8VGV4dFxuICAgICAgICAgICAgICAgIHNlbGVjdGFibGU9e2ZhbHNlfVxuICAgICAgICAgICAgICAgIG51bWJlck9mTGluZXM9e2Rlc2NyaXB0aW9uTnVtYmVyT2ZMaW5lc31cbiAgICAgICAgICAgICAgICBzdHlsZT17W1xuICAgICAgICAgICAgICAgICAgc3R5bGVzLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb2xvcjogZGVzY3JpcHRpb25Db2xvcixcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvblN0eWxlLFxuICAgICAgICAgICAgICAgIF19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7ZGVzY3JpcHRpb259XG4gICAgICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9WaWV3PlxuICAgICAgICAgIDxWaWV3XG4gICAgICAgICAgICBzdHlsZT17W3N0eWxlcy5pdGVtLCBkZXNjcmlwdGlvbiA/IHN0eWxlcy5tdWx0aWxpbmUgOiB1bmRlZmluZWRdfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxNYXRlcmlhbENvbW11bml0eUljb25cbiAgICAgICAgICAgICAgbmFtZT17aXNFeHBhbmRlZCA/ICdjaGV2cm9uLXVwJyA6ICdjaGV2cm9uLWRvd24nfVxuICAgICAgICAgICAgICBjb2xvcj17dGl0bGVDb2xvcn1cbiAgICAgICAgICAgICAgc2l6ZT17MjR9XG4gICAgICAgICAgICAgIGRpcmVjdGlvbj17STE4bk1hbmFnZXIuaXNSVEwgPyAncnRsJyA6ICdsdHInfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L1ZpZXc+XG4gICAgICAgIDwvVmlldz5cbiAgICAgIDwvVG91Y2hhYmxlUmlwcGxlPlxuICAgICAge2lzRXhwYW5kZWRcbiAgICAgICAgPyBSZWFjdC5DaGlsZHJlbi5tYXAoY2hpbGRyZW4sIChjaGlsZCkgPT4ge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBsZWZ0ICYmXG4gICAgICAgICAgICAgIFJlYWN0LmlzVmFsaWRFbGVtZW50KGNoaWxkKSAmJlxuICAgICAgICAgICAgICAhY2hpbGQucHJvcHMubGVmdCAmJlxuICAgICAgICAgICAgICAhY2hpbGQucHJvcHMucmlnaHRcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICByZXR1cm4gUmVhY3QuY2xvbmVFbGVtZW50KGNoaWxkLCB7XG4gICAgICAgICAgICAgICAgc3R5bGU6IFtzdHlsZXMuY2hpbGQsIGNoaWxkLnByb3BzLnN0eWxlXSxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBjaGlsZDtcbiAgICAgICAgICB9KVxuICAgICAgICA6IG51bGx9XG4gICAgPC9WaWV3PlxuICApO1xufTtcblxuTGlzdEFjY29yZGlvbi5kaXNwbGF5TmFtZSA9ICdMaXN0LkFjY29yZGlvbic7XG5cbmNvbnN0IHN0eWxlcyA9IFN0eWxlU2hlZXQuY3JlYXRlKHtcbiAgY29udGFpbmVyOiB7XG4gICAgcGFkZGluZzogOCxcbiAgfSxcbiAgcm93OiB7XG4gICAgZmxleERpcmVjdGlvbjogJ3JvdycsXG4gICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gIH0sXG4gIG11bHRpbGluZToge1xuICAgIGhlaWdodDogNDAsXG4gICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxuICB9LFxuICB0aXRsZToge1xuICAgIGZvbnRTaXplOiAxNixcbiAgfSxcbiAgZGVzY3JpcHRpb246IHtcbiAgICBmb250U2l6ZTogMTQsXG4gIH0sXG4gIGl0ZW06IHtcbiAgICBtYXJnaW46IDgsXG4gIH0sXG4gIGNoaWxkOiB7XG4gICAgcGFkZGluZ0xlZnQ6IDY0LFxuICB9LFxuICBjb250ZW50OiB7XG4gICAgZmxleDogMSxcbiAgICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXG4gIH0sXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgd2l0aFRoZW1lKExpc3RBY2NvcmRpb24pO1xuIl19