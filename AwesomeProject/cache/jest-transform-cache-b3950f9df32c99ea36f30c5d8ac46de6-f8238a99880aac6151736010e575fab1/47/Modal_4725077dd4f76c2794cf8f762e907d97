752f7e94c71131b56e30a01b4393881b
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _RCTModalHostViewNativeComponent = _interopRequireDefault(require("./RCTModalHostViewNativeComponent"));

var _container;

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

var AppContainer = require('../ReactNative/AppContainer');

var I18nManager = require('../ReactNative/I18nManager');

var PropTypes = require('prop-types');

var React = require('react');

var ScrollView = require('../Components/ScrollView/ScrollView');

var StyleSheet = require('../StyleSheet/StyleSheet');

var View = require('../Components/View/View');

var uniqueModalIdentifier = 0;

var Modal = function (_React$Component) {
  (0, _inherits2.default)(Modal, _React$Component);

  var _super = _createSuper(Modal);

  function Modal(props) {
    var _this;

    (0, _classCallCheck2.default)(this, Modal);
    _this = _super.call(this, props);

    Modal._confirmProps(props);

    _this._identifier = uniqueModalIdentifier++;
    return _this;
  }

  (0, _createClass2.default)(Modal, [{
    key: "getChildContext",
    value: function getChildContext() {
      return {
        virtualizedList: null
      };
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      if (this.props.onDismiss != null) {
        this.props.onDismiss();
      }
    }
  }, {
    key: "UNSAFE_componentWillReceiveProps",
    value: function UNSAFE_componentWillReceiveProps(nextProps) {
      Modal._confirmProps(nextProps);
    }
  }, {
    key: "render",
    value: function render() {
      if (this.props.visible !== true) {
        return null;
      }

      var containerStyles = {
        backgroundColor: this.props.transparent ? 'transparent' : 'white'
      };
      var animationType = this.props.animationType || 'none';
      var presentationStyle = this.props.presentationStyle;

      if (!presentationStyle) {
        presentationStyle = 'fullScreen';

        if (this.props.transparent) {
          presentationStyle = 'overFullScreen';
        }
      }

      var innerChildren = __DEV__ ? React.createElement(AppContainer, {
        rootTag: this.context.rootTag
      }, this.props.children) : this.props.children;
      return React.createElement(_RCTModalHostViewNativeComponent.default, {
        animationType: animationType,
        presentationStyle: presentationStyle,
        transparent: this.props.transparent,
        hardwareAccelerated: this.props.hardwareAccelerated,
        onRequestClose: this.props.onRequestClose,
        onShow: this.props.onShow,
        statusBarTranslucent: this.props.statusBarTranslucent,
        identifier: this._identifier,
        style: styles.modal,
        onStartShouldSetResponder: this._shouldSetResponder,
        supportedOrientations: this.props.supportedOrientations,
        onOrientationChange: this.props.onOrientationChange
      }, React.createElement(ScrollView.Context.Provider, {
        value: null
      }, React.createElement(View, {
        style: [styles.container, containerStyles]
      }, innerChildren)));
    }
  }, {
    key: "_shouldSetResponder",
    value: function _shouldSetResponder() {
      return true;
    }
  }], [{
    key: "_confirmProps",
    value: function _confirmProps(props) {
      if (props.presentationStyle && props.presentationStyle !== 'overFullScreen' && props.transparent) {
        console.warn("Modal with '" + props.presentationStyle + "' presentation style and 'transparent' value is not supported.");
      }
    }
  }]);
  return Modal;
}(React.Component);

Modal.defaultProps = {
  visible: true,
  hardwareAccelerated: false
};
Modal.contextTypes = {
  rootTag: PropTypes.number
};
Modal.childContextTypes = {
  virtualizedList: PropTypes.object
};
var side = I18nManager.getConstants().isRTL ? 'right' : 'left';
var styles = StyleSheet.create({
  modal: {
    position: 'absolute'
  },
  container: (_container = {}, (0, _defineProperty2.default)(_container, side, 0), (0, _defineProperty2.default)(_container, "top", 0), (0, _defineProperty2.default)(_container, "flex", 1), _container)
});
module.exports = Modal;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIk1vZGFsLmpzIl0sIm5hbWVzIjpbIkFwcENvbnRhaW5lciIsInJlcXVpcmUiLCJJMThuTWFuYWdlciIsIlByb3BUeXBlcyIsIlJlYWN0IiwiU2Nyb2xsVmlldyIsIlN0eWxlU2hlZXQiLCJWaWV3IiwidW5pcXVlTW9kYWxJZGVudGlmaWVyIiwiTW9kYWwiLCJwcm9wcyIsIl9jb25maXJtUHJvcHMiLCJfaWRlbnRpZmllciIsInZpcnR1YWxpemVkTGlzdCIsIm9uRGlzbWlzcyIsIm5leHRQcm9wcyIsInZpc2libGUiLCJjb250YWluZXJTdHlsZXMiLCJiYWNrZ3JvdW5kQ29sb3IiLCJ0cmFuc3BhcmVudCIsImFuaW1hdGlvblR5cGUiLCJwcmVzZW50YXRpb25TdHlsZSIsImlubmVyQ2hpbGRyZW4iLCJfX0RFVl9fIiwiY29udGV4dCIsInJvb3RUYWciLCJjaGlsZHJlbiIsImhhcmR3YXJlQWNjZWxlcmF0ZWQiLCJvblJlcXVlc3RDbG9zZSIsIm9uU2hvdyIsInN0YXR1c0JhclRyYW5zbHVjZW50Iiwic3R5bGVzIiwibW9kYWwiLCJfc2hvdWxkU2V0UmVzcG9uZGVyIiwic3VwcG9ydGVkT3JpZW50YXRpb25zIiwib25PcmllbnRhdGlvbkNoYW5nZSIsImNvbnRhaW5lciIsImNvbnNvbGUiLCJ3YXJuIiwiQ29tcG9uZW50IiwiZGVmYXVsdFByb3BzIiwiY29udGV4dFR5cGVzIiwibnVtYmVyIiwiY2hpbGRDb250ZXh0VHlwZXMiLCJvYmplY3QiLCJzaWRlIiwiZ2V0Q29uc3RhbnRzIiwiaXNSVEwiLCJjcmVhdGUiLCJwb3NpdGlvbiIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQVVBOzs7Ozs7Ozs7Ozs7Ozs7O0FBYUE7Ozs7Ozs7O0FBWEEsSUFBTUEsWUFBWSxHQUFHQyxPQUFPLENBQUMsNkJBQUQsQ0FBNUI7O0FBQ0EsSUFBTUMsV0FBVyxHQUFHRCxPQUFPLENBQUMsNEJBQUQsQ0FBM0I7O0FBQ0EsSUFBTUUsU0FBUyxHQUFHRixPQUFPLENB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Q0ssU0FBUixFQUFtQm5CLGVBQW5CO0FBQWIsU0FDR0ssYUFESCxDQURGLENBYkYsQ0FERjtBQXFCRDs7OzBDQUc4QjtBQUM3QixhQUFPLElBQVA7QUFDRDs7O2tDQW5Fb0JaLEssRUFBYztBQUNqQyxVQUNFQSxLQUFLLENBQUNXLGlCQUFOLElBQ0FYLEtBQUssQ0FBQ1csaUJBQU4sS0FBNEIsZ0JBRDVCLElBRUFYLEtBQUssQ0FBQ1MsV0FIUixFQUlFO0FBQ0FrQixRQUFBQSxPQUFPLENBQUNDLElBQVIsa0JBRUk1QixLQUFLLENBQUNXLGlCQUZWO0FBS0Q7QUFDRjs7O0VBdkRpQmpCLEtBQUssQ0FBQ21DLFM7O0FBQXBCOUIsSyxDQUNHK0IsWSxHQUFtRTtBQUN4RXhCLEVBQUFBLE9BQU8sRUFBRSxJQUQrRDtBQUV4RVcsRUFBQUEsbUJBQW1CLEVBQUU7QUFGbUQsQztBQUR0RWxCLEssQ0FNR2dDLFksR0FBb0U7QUFDekVoQixFQUFBQSxPQUFPLEVBQUV0QixTQUFTLENBQUN1QztBQURzRCxDO0FBTnZFakMsSyxDQW1CR2tDLGlCLEdBRWtEO0FBQ3ZEOUIsRUFBQUEsZUFBZSxFQUFFVixTQUFTLENBQUN5QztBQUQ0QixDO0FBNEYzRCxJQUFNQyxJQUFJLEdBQUczQyxXQUFXLENBQUM0QyxZQUFaLEdBQTJCQyxLQUEzQixHQUFtQyxPQUFuQyxHQUE2QyxNQUExRDtBQUNBLElBQU1oQixNQUFNLEdBQUd6QixVQUFVLENBQUMwQyxNQUFYLENBQWtCO0FBQy9CaEIsRUFBQUEsS0FBSyxFQUFFO0FBQ0xpQixJQUFBQSxRQUFRLEVBQUU7QUFETCxHQUR3QjtBQUkvQmIsRUFBQUEsU0FBUyw4REFJTlMsSUFKTSxFQUlDLENBSkQsb0RBS0YsQ0FMRSxxREFNRCxDQU5DO0FBSnNCLENBQWxCLENBQWY7QUFjQUssTUFBTSxDQUFDQyxPQUFQLEdBQWlCMUMsS0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgRmFjZWJvb2ssIEluYy4gYW5kIGl0cyBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIEBmb3JtYXRcbiAqIEBmbG93XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBBcHBDb250YWluZXIgPSByZXF1aXJlKCcuLi9SZWFjdE5hdGl2ZS9BcHBDb250YWluZXInKTtcbmNvbnN0IEkxOG5NYW5hZ2VyID0gcmVxdWlyZSgnLi4vUmVhY3ROYXRpdmUvSTE4bk1hbmFnZXInKTtcbmNvbnN0IFByb3BUeXBlcyA9IHJlcXVpcmUoJ3Byb3AtdHlwZXMnKTtcbmNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbmNvbnN0IFNjcm9sbFZpZXcgPSByZXF1aXJlKCcuLi9Db21wb25lbnRzL1Njcm9sbFZpZXcvU2Nyb2xsVmlldycpO1xuY29uc3QgU3R5bGVTaGVldCA9IHJlcXVpcmUoJy4uL1N0eWxlU2hlZXQvU3R5bGVTaGVldCcpO1xuY29uc3QgVmlldyA9IHJlcXVpcmUoJy4uL0NvbXBvbmVudHMvVmlldy9WaWV3Jyk7XG5cbmltcG9ydCB0eXBlIHtWaWV3UHJvcHN9IGZyb20gJy4uL0NvbXBvbmVudHMvVmlldy9WaWV3UHJvcFR5cGVzJztcbmltcG9ydCB0eXBlIHtEaXJlY3RFdmVudEhhbmRsZXJ9IGZyb20gJy4uL1R5cGVzL0NvZGVnZW5UeXBlcyc7XG5pbXBvcnQgdHlwZSBFbWl0dGVyU3Vic2NyaXB0aW9uIGZyb20gJy4uL3ZlbmRvci9lbWl0dGVyL0VtaXR0ZXJTdWJzY3JpcHRpb24nO1xuaW1wb3J0IFJDVE1vZGFsSG9zdFZpZXcgZnJvbSAnLi9SQ1RNb2RhbEhvc3RWaWV3TmF0aXZlQ29tcG9uZW50Jztcbi8qKlxuICogVGhlIE1vZGFsIGNvbXBvbmVudCBpcyBhIHNpbXBsZSB3YXkgdG8gcHJlc2VudCBjb250ZW50IGFib3ZlIGFuIGVuY2xvc2luZyB2aWV3LlxuICpcbiAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL21vZGFsLmh0bWxcbiAqL1xuXG4vLyBJbiBvcmRlciB0byByb3V0ZSBvbkRpc21pc3MgY2FsbGJhY2tzLCB3ZSBuZWVkIHRvIHVuaXF1ZWx5IGlkZW50aWZpZXIgZWFjaFxuLy8gPE1vZGFsPiBvbiBzY3JlZW4uIFRoZXJlIGNhbiBiZSBkaWZmZXJlbnQgb25lcywgZWl0aGVyIG5lc3RlZCBvciBhcyBzaWJsaW5ncy5cbi8vIFdlIGNhbm5vdCBwYXNzIHRoZSBvbkRpc21pc3MgY2FsbGJhY2sgdG8gbmF0aXZlIGFzIHRoZSB2aWV3IHdpbGwgYmVcbi8vIGRlc3Ryb3llZCBiZWZvcmUgdGhlIGNhbGxiYWNrIGlzIGZpcmVkLlxubGV0IHVuaXF1ZU1vZGFsSWRlbnRpZmllciA9IDA7XG5cbnR5cGUgT3JpZW50YXRpb25DaGFuZ2VFdmVudCA9ICRSZWFkT25seTx7fFxuICBvcmllbnRhdGlvbjogJ3BvcnRyYWl0JyB8ICdsYW5kc2NhcGUnLFxufH0+O1xuXG5leHBvcnQgdHlwZSBQcm9wcyA9ICRSZWFkT25seTx7fFxuICAuLi5WaWV3UHJvcHMsXG5cbiAgLyoqXG4gICAqIFRoZSBgYW5pbWF0aW9uVHlwZWAgcHJvcCBjb250cm9scyBob3cgdGhlIG1vZGFsIGFuaW1hdGVzLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9tb2RhbC5odG1sI2FuaW1hdGlvbnR5cGVcbiAgICovXG4gIGFuaW1hdGlvblR5cGU/OiA/KCdub25lJyB8ICdzbGlkZScgfCAnZmFkZScpLFxuXG4gIC8qKlxuICAgKiBUaGUgYHByZXNlbnRhdGlvblN0eWxlYCBwcm9wIGNvbnRyb2xzIGhvdyB0aGUgbW9kYWwgYXBwZWFycy5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvbW9kYWwuaHRtbCNwcmVzZW50YXRpb25zdHlsZVxuICAgKi9cbiAgcHJlc2VudGF0aW9uU3R5bGU/OiA/KFxuICAgIHwgJ2Z1bGxTY3JlZW4nXG4gICAgfCAncGFnZVNoZWV0J1xuICAgIHwgJ2Zvcm1TaGVldCdcbiAgICB8ICdvdmVyRnVsbFNjcmVlbidcbiAgKSxcblxuICAvKipcbiAgICogVGhlIGB0cmFuc3BhcmVudGAgcHJvcCBkZXRlcm1pbmVzIHdoZXRoZXIgeW91ciBtb2RhbCB3aWxsIGZpbGwgdGhlXG4gICAqIGVudGlyZSB2aWV3LlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9tb2RhbC5odG1sI3RyYW5zcGFyZW50XG4gICAqL1xuICB0cmFuc3BhcmVudD86ID9ib29sZWFuLFxuXG4gIC8qKlxuICAgKiBUaGUgYHN0YXR1c0JhclRyYW5zbHVjZW50YCBwcm9wIGRldGVybWluZXMgd2hldGhlciB5b3VyIG1vZGFsIHNob3VsZCBnbyB1bmRlclxuICAgKiB0aGUgc3lzdGVtIHN0YXR1c2Jhci5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvbW9kYWwuaHRtbCN0cmFuc3BhcmVudFxuICAgKi9cbiAgc3RhdHVzQmFyVHJhbnNsdWNlbnQ/OiA/Ym9vbGVhbixcblxuICAvKipcbiAgICogVGhlIGBoYXJkd2FyZUFjY2VsZXJhdGVkYCBwcm9wIGNvbnRyb2xzIHdoZXRoZXIgdG8gZm9yY2UgaGFyZHdhcmVcbiAgICogYWNjZWxlcmF0aW9uIGZvciB0aGUgdW5kZXJseWluZyB3aW5kb3cuXG4gICAqXG4gICAqIFRoaXMgcHJvcCB3b3JrcyBvbmx5IG9uIEFuZHJvaWQuXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL21vZGFsLmh0bWwjaGFyZHdhcmVhY2NlbGVyYXRlZFxuICAgKi9cbiAgaGFyZHdhcmVBY2NlbGVyYXRlZD86ID9ib29sZWFuLFxuXG4gIC8qKlxuICAgKiBUaGUgYHZpc2libGVgIHByb3AgZGV0ZXJtaW5lcyB3aGV0aGVyIHlvdXIgbW9kYWwgaXMgdmlzaWJsZS5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvbW9kYWwuaHRtbCN2aXNpYmxlXG4gICAqL1xuICB2aXNpYmxlPzogP2Jvb2xlYW4sXG5cbiAgLyoqXG4gICAqIFRoZSBgb25SZXF1ZXN0Q2xvc2VgIGNhbGxiYWNrIGlzIGNhbGxlZCB3aGVuIHRoZSB1c2VyIHRhcHMgdGhlIGhhcmR3YXJlXG4gICAqIGJhY2sgYnV0dG9uIG9uIEFuZHJvaWQgb3IgdGhlIG1lbnUgYnV0dG9uIG9uIEFwcGxlIFRWLlxuICAgKlxuICAgKiBUaGlzIGlzIHJlcXVpcmVkIG9uIEFwcGxlIFRWIGFuZCBBbmRyb2lkLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9tb2RhbC5odG1sI29ucmVxdWVzdGNsb3NlXG4gICAqL1xuICBvblJlcXVlc3RDbG9zZT86ID9EaXJlY3RFdmVudEhhbmRsZXI8bnVsbD4sXG5cbiAgLyoqXG4gICAqIFRoZSBgb25TaG93YCBwcm9wIGFsbG93cyBwYXNzaW5nIGEgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCBvbmNlIHRoZVxuICAgKiBtb2RhbCBoYXMgYmVlbiBzaG93bi5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvbW9kYWwuaHRtbCNvbnNob3dcbiAgICovXG4gIG9uU2hvdz86ID9EaXJlY3RFdmVudEhhbmRsZXI8bnVsbD4sXG5cbiAgLyoqXG4gICAqIFRoZSBgb25EaXNtaXNzYCBwcm9wIGFsbG93cyBwYXNzaW5nIGEgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCBvbmNlXG4gICAqIHRoZSBtb2RhbCBoYXMgYmVlbiBkaXNtaXNzZWQuXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL21vZGFsLmh0bWwjb25kaXNtaXNzXG4gICAqL1xuICBvbkRpc21pc3M/OiA/KCkgPT4gbWl4ZWQsXG5cbiAgLyoqXG4gICAqIFRoZSBgc3VwcG9ydGVkT3JpZW50YXRpb25zYCBwcm9wIGFsbG93cyB0aGUgbW9kYWwgdG8gYmUgcm90YXRlZCB0byBhbnkgb2YgdGhlIHNwZWNpZmllZCBvcmllbnRhdGlvbnMuXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL21vZGFsLmh0bWwjc3VwcG9ydGVkb3JpZW50YXRpb25zXG4gICAqL1xuICBzdXBwb3J0ZWRPcmllbnRhdGlvbnM/OiA/JFJlYWRPbmx5QXJyYXk8XG4gICAgfCAncG9ydHJhaXQnXG4gICAgfCAncG9ydHJhaXQtdXBzaWRlLWRvd24nXG4gICAgfCAnbGFuZHNjYXBlJ1xuICAgIHwgJ2xhbmRzY2FwZS1sZWZ0J1xuICAgIHwgJ2xhbmRzY2FwZS1yaWdodCcsXG4gID4sXG5cbiAgLyoqXG4gICAqIFRoZSBgb25PcmllbnRhdGlvbkNoYW5nZWAgY2FsbGJhY2sgaXMgY2FsbGVkIHdoZW4gdGhlIG9yaWVudGF0aW9uIGNoYW5nZXMgd2hpbGUgdGhlIG1vZGFsIGlzIGJlaW5nIGRpc3BsYXllZC5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvbW9kYWwuaHRtbCNvbm9yaWVudGF0aW9uY2hhbmdlXG4gICAqL1xuICBvbk9yaWVudGF0aW9uQ2hhbmdlPzogP0RpcmVjdEV2ZW50SGFuZGxlcjxPcmllbnRhdGlvbkNoYW5nZUV2ZW50Pixcbnx9PjtcblxuY2xhc3MgTW9kYWwgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHM+IHtcbiAgc3RhdGljIGRlZmF1bHRQcm9wczoge3xoYXJkd2FyZUFjY2VsZXJhdGVkOiBib29sZWFuLCB2aXNpYmxlOiBib29sZWFufH0gPSB7XG4gICAgdmlzaWJsZTogdHJ1ZSxcbiAgICBoYXJkd2FyZUFjY2VsZXJhdGVkOiBmYWxzZSxcbiAgfTtcblxuICBzdGF0aWMgY29udGV4dFR5cGVzOiBhbnkgfCB7fHJvb3RUYWc6IFJlYWN0JFByb3BUeXBlJFByaW1pdGl2ZTxudW1iZXI+fH0gPSB7XG4gICAgcm9vdFRhZzogUHJvcFR5cGVzLm51bWJlcixcbiAgfTtcblxuICBfaWRlbnRpZmllcjogbnVtYmVyO1xuICBfZXZlbnRTdWJzY3JpcHRpb246ID9FbWl0dGVyU3Vic2NyaXB0aW9uO1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICBNb2RhbC5fY29uZmlybVByb3BzKHByb3BzKTtcbiAgICB0aGlzLl9pZGVudGlmaWVyID0gdW5pcXVlTW9kYWxJZGVudGlmaWVyKys7XG4gIH1cblxuICBzdGF0aWMgY2hpbGRDb250ZXh0VHlwZXM6XG4gICAgfCBhbnlcbiAgICB8IHt8dmlydHVhbGl6ZWRMaXN0OiBSZWFjdCRQcm9wVHlwZSRQcmltaXRpdmU8YW55Pnx9ID0ge1xuICAgIHZpcnR1YWxpemVkTGlzdDogUHJvcFR5cGVzLm9iamVjdCxcbiAgfTtcblxuICBnZXRDaGlsZENvbnRleHQoKToge3x2aXJ0dWFsaXplZExpc3Q6IG51bGx8fSB7XG4gICAgLy8gUmVzZXQgdGhlIGNvbnRleHQgc28gVmlydHVhbGl6ZWRMaXN0IGRvZXNuJ3QgZ2V0IGNvbmZ1c2VkIGJ5IG5lc3RpbmdcbiAgICAvLyBpbiB0aGUgUmVhY3QgdHJlZSB0aGF0IGRvZXNuJ3QgcmVmbGVjdCB0aGUgbmF0aXZlIGNvbXBvbmVudCBoaWVyYXJjaHkuXG4gICAgcmV0dXJuIHtcbiAgICAgIHZpcnR1YWxpemVkTGlzdDogbnVsbCxcbiAgICB9O1xuICB9XG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgaWYgKHRoaXMucHJvcHMub25EaXNtaXNzICE9IG51bGwpIHtcbiAgICAgIHRoaXMucHJvcHMub25EaXNtaXNzKCk7XG4gICAgfVxuICB9XG5cbiAgVU5TQUZFX2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzOiBQcm9wcykge1xuICAgIE1vZGFsLl9jb25maXJtUHJvcHMobmV4dFByb3BzKTtcbiAgfVxuXG4gIHN0YXRpYyBfY29uZmlybVByb3BzKHByb3BzOiBQcm9wcykge1xuICAgIGlmIChcbiAgICAgIHByb3BzLnByZXNlbnRhdGlvblN0eWxlICYmXG4gICAgICBwcm9wcy5wcmVzZW50YXRpb25TdHlsZSAhPT0gJ292ZXJGdWxsU2NyZWVuJyAmJlxuICAgICAgcHJvcHMudHJhbnNwYXJlbnRcbiAgICApIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgYE1vZGFsIHdpdGggJyR7XG4gICAgICAgICAgcHJvcHMucHJlc2VudGF0aW9uU3R5bGVcbiAgICAgICAgfScgcHJlc2VudGF0aW9uIHN0eWxlIGFuZCAndHJhbnNwYXJlbnQnIHZhbHVlIGlzIG5vdCBzdXBwb3J0ZWQuYCxcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgcmVuZGVyKCk6IFJlYWN0Lk5vZGUge1xuICAgIGlmICh0aGlzLnByb3BzLnZpc2libGUgIT09IHRydWUpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbnRhaW5lclN0eWxlcyA9IHtcbiAgICAgIGJhY2tncm91bmRDb2xvcjogdGhpcy5wcm9wcy50cmFuc3BhcmVudCA/ICd0cmFuc3BhcmVudCcgOiAnd2hpdGUnLFxuICAgIH07XG5cbiAgICBsZXQgYW5pbWF0aW9uVHlwZSA9IHRoaXMucHJvcHMuYW5pbWF0aW9uVHlwZSB8fCAnbm9uZSc7XG5cbiAgICBsZXQgcHJlc2VudGF0aW9uU3R5bGUgPSB0aGlzLnByb3BzLnByZXNlbnRhdGlvblN0eWxlO1xuICAgIGlmICghcHJlc2VudGF0aW9uU3R5bGUpIHtcbiAgICAgIHByZXNlbnRhdGlvblN0eWxlID0gJ2Z1bGxTY3JlZW4nO1xuICAgICAgaWYgKHRoaXMucHJvcHMudHJhbnNwYXJlbnQpIHtcbiAgICAgICAgcHJlc2VudGF0aW9uU3R5bGUgPSAnb3ZlckZ1bGxTY3JlZW4nO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGlubmVyQ2hpbGRyZW4gPSBfX0RFVl9fID8gKFxuICAgICAgPEFwcENvbnRhaW5lciByb290VGFnPXt0aGlzLmNvbnRleHQucm9vdFRhZ30+XG4gICAgICAgIHt0aGlzLnByb3BzLmNoaWxkcmVufVxuICAgICAgPC9BcHBDb250YWluZXI+XG4gICAgKSA6IChcbiAgICAgIHRoaXMucHJvcHMuY2hpbGRyZW5cbiAgICApO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxSQ1RNb2RhbEhvc3RWaWV3XG4gICAgICAgIGFuaW1hdGlvblR5cGU9e2FuaW1hdGlvblR5cGV9XG4gICAgICAgIHByZXNlbnRhdGlvblN0eWxlPXtwcmVzZW50YXRpb25TdHlsZX1cbiAgICAgICAgdHJhbnNwYXJlbnQ9e3RoaXMucHJvcHMudHJhbnNwYXJlbnR9XG4gICAgICAgIGhhcmR3YXJlQWNjZWxlcmF0ZWQ9e3RoaXMucHJvcHMuaGFyZHdhcmVBY2NlbGVyYXRlZH1cbiAgICAgICAgb25SZXF1ZXN0Q2xvc2U9e3RoaXMucHJvcHMub25SZXF1ZXN0Q2xvc2V9XG4gICAgICAgIG9uU2hvdz17dGhpcy5wcm9wcy5vblNob3d9XG4gICAgICAgIHN0YXR1c0JhclRyYW5zbHVjZW50PXt0aGlzLnByb3BzLnN0YXR1c0JhclRyYW5zbHVjZW50fVxuICAgICAgICBpZGVudGlmaWVyPXt0aGlzLl9pZGVudGlmaWVyfVxuICAgICAgICBzdHlsZT17c3R5bGVzLm1vZGFsfVxuICAgICAgICBvblN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyPXt0aGlzLl9zaG91bGRTZXRSZXNwb25kZXJ9XG4gICAgICAgIHN1cHBvcnRlZE9yaWVudGF0aW9ucz17dGhpcy5wcm9wcy5zdXBwb3J0ZWRPcmllbnRhdGlvbnN9XG4gICAgICAgIG9uT3JpZW50YXRpb25DaGFuZ2U9e3RoaXMucHJvcHMub25PcmllbnRhdGlvbkNoYW5nZX0+XG4gICAgICAgIDxTY3JvbGxWaWV3LkNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e251bGx9PlxuICAgICAgICAgIDxWaWV3IHN0eWxlPXtbc3R5bGVzLmNvbnRhaW5lciwgY29udGFpbmVyU3R5bGVzXX0+XG4gICAgICAgICAgICB7aW5uZXJDaGlsZHJlbn1cbiAgICAgICAgICA8L1ZpZXc+XG4gICAgICAgIDwvU2Nyb2xsVmlldy5Db250ZXh0LlByb3ZpZGVyPlxuICAgICAgPC9SQ1RNb2RhbEhvc3RWaWV3PlxuICAgICk7XG4gIH1cblxuICAvLyBXZSBkb24ndCB3YW50IGFueSByZXNwb25kZXIgZXZlbnRzIGJ1YmJsaW5nIG91dCBvZiB0aGUgbW9kYWwuXG4gIF9zaG91bGRTZXRSZXNwb25kZXIoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn1cblxuY29uc3Qgc2lkZSA9IEkxOG5NYW5hZ2VyLmdldENvbnN0YW50cygpLmlzUlRMID8gJ3JpZ2h0JyA6ICdsZWZ0JztcbmNvbnN0IHN0eWxlcyA9IFN0eWxlU2hlZXQuY3JlYXRlKHtcbiAgbW9kYWw6IHtcbiAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgfSxcbiAgY29udGFpbmVyOiB7XG4gICAgLyogJEZsb3dGaXhNZSg+PTAuMTExLjAgc2l0ZT1yZWFjdF9uYXRpdmVfZmIpIFRoaXMgY29tbWVudCBzdXBwcmVzc2VzIGFuXG4gICAgICogZXJyb3IgZm91bmQgd2hlbiBGbG93IHYwLjExMSB3YXMgZGVwbG95ZWQuIFRvIHNlZSB0aGUgZXJyb3IsIGRlbGV0ZSB0aGlzXG4gICAgICogY29tbWVudCBhbmQgcnVuIEZsb3cuICovXG4gICAgW3NpZGVdOiAwLFxuICAgIHRvcDogMCxcbiAgICBmbGV4OiAxLFxuICB9LFxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gTW9kYWw7XG4iXX0=